!function(e,t){function n(e){var t=e.length,n=ut.type(e);return ut.isWindow(e)?!1:1===e.nodeType&&t?!0:"array"===n||"function"!==n&&(0===t||"number"==typeof t&&t>0&&t-1 in e)}function r(e){var t=St[e]={};return ut.each(e.match(ht)||[],function(e,n){t[n]=!0}),t}function i(e,n,r,i){if(ut.acceptData(e)){var o,s,a=ut.expando,l=e.nodeType,c=l?ut.cache:e,u=l?e[a]:e[a]&&a;if(u&&c[u]&&(i||c[u].data)||r!==t||"string"!=typeof n)return u||(u=l?e[a]=tt.pop()||ut.guid++:a),c[u]||(c[u]=l?{}:{toJSON:ut.noop}),("object"==typeof n||"function"==typeof n)&&(i?c[u]=ut.extend(c[u],n):c[u].data=ut.extend(c[u].data,n)),s=c[u],i||(s.data||(s.data={}),s=s.data),r!==t&&(s[ut.camelCase(n)]=r),"string"==typeof n?(o=s[n],null==o&&(o=s[ut.camelCase(n)])):o=s,o}}function o(e,t,n){if(ut.acceptData(e)){var r,i,o=e.nodeType,s=o?ut.cache:e,l=o?e[ut.expando]:ut.expando;if(s[l]){if(t&&(r=n?s[l]:s[l].data)){ut.isArray(t)?t=t.concat(ut.map(t,ut.camelCase)):t in r?t=[t]:(t=ut.camelCase(t),t=t in r?[t]:t.split(" ")),i=t.length;for(;i--;)delete r[t[i]];if(n?!a(r):!ut.isEmptyObject(r))return}(n||(delete s[l].data,a(s[l])))&&(o?ut.cleanData([e],!0):ut.support.deleteExpando||s!=s.window?delete s[l]:s[l]=null)}}}function s(e,n,r){if(r===t&&1===e.nodeType){var i="data-"+n.replace(Nt,"-$1").toLowerCase();if(r=e.getAttribute(i),"string"==typeof r){try{r="true"===r?!0:"false"===r?!1:"null"===r?null:+r+""===r?+r:xt.test(r)?ut.parseJSON(r):r}catch(o){}ut.data(e,n,r)}else r=t}return r}function a(e){var t;for(t in e)if(("data"!==t||!ut.isEmptyObject(e[t]))&&"toJSON"!==t)return!1;return!0}function l(){return!0}function c(){return!1}function u(){try{return G.activeElement}catch(e){}}function d(e,t){do e=e[t];while(e&&1!==e.nodeType);return e}function h(e,t,n){if(ut.isFunction(t))return ut.grep(e,function(e,r){return!!t.call(e,r,e)!==n});if(t.nodeType)return ut.grep(e,function(e){return e===t!==n});if("string"==typeof t){if(Qt.test(t))return ut.filter(t,e,n);t=ut.filter(t,e)}return ut.grep(e,function(e){return ut.inArray(e,t)>=0!==n})}function p(e){var t=$t.split("|"),n=e.createDocumentFragment();if(n.createElement)for(;t.length;)n.createElement(t.pop());return n}function f(e,t){return ut.nodeName(e,"table")&&ut.nodeName(1===t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function m(e){return e.type=(null!==ut.find.attr(e,"type"))+"/"+e.type,e}function g(e){var t=on.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function y(e,t){for(var n,r=0;null!=(n=e[r]);r++)ut._data(n,"globalEval",!t||ut._data(t[r],"globalEval"))}function _(e,t){if(1===t.nodeType&&ut.hasData(e)){var n,r,i,o=ut._data(e),s=ut._data(t,o),a=o.events;if(a){delete s.handle,s.events={};for(n in a)for(r=0,i=a[n].length;i>r;r++)ut.event.add(t,n,a[n][r])}s.data&&(s.data=ut.extend({},s.data))}}function v(e,t){var n,r,i;if(1===t.nodeType){if(n=t.nodeName.toLowerCase(),!ut.support.noCloneEvent&&t[ut.expando]){i=ut._data(t);for(r in i.events)ut.removeEvent(t,r,i.handle);t.removeAttribute(ut.expando)}"script"===n&&t.text!==e.text?(m(t).text=e.text,g(t)):"object"===n?(t.parentNode&&(t.outerHTML=e.outerHTML),ut.support.html5Clone&&e.innerHTML&&!ut.trim(t.innerHTML)&&(t.innerHTML=e.innerHTML)):"input"===n&&tn.test(e.type)?(t.defaultChecked=t.checked=e.checked,t.value!==e.value&&(t.value=e.value)):"option"===n?t.defaultSelected=t.selected=e.defaultSelected:("input"===n||"textarea"===n)&&(t.defaultValue=e.defaultValue)}}function b(e,n){var r,i,o=0,s=typeof e.getElementsByTagName!==z?e.getElementsByTagName(n||"*"):typeof e.querySelectorAll!==z?e.querySelectorAll(n||"*"):t;if(!s)for(s=[],r=e.childNodes||e;null!=(i=r[o]);o++)!n||ut.nodeName(i,n)?s.push(i):ut.merge(s,b(i,n));return n===t||n&&ut.nodeName(e,n)?ut.merge([e],s):s}function C(e){tn.test(e.type)&&(e.defaultChecked=e.checked)}function T(e,t){if(t in e)return t;for(var n=t.charAt(0).toUpperCase()+t.slice(1),r=t,i=Sn.length;i--;)if(t=Sn[i]+n,t in e)return t;return r}function w(e,t){return e=t||e,"none"===ut.css(e,"display")||!ut.contains(e.ownerDocument,e)}function E(e,t){for(var n,r,i,o=[],s=0,a=e.length;a>s;s++)r=e[s],r.style&&(o[s]=ut._data(r,"olddisplay"),n=r.style.display,t?(o[s]||"none"!==n||(r.style.display=""),""===r.style.display&&w(r)&&(o[s]=ut._data(r,"olddisplay",M(r.nodeName)))):o[s]||(i=w(r),(n&&"none"!==n||!i)&&ut._data(r,"olddisplay",i?n:ut.css(r,"display"))));for(s=0;a>s;s++)r=e[s],r.style&&(t&&"none"!==r.style.display&&""!==r.style.display||(r.style.display=t?o[s]||"":"none"));return e}function S(e,t,n){var r=_n.exec(t);return r?Math.max(0,r[1]-(n||0))+(r[2]||"px"):t}function x(e,t,n,r,i){for(var o=n===(r?"border":"content")?4:"width"===t?1:0,s=0;4>o;o+=2)"margin"===n&&(s+=ut.css(e,n+En[o],!0,i)),r?("content"===n&&(s-=ut.css(e,"padding"+En[o],!0,i)),"margin"!==n&&(s-=ut.css(e,"border"+En[o]+"Width",!0,i))):(s+=ut.css(e,"padding"+En[o],!0,i),"padding"!==n&&(s+=ut.css(e,"border"+En[o]+"Width",!0,i)));return s}function N(e,t,n){var r=!0,i="width"===t?e.offsetWidth:e.offsetHeight,o=dn(e),s=ut.support.boxSizing&&"border-box"===ut.css(e,"boxSizing",!1,o);if(0>=i||null==i){if(i=hn(e,t,o),(0>i||null==i)&&(i=e.style[t]),vn.test(i))return i;r=s&&(ut.support.boxSizingReliable||i===e.style[t]),i=parseFloat(i)||0}return i+x(e,t,n||(s?"border":"content"),r,o)+"px"}function M(e){var t=G,n=Cn[e];return n||(n=W(e,t),"none"!==n&&n||(un=(un||ut("<iframe frameborder='0' width='0' height='0'/>").css("cssText","display:block !important")).appendTo(t.documentElement),t=(un[0].contentWindow||un[0].contentDocument).document,t.write("<!doctype html><html><body>"),t.close(),n=W(e,t),un.detach()),Cn[e]=n),n}function W(e,t){var n=ut(t.createElement(e)).appendTo(t.body),r=ut.css(n[0],"display");return n.remove(),r}function R(e,t,n,r){var i;if(ut.isArray(t))ut.each(t,function(t,i){n||Nn.test(e)?r(e,i):R(e+"["+("object"==typeof i?t:"")+"]",i,n,r)});else if(n||"object"!==ut.type(t))r(e,t);else for(i in t)R(e+"["+i+"]",t[i],n,r)}function L(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var r,i=0,o=t.toLowerCase().match(ht)||[];if(ut.isFunction(n))for(;r=o[i++];)"+"===r[0]?(r=r.slice(1)||"*",(e[r]=e[r]||[]).unshift(n)):(e[r]=e[r]||[]).push(n)}}function A(e,t,n,r){function i(a){var l;return o[a]=!0,ut.each(e[a]||[],function(e,a){var c=a(t,n,r);return"string"!=typeof c||s||o[c]?s?!(l=c):void 0:(t.dataTypes.unshift(c),i(c),!1)}),l}var o={},s=e===qn;return i(t.dataTypes[0])||!o["*"]&&i("*")}function Y(e,n){var r,i,o=ut.ajaxSettings.flatOptions||{};for(i in n)n[i]!==t&&((o[i]?e:r||(r={}))[i]=n[i]);return r&&ut.extend(!0,e,r),e}function I(e,n,r){for(var i,o,s,a,l=e.contents,c=e.dataTypes;"*"===c[0];)c.shift(),o===t&&(o=e.mimeType||n.getResponseHeader("Content-Type"));if(o)for(a in l)if(l[a]&&l[a].test(o)){c.unshift(a);break}if(c[0]in r)s=c[0];else{for(a in r){if(!c[0]||e.converters[a+" "+c[0]]){s=a;break}i||(i=a)}s=s||i}return s?(s!==c[0]&&c.unshift(s),r[s]):void 0}function O(e,t,n,r){var i,o,s,a,l,c={},u=e.dataTypes.slice();if(u[1])for(s in e.converters)c[s.toLowerCase()]=e.converters[s];for(o=u.shift();o;)if(e.responseFields[o]&&(n[e.responseFields[o]]=t),!l&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=o,o=u.shift())if("*"===o)o=l;else if("*"!==l&&l!==o){if(s=c[l+" "+o]||c["* "+o],!s)for(i in c)if(a=i.split(" "),a[1]===o&&(s=c[l+" "+a[0]]||c["* "+a[0]])){s===!0?s=c[i]:c[i]!==!0&&(o=a[0],u.unshift(a[1]));break}if(s!==!0)if(s&&e["throws"])t=s(t);else try{t=s(t)}catch(d){return{state:"parsererror",error:s?d:"No conversion from "+l+" to "+o}}}return{state:"success",data:t}}function k(){try{return new e.XMLHttpRequest}catch(t){}}function D(){try{return new e.ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}function j(){return setTimeout(function(){Zn=t}),Zn=ut.now()}function P(e,t,n){for(var r,i=(or[t]||[]).concat(or["*"]),o=0,s=i.length;s>o;o++)if(r=i[o].call(n,t,e))return r}function H(e,t,n){var r,i,o=0,s=ir.length,a=ut.Deferred().always(function(){delete l.elem}),l=function(){if(i)return!1;for(var t=Zn||j(),n=Math.max(0,c.startTime+c.duration-t),r=n/c.duration||0,o=1-r,s=0,l=c.tweens.length;l>s;s++)c.tweens[s].run(o);return a.notifyWith(e,[c,o,n]),1>o&&l?n:(a.resolveWith(e,[c]),!1)},c=a.promise({elem:e,props:ut.extend({},t),opts:ut.extend(!0,{specialEasing:{}},n),originalProperties:t,originalOptions:n,startTime:Zn||j(),duration:n.duration,tweens:[],createTween:function(t,n){var r=ut.Tween(e,c.opts,t,n,c.opts.specialEasing[t]||c.opts.easing);return c.tweens.push(r),r},stop:function(t){var n=0,r=t?c.tweens.length:0;if(i)return this;for(i=!0;r>n;n++)c.tweens[n].run(1);return t?a.resolveWith(e,[c,t]):a.rejectWith(e,[c,t]),this}}),u=c.props;for(B(u,c.opts.specialEasing);s>o;o++)if(r=ir[o].call(c,e,u,c.opts))return r;return ut.map(u,P,c),ut.isFunction(c.opts.start)&&c.opts.start.call(e,c),ut.fx.timer(ut.extend(l,{elem:e,anim:c,queue:c.opts.queue})),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always)}function B(e,t){var n,r,i,o,s;for(n in e)if(r=ut.camelCase(n),i=t[r],o=e[n],ut.isArray(o)&&(i=o[1],o=e[n]=o[0]),n!==r&&(e[r]=o,delete e[n]),s=ut.cssHooks[r],s&&"expand"in s){o=s.expand(o),delete e[r];for(n in o)n in e||(e[n]=o[n],t[n]=i)}else t[r]=i}function Q(e,t,n){var r,i,o,s,a,l,c=this,u={},d=e.style,h=e.nodeType&&w(e),p=ut._data(e,"fxshow");n.queue||(a=ut._queueHooks(e,"fx"),null==a.unqueued&&(a.unqueued=0,l=a.empty.fire,a.empty.fire=function(){a.unqueued||l()}),a.unqueued++,c.always(function(){c.always(function(){a.unqueued--,ut.queue(e,"fx").length||a.empty.fire()})})),1===e.nodeType&&("height"in t||"width"in t)&&(n.overflow=[d.overflow,d.overflowX,d.overflowY],"inline"===ut.css(e,"display")&&"none"===ut.css(e,"float")&&(ut.support.inlineBlockNeedsLayout&&"inline"!==M(e.nodeName)?d.zoom=1:d.display="inline-block")),n.overflow&&(d.overflow="hidden",ut.support.shrinkWrapBlocks||c.always(function(){d.overflow=n.overflow[0],d.overflowX=n.overflow[1],d.overflowY=n.overflow[2]}));for(r in t)if(i=t[r],tr.exec(i)){if(delete t[r],o=o||"toggle"===i,i===(h?"hide":"show"))continue;u[r]=p&&p[r]||ut.style(e,r)}if(!ut.isEmptyObject(u)){p?"hidden"in p&&(h=p.hidden):p=ut._data(e,"fxshow",{}),o&&(p.hidden=!h),h?ut(e).show():c.done(function(){ut(e).hide()}),c.done(function(){var t;ut._removeData(e,"fxshow");for(t in u)ut.style(e,t,u[t])});for(r in u)s=P(h?p[r]:0,r,c),r in p||(p[r]=s.start,h&&(s.end=s.start,s.start="width"===r||"height"===r?1:0))}}function F(e,t,n,r,i){return new F.prototype.init(e,t,n,r,i)}function q(e,t){var n,r={height:e},i=0;for(t=t?1:0;4>i;i+=2-t)n=En[i],r["margin"+n]=r["padding"+n]=e;return t&&(r.opacity=r.width=e),r}function X(e){return ut.isWindow(e)?e:9===e.nodeType?e.defaultView||e.parentWindow:!1}var $,U,z=typeof t,K=e.location,G=e.document,V=G.documentElement,J=e.jQuery,Z=e.$,et={},tt=[],nt="1.10.2",rt=tt.concat,it=tt.push,ot=tt.slice,st=tt.indexOf,at=et.toString,lt=et.hasOwnProperty,ct=nt.trim,ut=function(e,t){return new ut.fn.init(e,t,U)},dt=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,ht=/\S+/g,pt=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,ft=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,mt=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,gt=/^[\],:{}\s]*$/,yt=/(?:^|:|,)(?:\s*\[)+/g,_t=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,vt=/"[^"\\\r\n]*"|true|false|null|-?(?:\d+\.|)\d+(?:[eE][+-]?\d+|)/g,bt=/^-ms-/,Ct=/-([\da-z])/gi,Tt=function(e,t){return t.toUpperCase()},wt=function(e){(G.addEventListener||"load"===e.type||"complete"===G.readyState)&&(Et(),ut.ready())},Et=function(){G.addEventListener?(G.removeEventListener("DOMContentLoaded",wt,!1),e.removeEventListener("load",wt,!1)):(G.detachEvent("onreadystatechange",wt),e.detachEvent("onload",wt))};ut.fn=ut.prototype={jquery:nt,constructor:ut,init:function(e,n,r){var i,o;if(!e)return this;if("string"==typeof e){if(i="<"===e.charAt(0)&&">"===e.charAt(e.length-1)&&e.length>=3?[null,e,null]:ft.exec(e),!i||!i[1]&&n)return!n||n.jquery?(n||r).find(e):this.constructor(n).find(e);if(i[1]){if(n=n instanceof ut?n[0]:n,ut.merge(this,ut.parseHTML(i[1],n&&n.nodeType?n.ownerDocument||n:G,!0)),mt.test(i[1])&&ut.isPlainObject(n))for(i in n)ut.isFunction(this[i])?this[i](n[i]):this.attr(i,n[i]);return this}if(o=G.getElementById(i[2]),o&&o.parentNode){if(o.id!==i[2])return r.find(e);this.length=1,this[0]=o}return this.context=G,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):ut.isFunction(e)?r.ready(e):(e.selector!==t&&(this.selector=e.selector,this.context=e.context),ut.makeArray(e,this))},selector:"",length:0,toArray:function(){return ot.call(this)},get:function(e){return null==e?this.toArray():0>e?this[this.length+e]:this[e]},pushStack:function(e){var t=ut.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e,t){return ut.each(this,e,t)},ready:function(e){return ut.ready.promise().done(e),this},slice:function(){return this.pushStack(ot.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(0>e?t:0);return this.pushStack(n>=0&&t>n?[this[n]]:[])},map:function(e){return this.pushStack(ut.map(this,function(t,n){return e.call(t,n,t)}))},end:function(){return this.prevObject||this.constructor(null)},push:it,sort:[].sort,splice:[].splice},ut.fn.init.prototype=ut.fn,ut.extend=ut.fn.extend=function(){var e,n,r,i,o,s,a=arguments[0]||{},l=1,c=arguments.length,u=!1;for("boolean"==typeof a&&(u=a,a=arguments[1]||{},l=2),"object"==typeof a||ut.isFunction(a)||(a={}),c===l&&(a=this,--l);c>l;l++)if(null!=(o=arguments[l]))for(i in o)e=a[i],r=o[i],a!==r&&(u&&r&&(ut.isPlainObject(r)||(n=ut.isArray(r)))?(n?(n=!1,s=e&&ut.isArray(e)?e:[]):s=e&&ut.isPlainObject(e)?e:{},a[i]=ut.extend(u,s,r)):r!==t&&(a[i]=r));return a},ut.extend({expando:"jQuery"+(nt+Math.random()).replace(/\D/g,""),noConflict:function(t){return e.$===ut&&(e.$=Z),t&&e.jQuery===ut&&(e.jQuery=J),ut},isReady:!1,readyWait:1,holdReady:function(e){e?ut.readyWait++:ut.ready(!0)},ready:function(e){if(e===!0?!--ut.readyWait:!ut.isReady){if(!G.body)return setTimeout(ut.ready);ut.isReady=!0,e!==!0&&--ut.readyWait>0||($.resolveWith(G,[ut]),ut.fn.trigger&&ut(G).trigger("ready").off("ready"))}},isFunction:function(e){return"function"===ut.type(e)},isArray:Array.isArray||function(e){return"array"===ut.type(e)},isWindow:function(e){return null!=e&&e==e.window},isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},type:function(e){return null==e?String(e):"object"==typeof e||"function"==typeof e?et[at.call(e)]||"object":typeof e},isPlainObject:function(e){var n;if(!e||"object"!==ut.type(e)||e.nodeType||ut.isWindow(e))return!1;try{if(e.constructor&&!lt.call(e,"constructor")&&!lt.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(r){return!1}if(ut.support.ownLast)for(n in e)return lt.call(e,n);for(n in e);return n===t||lt.call(e,n)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},error:function(e){throw new Error(e)},parseHTML:function(e,t,n){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(n=t,t=!1),t=t||G;var r=mt.exec(e),i=!n&&[];return r?[t.createElement(r[1])]:(r=ut.buildFragment([e],t,i),i&&ut(i).remove(),ut.merge([],r.childNodes))},parseJSON:function(t){return e.JSON&&e.JSON.parse?e.JSON.parse(t):null===t?t:"string"==typeof t&&(t=ut.trim(t),t&&gt.test(t.replace(_t,"@").replace(vt,"]").replace(yt,"")))?new Function("return "+t)():(ut.error("Invalid JSON: "+t),void 0)},parseXML:function(n){var r,i;if(!n||"string"!=typeof n)return null;try{e.DOMParser?(i=new DOMParser,r=i.parseFromString(n,"text/xml")):(r=new ActiveXObject("Microsoft.XMLDOM"),r.async="false",r.loadXML(n))}catch(o){r=t}return r&&r.documentElement&&!r.getElementsByTagName("parsererror").length||ut.error("Invalid XML: "+n),r},noop:function(){},globalEval:function(t){t&&ut.trim(t)&&(e.execScript||function(t){e.eval.call(e,t)})(t)},camelCase:function(e){return e.replace(bt,"ms-").replace(Ct,Tt)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t,r){var i,o=0,s=e.length,a=n(e);if(r){if(a)for(;s>o&&(i=t.apply(e[o],r),i!==!1);o++);else for(o in e)if(i=t.apply(e[o],r),i===!1)break}else if(a)for(;s>o&&(i=t.call(e[o],o,e[o]),i!==!1);o++);else for(o in e)if(i=t.call(e[o],o,e[o]),i===!1)break;return e},trim:ct&&!ct.call("﻿ ")?function(e){return null==e?"":ct.call(e)}:function(e){return null==e?"":(e+"").replace(pt,"")},makeArray:function(e,t){var r=t||[];return null!=e&&(n(Object(e))?ut.merge(r,"string"==typeof e?[e]:e):it.call(r,e)),r},inArray:function(e,t,n){var r;if(t){if(st)return st.call(t,e,n);for(r=t.length,n=n?0>n?Math.max(0,r+n):n:0;r>n;n++)if(n in t&&t[n]===e)return n}return-1},merge:function(e,n){var r=n.length,i=e.length,o=0;if("number"==typeof r)for(;r>o;o++)e[i++]=n[o];else for(;n[o]!==t;)e[i++]=n[o++];return e.length=i,e},grep:function(e,t,n){var r,i=[],o=0,s=e.length;for(n=!!n;s>o;o++)r=!!t(e[o],o),n!==r&&i.push(e[o]);return i},map:function(e,t,r){var i,o=0,s=e.length,a=n(e),l=[];if(a)for(;s>o;o++)i=t(e[o],o,r),null!=i&&(l[l.length]=i);else for(o in e)i=t(e[o],o,r),null!=i&&(l[l.length]=i);return rt.apply([],l)},guid:1,proxy:function(e,n){var r,i,o;return"string"==typeof n&&(o=e[n],n=e,e=o),ut.isFunction(e)?(r=ot.call(arguments,2),i=function(){return e.apply(n||this,r.concat(ot.call(arguments)))},i.guid=e.guid=e.guid||ut.guid++,i):t},access:function(e,n,r,i,o,s,a){var l=0,c=e.length,u=null==r;if("object"===ut.type(r)){o=!0;for(l in r)ut.access(e,n,l,r[l],!0,s,a)}else if(i!==t&&(o=!0,ut.isFunction(i)||(a=!0),u&&(a?(n.call(e,i),n=null):(u=n,n=function(e,t,n){return u.call(ut(e),n)})),n))for(;c>l;l++)n(e[l],r,a?i:i.call(e[l],l,n(e[l],r)));return o?e:u?n.call(e):c?n(e[0],r):s},now:function(){return(new Date).getTime()},swap:function(e,t,n,r){var i,o,s={};for(o in t)s[o]=e.style[o],e.style[o]=t[o];i=n.apply(e,r||[]);for(o in t)e.style[o]=s[o];return i}}),ut.ready.promise=function(t){if(!$)if($=ut.Deferred(),"complete"===G.readyState)setTimeout(ut.ready);else if(G.addEventListener)G.addEventListener("DOMContentLoaded",wt,!1),e.addEventListener("load",wt,!1);else{G.attachEvent("onreadystatechange",wt),e.attachEvent("onload",wt);var n=!1;try{n=null==e.frameElement&&G.documentElement}catch(r){}n&&n.doScroll&&!function i(){if(!ut.isReady){try{n.doScroll("left")}catch(e){return setTimeout(i,50)}Et(),ut.ready()}}()}return $.promise(t)},ut.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){et["[object "+t+"]"]=t.toLowerCase()}),U=ut(G),function(e,t){function n(e,t,n,r){var i,o,s,a,l,c,u,d,f,m;if((t?t.ownerDocument||t:H)!==A&&L(t),t=t||A,n=n||[],!e||"string"!=typeof e)return n;if(1!==(a=t.nodeType)&&9!==a)return[];if(I&&!r){if(i=vt.exec(e))if(s=i[1]){if(9===a){if(o=t.getElementById(s),!o||!o.parentNode)return n;if(o.id===s)return n.push(o),n}else if(t.ownerDocument&&(o=t.ownerDocument.getElementById(s))&&j(t,o)&&o.id===s)return n.push(o),n}else{if(i[2])return et.apply(n,t.getElementsByTagName(e)),n;if((s=i[3])&&w.getElementsByClassName&&t.getElementsByClassName)return et.apply(n,t.getElementsByClassName(s)),n}if(w.qsa&&(!O||!O.test(e))){if(d=u=P,f=t,m=9===a&&e,1===a&&"object"!==t.nodeName.toLowerCase()){for(c=h(e),(u=t.getAttribute("id"))?d=u.replace(Tt,"\\$&"):t.setAttribute("id",d),d="[id='"+d+"'] ",l=c.length;l--;)c[l]=d+p(c[l]);f=pt.test(e)&&t.parentNode||t,m=c.join(",")}if(m)try{return et.apply(n,f.querySelectorAll(m)),n}catch(g){}finally{u||t.removeAttribute("id")}}}return C(e.replace(ct,"$1"),t,n,r)}function r(){function e(n,r){return t.push(n+=" ")>S.cacheLength&&delete e[t.shift()],e[n]=r}var t=[];return e}function i(e){return e[P]=!0,e}function o(e){var t=A.createElement("div");try{return!!e(t)}catch(n){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function s(e,t){for(var n=e.split("|"),r=e.length;r--;)S.attrHandle[n[r]]=t}function a(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||K)-(~e.sourceIndex||K);if(r)return r;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function l(e){return function(t){var n=t.nodeName.toLowerCase();return"input"===n&&t.type===e}}function c(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function u(e){return i(function(t){return t=+t,i(function(n,r){for(var i,o=e([],n.length,t),s=o.length;s--;)n[i=o[s]]&&(n[i]=!(r[i]=n[i]))})})}function d(){}function h(e,t){var r,i,o,s,a,l,c,u=q[e+" "];if(u)return t?0:u.slice(0);for(a=e,l=[],c=S.preFilter;a;){(!r||(i=dt.exec(a)))&&(i&&(a=a.slice(i[0].length)||a),l.push(o=[])),r=!1,(i=ht.exec(a))&&(r=i.shift(),o.push({value:r,type:i[0].replace(ct," ")}),a=a.slice(r.length));for(s in S.filter)!(i=yt[s].exec(a))||c[s]&&!(i=c[s](i))||(r=i.shift(),o.push({value:r,type:s,matches:i}),a=a.slice(r.length));if(!r)break}return t?a.length:a?n.error(e):q(e,l).slice(0)}function p(e){for(var t=0,n=e.length,r="";n>t;t++)r+=e[t].value;return r}function f(e,t,n){var r=t.dir,i=n&&"parentNode"===r,o=Q++;return t.first?function(t,n,o){for(;t=t[r];)if(1===t.nodeType||i)return e(t,n,o)}:function(t,n,s){var a,l,c,u=B+" "+o;if(s){for(;t=t[r];)if((1===t.nodeType||i)&&e(t,n,s))return!0}else for(;t=t[r];)if(1===t.nodeType||i)if(c=t[P]||(t[P]={}),(l=c[r])&&l[0]===u){if((a=l[1])===!0||a===E)return a===!0}else if(l=c[r]=[u],l[1]=e(t,n,s)||E,l[1]===!0)return!0}}function m(e){return e.length>1?function(t,n,r){for(var i=e.length;i--;)if(!e[i](t,n,r))return!1;return!0}:e[0]}function g(e,t,n,r,i){for(var o,s=[],a=0,l=e.length,c=null!=t;l>a;a++)(o=e[a])&&(!n||n(o,r,i))&&(s.push(o),c&&t.push(a));return s}function y(e,t,n,r,o,s){return r&&!r[P]&&(r=y(r)),o&&!o[P]&&(o=y(o,s)),i(function(i,s,a,l){var c,u,d,h=[],p=[],f=s.length,m=i||b(t||"*",a.nodeType?[a]:a,[]),y=!e||!i&&t?m:g(m,h,e,a,l),_=n?o||(i?e:f||r)?[]:s:y;if(n&&n(y,_,a,l),r)for(c=g(_,p),r(c,[],a,l),u=c.length;u--;)(d=c[u])&&(_[p[u]]=!(y[p[u]]=d));if(i){if(o||e){if(o){for(c=[],u=_.length;u--;)(d=_[u])&&c.push(y[u]=d);o(null,_=[],c,l)}for(u=_.length;u--;)(d=_[u])&&(c=o?nt.call(i,d):h[u])>-1&&(i[c]=!(s[c]=d))}}else _=g(_===s?_.splice(f,_.length):_),o?o(null,s,_,l):et.apply(s,_)})}function _(e){for(var t,n,r,i=e.length,o=S.relative[e[0].type],s=o||S.relative[" "],a=o?1:0,l=f(function(e){return e===t},s,!0),c=f(function(e){return nt.call(t,e)>-1},s,!0),u=[function(e,n,r){return!o&&(r||n!==W)||((t=n).nodeType?l(e,n,r):c(e,n,r))}];i>a;a++)if(n=S.relative[e[a].type])u=[f(m(u),n)];else{if(n=S.filter[e[a].type].apply(null,e[a].matches),n[P]){for(r=++a;i>r&&!S.relative[e[r].type];r++);return y(a>1&&m(u),a>1&&p(e.slice(0,a-1).concat({value:" "===e[a-2].type?"*":""})).replace(ct,"$1"),n,r>a&&_(e.slice(a,r)),i>r&&_(e=e.slice(r)),i>r&&p(e))}u.push(n)}return m(u)}function v(e,t){var r=0,o=t.length>0,s=e.length>0,a=function(i,a,l,c,u){var d,h,p,f=[],m=0,y="0",_=i&&[],v=null!=u,b=W,C=i||s&&S.find.TAG("*",u&&a.parentNode||a),T=B+=null==b?1:Math.random()||.1;for(v&&(W=a!==A&&a,E=r);null!=(d=C[y]);y++){if(s&&d){for(h=0;p=e[h++];)if(p(d,a,l)){c.push(d);break}v&&(B=T,E=++r)}o&&((d=!p&&d)&&m--,i&&_.push(d))}if(m+=y,o&&y!==m){for(h=0;p=t[h++];)p(_,f,a,l);if(i){if(m>0)for(;y--;)_[y]||f[y]||(f[y]=J.call(c));f=g(f)}et.apply(c,f),v&&!i&&f.length>0&&m+t.length>1&&n.uniqueSort(c)}return v&&(B=T,W=b),_};return o?i(a):a}function b(e,t,r){for(var i=0,o=t.length;o>i;i++)n(e,t[i],r);return r}function C(e,t,n,r){var i,o,s,a,l,c=h(e);if(!r&&1===c.length){if(o=c[0]=c[0].slice(0),o.length>2&&"ID"===(s=o[0]).type&&w.getById&&9===t.nodeType&&I&&S.relative[o[1].type]){if(t=(S.find.ID(s.matches[0].replace(wt,Et),t)||[])[0],!t)return n;e=e.slice(o.shift().value.length)}for(i=yt.needsContext.test(e)?0:o.length;i--&&(s=o[i],!S.relative[a=s.type]);)if((l=S.find[a])&&(r=l(s.matches[0].replace(wt,Et),pt.test(o[0].type)&&t.parentNode||t))){if(o.splice(i,1),e=r.length&&p(o),!e)return et.apply(n,r),n;break}}return M(e,c)(r,t,!I,n,pt.test(e)),n}var T,w,E,S,x,N,M,W,R,L,A,Y,I,O,k,D,j,P="sizzle"+-new Date,H=e.document,B=0,Q=0,F=r(),q=r(),X=r(),$=!1,U=function(e,t){return e===t?($=!0,0):0},z=typeof t,K=1<<31,G={}.hasOwnProperty,V=[],J=V.pop,Z=V.push,et=V.push,tt=V.slice,nt=V.indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(this[t]===e)return t;return-1},rt="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",it="[\\x20\\t\\r\\n\\f]",ot="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",st=ot.replace("w","w#"),at="\\["+it+"*("+ot+")"+it+"*(?:([*^$|!~]?=)"+it+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+st+")|)|)"+it+"*\\]",lt=":("+ot+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+at.replace(3,8)+")*)|.*)\\)|)",ct=new RegExp("^"+it+"+|((?:^|[^\\\\])(?:\\\\.)*)"+it+"+$","g"),dt=new RegExp("^"+it+"*,"+it+"*"),ht=new RegExp("^"+it+"*([>+~]|"+it+")"+it+"*"),pt=new RegExp(it+"*[+~]"),ft=new RegExp("="+it+"*([^\\]'\"]*)"+it+"*\\]","g"),mt=new RegExp(lt),gt=new RegExp("^"+st+"$"),yt={ID:new RegExp("^#("+ot+")"),CLASS:new RegExp("^\\.("+ot+")"),TAG:new RegExp("^("+ot.replace("w","w*")+")"),ATTR:new RegExp("^"+at),PSEUDO:new RegExp("^"+lt),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+it+"*(even|odd|(([+-]|)(\\d*)n|)"+it+"*(?:([+-]|)"+it+"*(\\d+)|))"+it+"*\\)|)","i"),bool:new RegExp("^(?:"+rt+")$","i"),needsContext:new RegExp("^"+it+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+it+"*((?:-\\d)?\\d*)"+it+"*\\)|)(?=[^-]|$)","i")},_t=/^[^{]+\{\s*\[native \w/,vt=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,bt=/^(?:input|select|textarea|button)$/i,Ct=/^h\d$/i,Tt=/'|\\/g,wt=new RegExp("\\\\([\\da-f]{1,6}"+it+"?|("+it+")|.)","ig"),Et=function(e,t,n){var r="0x"+t-65536;return r!==r||n?t:0>r?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,1023&r|56320)};try{et.apply(V=tt.call(H.childNodes),H.childNodes),V[H.childNodes.length].nodeType}catch(St){et={apply:V.length?function(e,t){Z.apply(e,tt.call(t))}:function(e,t){for(var n=e.length,r=0;e[n++]=t[r++];);e.length=n-1}}}N=n.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?"HTML"!==t.nodeName:!1},w=n.support={},L=n.setDocument=function(e){var t=e?e.ownerDocument||e:H,n=t.defaultView;return t!==A&&9===t.nodeType&&t.documentElement?(A=t,Y=t.documentElement,I=!N(t),n&&n.attachEvent&&n!==n.top&&n.attachEvent("onbeforeunload",function(){L()}),w.attributes=o(function(e){return e.className="i",!e.getAttribute("className")}),w.getElementsByTagName=o(function(e){return e.appendChild(t.createComment("")),!e.getElementsByTagName("*").length}),w.getElementsByClassName=o(function(e){return e.innerHTML="<div class='a'></div><div class='a i'></div>",e.firstChild.className="i",2===e.getElementsByClassName("i").length}),w.getById=o(function(e){return Y.appendChild(e).id=P,!t.getElementsByName||!t.getElementsByName(P).length}),w.getById?(S.find.ID=function(e,t){if(typeof t.getElementById!==z&&I){var n=t.getElementById(e);return n&&n.parentNode?[n]:[]}},S.filter.ID=function(e){var t=e.replace(wt,Et);return function(e){return e.getAttribute("id")===t}}):(delete S.find.ID,S.filter.ID=function(e){var t=e.replace(wt,Et);return function(e){var n=typeof e.getAttributeNode!==z&&e.getAttributeNode("id");return n&&n.value===t}}),S.find.TAG=w.getElementsByTagName?function(e,t){return typeof t.getElementsByTagName!==z?t.getElementsByTagName(e):void 0}:function(e,t){var n,r=[],i=0,o=t.getElementsByTagName(e);if("*"===e){for(;n=o[i++];)1===n.nodeType&&r.push(n);return r}return o},S.find.CLASS=w.getElementsByClassName&&function(e,t){return typeof t.getElementsByClassName!==z&&I?t.getElementsByClassName(e):void 0},k=[],O=[],(w.qsa=_t.test(t.querySelectorAll))&&(o(function(e){e.innerHTML="<select><option selected=''></option></select>",e.querySelectorAll("[selected]").length||O.push("\\["+it+"*(?:value|"+rt+")"),e.querySelectorAll(":checked").length||O.push(":checked")}),o(function(e){var n=t.createElement("input");n.setAttribute("type","hidden"),e.appendChild(n).setAttribute("t",""),e.querySelectorAll("[t^='']").length&&O.push("[*^$]="+it+"*(?:''|\"\")"),e.querySelectorAll(":enabled").length||O.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),O.push(",.*:")})),(w.matchesSelector=_t.test(D=Y.webkitMatchesSelector||Y.mozMatchesSelector||Y.oMatchesSelector||Y.msMatchesSelector))&&o(function(e){w.disconnectedMatch=D.call(e,"div"),D.call(e,"[s!='']:x"),k.push("!=",lt)}),O=O.length&&new RegExp(O.join("|")),k=k.length&&new RegExp(k.join("|")),j=_t.test(Y.contains)||Y.compareDocumentPosition?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},U=Y.compareDocumentPosition?function(e,n){if(e===n)return $=!0,0;var r=n.compareDocumentPosition&&e.compareDocumentPosition&&e.compareDocumentPosition(n);return r?1&r||!w.sortDetached&&n.compareDocumentPosition(e)===r?e===t||j(H,e)?-1:n===t||j(H,n)?1:R?nt.call(R,e)-nt.call(R,n):0:4&r?-1:1:e.compareDocumentPosition?-1:1}:function(e,n){var r,i=0,o=e.parentNode,s=n.parentNode,l=[e],c=[n];if(e===n)return $=!0,0;if(!o||!s)return e===t?-1:n===t?1:o?-1:s?1:R?nt.call(R,e)-nt.call(R,n):0;if(o===s)return a(e,n);for(r=e;r=r.parentNode;)l.unshift(r);for(r=n;r=r.parentNode;)c.unshift(r);for(;l[i]===c[i];)i++;return i?a(l[i],c[i]):l[i]===H?-1:c[i]===H?1:0},t):A},n.matches=function(e,t){return n(e,null,null,t)},n.matchesSelector=function(e,t){if((e.ownerDocument||e)!==A&&L(e),t=t.replace(ft,"='$1']"),!(!w.matchesSelector||!I||k&&k.test(t)||O&&O.test(t)))try{var r=D.call(e,t);if(r||w.disconnectedMatch||e.document&&11!==e.document.nodeType)return r}catch(i){}return n(t,A,null,[e]).length>0},n.contains=function(e,t){return(e.ownerDocument||e)!==A&&L(e),j(e,t)},n.attr=function(e,n){(e.ownerDocument||e)!==A&&L(e);var r=S.attrHandle[n.toLowerCase()],i=r&&G.call(S.attrHandle,n.toLowerCase())?r(e,n,!I):t;return i===t?w.attributes||!I?e.getAttribute(n):(i=e.getAttributeNode(n))&&i.specified?i.value:null:i},n.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},n.uniqueSort=function(e){var t,n=[],r=0,i=0;if($=!w.detectDuplicates,R=!w.sortStable&&e.slice(0),e.sort(U),$){for(;t=e[i++];)t===e[i]&&(r=n.push(i));for(;r--;)e.splice(n[r],1)}return e},x=n.getText=function(e){var t,n="",r=0,i=e.nodeType;if(i){if(1===i||9===i||11===i){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=x(e)}else if(3===i||4===i)return e.nodeValue}else for(;t=e[r];r++)n+=x(t);return n},S=n.selectors={cacheLength:50,createPseudo:i,match:yt,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(wt,Et),e[3]=(e[4]||e[5]||"").replace(wt,Et),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||n.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&n.error(e[0]),e},PSEUDO:function(e){var n,r=!e[5]&&e[2];return yt.CHILD.test(e[0])?null:(e[3]&&e[4]!==t?e[2]=e[4]:r&&mt.test(r)&&(n=h(r,!0))&&(n=r.indexOf(")",r.length-n)-r.length)&&(e[0]=e[0].slice(0,n),e[2]=r.slice(0,n)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(wt,Et).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=F[e+" "];return t||(t=new RegExp("(^|"+it+")"+e+"("+it+"|$)"))&&F(e,function(e){return t.test("string"==typeof e.className&&e.className||typeof e.getAttribute!==z&&e.getAttribute("class")||"")})},ATTR:function(e,t,r){return function(i){var o=n.attr(i,e);return null==o?"!="===t:t?(o+="","="===t?o===r:"!="===t?o!==r:"^="===t?r&&0===o.indexOf(r):"*="===t?r&&o.indexOf(r)>-1:"$="===t?r&&o.slice(-r.length)===r:"~="===t?(" "+o+" ").indexOf(r)>-1:"|="===t?o===r||o.slice(0,r.length+1)===r+"-":!1):!0}},CHILD:function(e,t,n,r,i){var o="nth"!==e.slice(0,3),s="last"!==e.slice(-4),a="of-type"===t;return 1===r&&0===i?function(e){return!!e.parentNode}:function(t,n,l){var c,u,d,h,p,f,m=o!==s?"nextSibling":"previousSibling",g=t.parentNode,y=a&&t.nodeName.toLowerCase(),_=!l&&!a;if(g){if(o){for(;m;){for(d=t;d=d[m];)if(a?d.nodeName.toLowerCase()===y:1===d.nodeType)return!1;f=m="only"===e&&!f&&"nextSibling"}return!0}if(f=[s?g.firstChild:g.lastChild],s&&_){for(u=g[P]||(g[P]={}),c=u[e]||[],p=c[0]===B&&c[1],h=c[0]===B&&c[2],d=p&&g.childNodes[p];d=++p&&d&&d[m]||(h=p=0)||f.pop();)if(1===d.nodeType&&++h&&d===t){u[e]=[B,p,h];break}}else if(_&&(c=(t[P]||(t[P]={}))[e])&&c[0]===B)h=c[1];else for(;(d=++p&&d&&d[m]||(h=p=0)||f.pop())&&((a?d.nodeName.toLowerCase()!==y:1!==d.nodeType)||!++h||(_&&((d[P]||(d[P]={}))[e]=[B,h]),d!==t)););return h-=i,h===r||h%r===0&&h/r>=0
}}},PSEUDO:function(e,t){var r,o=S.pseudos[e]||S.setFilters[e.toLowerCase()]||n.error("unsupported pseudo: "+e);return o[P]?o(t):o.length>1?(r=[e,e,"",t],S.setFilters.hasOwnProperty(e.toLowerCase())?i(function(e,n){for(var r,i=o(e,t),s=i.length;s--;)r=nt.call(e,i[s]),e[r]=!(n[r]=i[s])}):function(e){return o(e,0,r)}):o}},pseudos:{not:i(function(e){var t=[],n=[],r=M(e.replace(ct,"$1"));return r[P]?i(function(e,t,n,i){for(var o,s=r(e,null,i,[]),a=e.length;a--;)(o=s[a])&&(e[a]=!(t[a]=o))}):function(e,i,o){return t[0]=e,r(t,null,o,n),!n.pop()}}),has:i(function(e){return function(t){return n(e,t).length>0}}),contains:i(function(e){return function(t){return(t.textContent||t.innerText||x(t)).indexOf(e)>-1}}),lang:i(function(e){return gt.test(e||"")||n.error("unsupported lang: "+e),e=e.replace(wt,Et).toLowerCase(),function(t){var n;do if(n=I?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return n=n.toLowerCase(),n===e||0===n.indexOf(e+"-");while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===Y},focus:function(e){return e===A.activeElement&&(!A.hasFocus||A.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeName>"@"||3===e.nodeType||4===e.nodeType)return!1;return!0},parent:function(e){return!S.pseudos.empty(e)},header:function(e){return Ct.test(e.nodeName)},input:function(e){return bt.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||t.toLowerCase()===e.type)},first:u(function(){return[0]}),last:u(function(e,t){return[t-1]}),eq:u(function(e,t,n){return[0>n?n+t:n]}),even:u(function(e,t){for(var n=0;t>n;n+=2)e.push(n);return e}),odd:u(function(e,t){for(var n=1;t>n;n+=2)e.push(n);return e}),lt:u(function(e,t,n){for(var r=0>n?n+t:n;--r>=0;)e.push(r);return e}),gt:u(function(e,t,n){for(var r=0>n?n+t:n;++r<t;)e.push(r);return e})}},S.pseudos.nth=S.pseudos.eq;for(T in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})S.pseudos[T]=l(T);for(T in{submit:!0,reset:!0})S.pseudos[T]=c(T);d.prototype=S.filters=S.pseudos,S.setFilters=new d,M=n.compile=function(e,t){var n,r=[],i=[],o=X[e+" "];if(!o){for(t||(t=h(e)),n=t.length;n--;)o=_(t[n]),o[P]?r.push(o):i.push(o);o=X(e,v(i,r))}return o},w.sortStable=P.split("").sort(U).join("")===P,w.detectDuplicates=$,L(),w.sortDetached=o(function(e){return 1&e.compareDocumentPosition(A.createElement("div"))}),o(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||s("type|href|height|width",function(e,t,n){return n?void 0:e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),w.attributes&&o(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||s("value",function(e,t,n){return n||"input"!==e.nodeName.toLowerCase()?void 0:e.defaultValue}),o(function(e){return null==e.getAttribute("disabled")})||s(rt,function(e,t,n){var r;return n?void 0:(r=e.getAttributeNode(t))&&r.specified?r.value:e[t]===!0?t.toLowerCase():null}),ut.find=n,ut.expr=n.selectors,ut.expr[":"]=ut.expr.pseudos,ut.unique=n.uniqueSort,ut.text=n.getText,ut.isXMLDoc=n.isXML,ut.contains=n.contains}(e);var St={};ut.Callbacks=function(e){e="string"==typeof e?St[e]||r(e):ut.extend({},e);var n,i,o,s,a,l,c=[],u=!e.once&&[],d=function(t){for(i=e.memory&&t,o=!0,a=l||0,l=0,s=c.length,n=!0;c&&s>a;a++)if(c[a].apply(t[0],t[1])===!1&&e.stopOnFalse){i=!1;break}n=!1,c&&(u?u.length&&d(u.shift()):i?c=[]:h.disable())},h={add:function(){if(c){var t=c.length;!function r(t){ut.each(t,function(t,n){var i=ut.type(n);"function"===i?e.unique&&h.has(n)||c.push(n):n&&n.length&&"string"!==i&&r(n)})}(arguments),n?s=c.length:i&&(l=t,d(i))}return this},remove:function(){return c&&ut.each(arguments,function(e,t){for(var r;(r=ut.inArray(t,c,r))>-1;)c.splice(r,1),n&&(s>=r&&s--,a>=r&&a--)}),this},has:function(e){return e?ut.inArray(e,c)>-1:!(!c||!c.length)},empty:function(){return c=[],s=0,this},disable:function(){return c=u=i=t,this},disabled:function(){return!c},lock:function(){return u=t,i||h.disable(),this},locked:function(){return!u},fireWith:function(e,t){return!c||o&&!u||(t=t||[],t=[e,t.slice?t.slice():t],n?u.push(t):d(t)),this},fire:function(){return h.fireWith(this,arguments),this},fired:function(){return!!o}};return h},ut.extend({Deferred:function(e){var t=[["resolve","done",ut.Callbacks("once memory"),"resolved"],["reject","fail",ut.Callbacks("once memory"),"rejected"],["notify","progress",ut.Callbacks("memory")]],n="pending",r={state:function(){return n},always:function(){return i.done(arguments).fail(arguments),this},then:function(){var e=arguments;return ut.Deferred(function(n){ut.each(t,function(t,o){var s=o[0],a=ut.isFunction(e[t])&&e[t];i[o[1]](function(){var e=a&&a.apply(this,arguments);e&&ut.isFunction(e.promise)?e.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[s+"With"](this===r?n.promise():this,a?[e]:arguments)})}),e=null}).promise()},promise:function(e){return null!=e?ut.extend(e,r):r}},i={};return r.pipe=r.then,ut.each(t,function(e,o){var s=o[2],a=o[3];r[o[1]]=s.add,a&&s.add(function(){n=a},t[1^e][2].disable,t[2][2].lock),i[o[0]]=function(){return i[o[0]+"With"](this===i?r:this,arguments),this},i[o[0]+"With"]=s.fireWith}),r.promise(i),e&&e.call(i,i),i},when:function(e){var t,n,r,i=0,o=ot.call(arguments),s=o.length,a=1!==s||e&&ut.isFunction(e.promise)?s:0,l=1===a?e:ut.Deferred(),c=function(e,n,r){return function(i){n[e]=this,r[e]=arguments.length>1?ot.call(arguments):i,r===t?l.notifyWith(n,r):--a||l.resolveWith(n,r)}};if(s>1)for(t=new Array(s),n=new Array(s),r=new Array(s);s>i;i++)o[i]&&ut.isFunction(o[i].promise)?o[i].promise().done(c(i,r,o)).fail(l.reject).progress(c(i,n,t)):--a;return a||l.resolveWith(r,o),l.promise()}}),ut.support=function(t){var n,r,i,o,s,a,l,c,u,d=G.createElement("div");if(d.setAttribute("className","t"),d.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",n=d.getElementsByTagName("*")||[],r=d.getElementsByTagName("a")[0],!r||!r.style||!n.length)return t;o=G.createElement("select"),a=o.appendChild(G.createElement("option")),i=d.getElementsByTagName("input")[0],r.style.cssText="top:1px;float:left;opacity:.5",t.getSetAttribute="t"!==d.className,t.leadingWhitespace=3===d.firstChild.nodeType,t.tbody=!d.getElementsByTagName("tbody").length,t.htmlSerialize=!!d.getElementsByTagName("link").length,t.style=/top/.test(r.getAttribute("style")),t.hrefNormalized="/a"===r.getAttribute("href"),t.opacity=/^0.5/.test(r.style.opacity),t.cssFloat=!!r.style.cssFloat,t.checkOn=!!i.value,t.optSelected=a.selected,t.enctype=!!G.createElement("form").enctype,t.html5Clone="<:nav></:nav>"!==G.createElement("nav").cloneNode(!0).outerHTML,t.inlineBlockNeedsLayout=!1,t.shrinkWrapBlocks=!1,t.pixelPosition=!1,t.deleteExpando=!0,t.noCloneEvent=!0,t.reliableMarginRight=!0,t.boxSizingReliable=!0,i.checked=!0,t.noCloneChecked=i.cloneNode(!0).checked,o.disabled=!0,t.optDisabled=!a.disabled;try{delete d.test}catch(h){t.deleteExpando=!1}i=G.createElement("input"),i.setAttribute("value",""),t.input=""===i.getAttribute("value"),i.value="t",i.setAttribute("type","radio"),t.radioValue="t"===i.value,i.setAttribute("checked","t"),i.setAttribute("name","t"),s=G.createDocumentFragment(),s.appendChild(i),t.appendChecked=i.checked,t.checkClone=s.cloneNode(!0).cloneNode(!0).lastChild.checked,d.attachEvent&&(d.attachEvent("onclick",function(){t.noCloneEvent=!1}),d.cloneNode(!0).click());for(u in{submit:!0,change:!0,focusin:!0})d.setAttribute(l="on"+u,"t"),t[u+"Bubbles"]=l in e||d.attributes[l].expando===!1;d.style.backgroundClip="content-box",d.cloneNode(!0).style.backgroundClip="",t.clearCloneStyle="content-box"===d.style.backgroundClip;for(u in ut(t))break;return t.ownLast="0"!==u,ut(function(){var n,r,i,o="padding:0;margin:0;border:0;display:block;box-sizing:content-box;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;",s=G.getElementsByTagName("body")[0];s&&(n=G.createElement("div"),n.style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px",s.appendChild(n).appendChild(d),d.innerHTML="<table><tr><td></td><td>t</td></tr></table>",i=d.getElementsByTagName("td"),i[0].style.cssText="padding:0;margin:0;border:0;display:none",c=0===i[0].offsetHeight,i[0].style.display="",i[1].style.display="none",t.reliableHiddenOffsets=c&&0===i[0].offsetHeight,d.innerHTML="",d.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;",ut.swap(s,null!=s.style.zoom?{zoom:1}:{},function(){t.boxSizing=4===d.offsetWidth}),e.getComputedStyle&&(t.pixelPosition="1%"!==(e.getComputedStyle(d,null)||{}).top,t.boxSizingReliable="4px"===(e.getComputedStyle(d,null)||{width:"4px"}).width,r=d.appendChild(G.createElement("div")),r.style.cssText=d.style.cssText=o,r.style.marginRight=r.style.width="0",d.style.width="1px",t.reliableMarginRight=!parseFloat((e.getComputedStyle(r,null)||{}).marginRight)),typeof d.style.zoom!==z&&(d.innerHTML="",d.style.cssText=o+"width:1px;padding:1px;display:inline;zoom:1",t.inlineBlockNeedsLayout=3===d.offsetWidth,d.style.display="block",d.innerHTML="<div></div>",d.firstChild.style.width="5px",t.shrinkWrapBlocks=3!==d.offsetWidth,t.inlineBlockNeedsLayout&&(s.style.zoom=1)),s.removeChild(n),n=d=i=r=null)}),n=o=s=a=r=i=null,t}({});var xt=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,Nt=/([A-Z])/g;ut.extend({cache:{},noData:{applet:!0,embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(e){return e=e.nodeType?ut.cache[e[ut.expando]]:e[ut.expando],!!e&&!a(e)},data:function(e,t,n){return i(e,t,n)},removeData:function(e,t){return o(e,t)},_data:function(e,t,n){return i(e,t,n,!0)},_removeData:function(e,t){return o(e,t,!0)},acceptData:function(e){if(e.nodeType&&1!==e.nodeType&&9!==e.nodeType)return!1;var t=e.nodeName&&ut.noData[e.nodeName.toLowerCase()];return!t||t!==!0&&e.getAttribute("classid")===t}}),ut.fn.extend({data:function(e,n){var r,i,o=null,a=0,l=this[0];if(e===t){if(this.length&&(o=ut.data(l),1===l.nodeType&&!ut._data(l,"parsedAttrs"))){for(r=l.attributes;a<r.length;a++)i=r[a].name,0===i.indexOf("data-")&&(i=ut.camelCase(i.slice(5)),s(l,i,o[i]));ut._data(l,"parsedAttrs",!0)}return o}return"object"==typeof e?this.each(function(){ut.data(this,e)}):arguments.length>1?this.each(function(){ut.data(this,e,n)}):l?s(l,e,ut.data(l,e)):null},removeData:function(e){return this.each(function(){ut.removeData(this,e)})}}),ut.extend({queue:function(e,t,n){var r;return e?(t=(t||"fx")+"queue",r=ut._data(e,t),n&&(!r||ut.isArray(n)?r=ut._data(e,t,ut.makeArray(n)):r.push(n)),r||[]):void 0},dequeue:function(e,t){t=t||"fx";var n=ut.queue(e,t),r=n.length,i=n.shift(),o=ut._queueHooks(e,t),s=function(){ut.dequeue(e,t)};"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===t&&n.unshift("inprogress"),delete o.stop,i.call(e,s,o)),!r&&o&&o.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return ut._data(e,n)||ut._data(e,n,{empty:ut.Callbacks("once memory").add(function(){ut._removeData(e,t+"queue"),ut._removeData(e,n)})})}}),ut.fn.extend({queue:function(e,n){var r=2;return"string"!=typeof e&&(n=e,e="fx",r--),arguments.length<r?ut.queue(this[0],e):n===t?this:this.each(function(){var t=ut.queue(this,e,n);ut._queueHooks(this,e),"fx"===e&&"inprogress"!==t[0]&&ut.dequeue(this,e)})},dequeue:function(e){return this.each(function(){ut.dequeue(this,e)})},delay:function(e,t){return e=ut.fx?ut.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,n){var r=setTimeout(t,e);n.stop=function(){clearTimeout(r)}})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,n){var r,i=1,o=ut.Deferred(),s=this,a=this.length,l=function(){--i||o.resolveWith(s,[s])};for("string"!=typeof e&&(n=e,e=t),e=e||"fx";a--;)r=ut._data(s[a],e+"queueHooks"),r&&r.empty&&(i++,r.empty.add(l));return l(),o.promise(n)}});var Mt,Wt,Rt=/[\t\r\n\f]/g,Lt=/\r/g,At=/^(?:input|select|textarea|button|object)$/i,Yt=/^(?:a|area)$/i,It=/^(?:checked|selected)$/i,Ot=ut.support.getSetAttribute,kt=ut.support.input;ut.fn.extend({attr:function(e,t){return ut.access(this,ut.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){ut.removeAttr(this,e)})},prop:function(e,t){return ut.access(this,ut.prop,e,t,arguments.length>1)},removeProp:function(e){return e=ut.propFix[e]||e,this.each(function(){try{this[e]=t,delete this[e]}catch(n){}})},addClass:function(e){var t,n,r,i,o,s=0,a=this.length,l="string"==typeof e&&e;if(ut.isFunction(e))return this.each(function(t){ut(this).addClass(e.call(this,t,this.className))});if(l)for(t=(e||"").match(ht)||[];a>s;s++)if(n=this[s],r=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(Rt," "):" ")){for(o=0;i=t[o++];)r.indexOf(" "+i+" ")<0&&(r+=i+" ");n.className=ut.trim(r)}return this},removeClass:function(e){var t,n,r,i,o,s=0,a=this.length,l=0===arguments.length||"string"==typeof e&&e;if(ut.isFunction(e))return this.each(function(t){ut(this).removeClass(e.call(this,t,this.className))});if(l)for(t=(e||"").match(ht)||[];a>s;s++)if(n=this[s],r=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(Rt," "):"")){for(o=0;i=t[o++];)for(;r.indexOf(" "+i+" ")>=0;)r=r.replace(" "+i+" "," ");n.className=e?ut.trim(r):""}return this},toggleClass:function(e,t){var n=typeof e;return"boolean"==typeof t&&"string"===n?t?this.addClass(e):this.removeClass(e):ut.isFunction(e)?this.each(function(n){ut(this).toggleClass(e.call(this,n,this.className,t),t)}):this.each(function(){if("string"===n)for(var t,r=0,i=ut(this),o=e.match(ht)||[];t=o[r++];)i.hasClass(t)?i.removeClass(t):i.addClass(t);else(n===z||"boolean"===n)&&(this.className&&ut._data(this,"__className__",this.className),this.className=this.className||e===!1?"":ut._data(this,"__className__")||"")})},hasClass:function(e){for(var t=" "+e+" ",n=0,r=this.length;r>n;n++)if(1===this[n].nodeType&&(" "+this[n].className+" ").replace(Rt," ").indexOf(t)>=0)return!0;return!1},val:function(e){var n,r,i,o=this[0];{if(arguments.length)return i=ut.isFunction(e),this.each(function(n){var o;1===this.nodeType&&(o=i?e.call(this,n,ut(this).val()):e,null==o?o="":"number"==typeof o?o+="":ut.isArray(o)&&(o=ut.map(o,function(e){return null==e?"":e+""})),r=ut.valHooks[this.type]||ut.valHooks[this.nodeName.toLowerCase()],r&&"set"in r&&r.set(this,o,"value")!==t||(this.value=o))});if(o)return r=ut.valHooks[o.type]||ut.valHooks[o.nodeName.toLowerCase()],r&&"get"in r&&(n=r.get(o,"value"))!==t?n:(n=o.value,"string"==typeof n?n.replace(Lt,""):null==n?"":n)}}}),ut.extend({valHooks:{option:{get:function(e){var t=ut.find.attr(e,"value");return null!=t?t:e.text}},select:{get:function(e){for(var t,n,r=e.options,i=e.selectedIndex,o="select-one"===e.type||0>i,s=o?null:[],a=o?i+1:r.length,l=0>i?a:o?i:0;a>l;l++)if(n=r[l],!(!n.selected&&l!==i||(ut.support.optDisabled?n.disabled:null!==n.getAttribute("disabled"))||n.parentNode.disabled&&ut.nodeName(n.parentNode,"optgroup"))){if(t=ut(n).val(),o)return t;s.push(t)}return s},set:function(e,t){for(var n,r,i=e.options,o=ut.makeArray(t),s=i.length;s--;)r=i[s],(r.selected=ut.inArray(ut(r).val(),o)>=0)&&(n=!0);return n||(e.selectedIndex=-1),o}}},attr:function(e,n,r){var i,o,s=e.nodeType;if(e&&3!==s&&8!==s&&2!==s)return typeof e.getAttribute===z?ut.prop(e,n,r):(1===s&&ut.isXMLDoc(e)||(n=n.toLowerCase(),i=ut.attrHooks[n]||(ut.expr.match.bool.test(n)?Wt:Mt)),r===t?i&&"get"in i&&null!==(o=i.get(e,n))?o:(o=ut.find.attr(e,n),null==o?t:o):null!==r?i&&"set"in i&&(o=i.set(e,r,n))!==t?o:(e.setAttribute(n,r+""),r):(ut.removeAttr(e,n),void 0))},removeAttr:function(e,t){var n,r,i=0,o=t&&t.match(ht);if(o&&1===e.nodeType)for(;n=o[i++];)r=ut.propFix[n]||n,ut.expr.match.bool.test(n)?kt&&Ot||!It.test(n)?e[r]=!1:e[ut.camelCase("default-"+n)]=e[r]=!1:ut.attr(e,n,""),e.removeAttribute(Ot?n:r)},attrHooks:{type:{set:function(e,t){if(!ut.support.radioValue&&"radio"===t&&ut.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},propFix:{"for":"htmlFor","class":"className"},prop:function(e,n,r){var i,o,s,a=e.nodeType;if(e&&3!==a&&8!==a&&2!==a)return s=1!==a||!ut.isXMLDoc(e),s&&(n=ut.propFix[n]||n,o=ut.propHooks[n]),r!==t?o&&"set"in o&&(i=o.set(e,r,n))!==t?i:e[n]=r:o&&"get"in o&&null!==(i=o.get(e,n))?i:e[n]},propHooks:{tabIndex:{get:function(e){var t=ut.find.attr(e,"tabindex");return t?parseInt(t,10):At.test(e.nodeName)||Yt.test(e.nodeName)&&e.href?0:-1}}}}),Wt={set:function(e,t,n){return t===!1?ut.removeAttr(e,n):kt&&Ot||!It.test(n)?e.setAttribute(!Ot&&ut.propFix[n]||n,n):e[ut.camelCase("default-"+n)]=e[n]=!0,n}},ut.each(ut.expr.match.bool.source.match(/\w+/g),function(e,n){var r=ut.expr.attrHandle[n]||ut.find.attr;ut.expr.attrHandle[n]=kt&&Ot||!It.test(n)?function(e,n,i){var o=ut.expr.attrHandle[n],s=i?t:(ut.expr.attrHandle[n]=t)!=r(e,n,i)?n.toLowerCase():null;return ut.expr.attrHandle[n]=o,s}:function(e,n,r){return r?t:e[ut.camelCase("default-"+n)]?n.toLowerCase():null}}),kt&&Ot||(ut.attrHooks.value={set:function(e,t,n){return ut.nodeName(e,"input")?(e.defaultValue=t,void 0):Mt&&Mt.set(e,t,n)}}),Ot||(Mt={set:function(e,n,r){var i=e.getAttributeNode(r);return i||e.setAttributeNode(i=e.ownerDocument.createAttribute(r)),i.value=n+="","value"===r||n===e.getAttribute(r)?n:t}},ut.expr.attrHandle.id=ut.expr.attrHandle.name=ut.expr.attrHandle.coords=function(e,n,r){var i;return r?t:(i=e.getAttributeNode(n))&&""!==i.value?i.value:null},ut.valHooks.button={get:function(e,n){var r=e.getAttributeNode(n);return r&&r.specified?r.value:t},set:Mt.set},ut.attrHooks.contenteditable={set:function(e,t,n){Mt.set(e,""===t?!1:t,n)}},ut.each(["width","height"],function(e,t){ut.attrHooks[t]={set:function(e,n){return""===n?(e.setAttribute(t,"auto"),n):void 0}}})),ut.support.hrefNormalized||ut.each(["href","src"],function(e,t){ut.propHooks[t]={get:function(e){return e.getAttribute(t,4)}}}),ut.support.style||(ut.attrHooks.style={get:function(e){return e.style.cssText||t},set:function(e,t){return e.style.cssText=t+""}}),ut.support.optSelected||(ut.propHooks.selected={get:function(e){var t=e.parentNode;return t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex),null}}),ut.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){ut.propFix[this.toLowerCase()]=this}),ut.support.enctype||(ut.propFix.enctype="encoding"),ut.each(["radio","checkbox"],function(){ut.valHooks[this]={set:function(e,t){return ut.isArray(t)?e.checked=ut.inArray(ut(e).val(),t)>=0:void 0}},ut.support.checkOn||(ut.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})});var Dt=/^(?:input|select|textarea)$/i,jt=/^key/,Pt=/^(?:mouse|contextmenu)|click/,Ht=/^(?:focusinfocus|focusoutblur)$/,Bt=/^([^.]*)(?:\.(.+)|)$/;ut.event={global:{},add:function(e,n,r,i,o){var s,a,l,c,u,d,h,p,f,m,g,y=ut._data(e);if(y){for(r.handler&&(c=r,r=c.handler,o=c.selector),r.guid||(r.guid=ut.guid++),(a=y.events)||(a=y.events={}),(d=y.handle)||(d=y.handle=function(e){return typeof ut===z||e&&ut.event.triggered===e.type?t:ut.event.dispatch.apply(d.elem,arguments)},d.elem=e),n=(n||"").match(ht)||[""],l=n.length;l--;)s=Bt.exec(n[l])||[],f=g=s[1],m=(s[2]||"").split(".").sort(),f&&(u=ut.event.special[f]||{},f=(o?u.delegateType:u.bindType)||f,u=ut.event.special[f]||{},h=ut.extend({type:f,origType:g,data:i,handler:r,guid:r.guid,selector:o,needsContext:o&&ut.expr.match.needsContext.test(o),namespace:m.join(".")},c),(p=a[f])||(p=a[f]=[],p.delegateCount=0,u.setup&&u.setup.call(e,i,m,d)!==!1||(e.addEventListener?e.addEventListener(f,d,!1):e.attachEvent&&e.attachEvent("on"+f,d))),u.add&&(u.add.call(e,h),h.handler.guid||(h.handler.guid=r.guid)),o?p.splice(p.delegateCount++,0,h):p.push(h),ut.event.global[f]=!0);e=null}},remove:function(e,t,n,r,i){var o,s,a,l,c,u,d,h,p,f,m,g=ut.hasData(e)&&ut._data(e);if(g&&(u=g.events)){for(t=(t||"").match(ht)||[""],c=t.length;c--;)if(a=Bt.exec(t[c])||[],p=m=a[1],f=(a[2]||"").split(".").sort(),p){for(d=ut.event.special[p]||{},p=(r?d.delegateType:d.bindType)||p,h=u[p]||[],a=a[2]&&new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"),l=o=h.length;o--;)s=h[o],!i&&m!==s.origType||n&&n.guid!==s.guid||a&&!a.test(s.namespace)||r&&r!==s.selector&&("**"!==r||!s.selector)||(h.splice(o,1),s.selector&&h.delegateCount--,d.remove&&d.remove.call(e,s));l&&!h.length&&(d.teardown&&d.teardown.call(e,f,g.handle)!==!1||ut.removeEvent(e,p,g.handle),delete u[p])}else for(p in u)ut.event.remove(e,p+t[c],n,r,!0);ut.isEmptyObject(u)&&(delete g.handle,ut._removeData(e,"events"))}},trigger:function(n,r,i,o){var s,a,l,c,u,d,h,p=[i||G],f=lt.call(n,"type")?n.type:n,m=lt.call(n,"namespace")?n.namespace.split("."):[];if(l=d=i=i||G,3!==i.nodeType&&8!==i.nodeType&&!Ht.test(f+ut.event.triggered)&&(f.indexOf(".")>=0&&(m=f.split("."),f=m.shift(),m.sort()),a=f.indexOf(":")<0&&"on"+f,n=n[ut.expando]?n:new ut.Event(f,"object"==typeof n&&n),n.isTrigger=o?2:3,n.namespace=m.join("."),n.namespace_re=n.namespace?new RegExp("(^|\\.)"+m.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,n.result=t,n.target||(n.target=i),r=null==r?[n]:ut.makeArray(r,[n]),u=ut.event.special[f]||{},o||!u.trigger||u.trigger.apply(i,r)!==!1)){if(!o&&!u.noBubble&&!ut.isWindow(i)){for(c=u.delegateType||f,Ht.test(c+f)||(l=l.parentNode);l;l=l.parentNode)p.push(l),d=l;d===(i.ownerDocument||G)&&p.push(d.defaultView||d.parentWindow||e)}for(h=0;(l=p[h++])&&!n.isPropagationStopped();)n.type=h>1?c:u.bindType||f,s=(ut._data(l,"events")||{})[n.type]&&ut._data(l,"handle"),s&&s.apply(l,r),s=a&&l[a],s&&ut.acceptData(l)&&s.apply&&s.apply(l,r)===!1&&n.preventDefault();if(n.type=f,!o&&!n.isDefaultPrevented()&&(!u._default||u._default.apply(p.pop(),r)===!1)&&ut.acceptData(i)&&a&&i[f]&&!ut.isWindow(i)){d=i[a],d&&(i[a]=null),ut.event.triggered=f;try{i[f]()}catch(g){}ut.event.triggered=t,d&&(i[a]=d)}return n.result}},dispatch:function(e){e=ut.event.fix(e);var n,r,i,o,s,a=[],l=ot.call(arguments),c=(ut._data(this,"events")||{})[e.type]||[],u=ut.event.special[e.type]||{};if(l[0]=e,e.delegateTarget=this,!u.preDispatch||u.preDispatch.call(this,e)!==!1){for(a=ut.event.handlers.call(this,e,c),n=0;(o=a[n++])&&!e.isPropagationStopped();)for(e.currentTarget=o.elem,s=0;(i=o.handlers[s++])&&!e.isImmediatePropagationStopped();)(!e.namespace_re||e.namespace_re.test(i.namespace))&&(e.handleObj=i,e.data=i.data,r=((ut.event.special[i.origType]||{}).handle||i.handler).apply(o.elem,l),r!==t&&(e.result=r)===!1&&(e.preventDefault(),e.stopPropagation()));return u.postDispatch&&u.postDispatch.call(this,e),e.result}},handlers:function(e,n){var r,i,o,s,a=[],l=n.delegateCount,c=e.target;if(l&&c.nodeType&&(!e.button||"click"!==e.type))for(;c!=this;c=c.parentNode||this)if(1===c.nodeType&&(c.disabled!==!0||"click"!==e.type)){for(o=[],s=0;l>s;s++)i=n[s],r=i.selector+" ",o[r]===t&&(o[r]=i.needsContext?ut(r,this).index(c)>=0:ut.find(r,this,null,[c]).length),o[r]&&o.push(i);o.length&&a.push({elem:c,handlers:o})}return l<n.length&&a.push({elem:this,handlers:n.slice(l)}),a},fix:function(e){if(e[ut.expando])return e;var t,n,r,i=e.type,o=e,s=this.fixHooks[i];for(s||(this.fixHooks[i]=s=Pt.test(i)?this.mouseHooks:jt.test(i)?this.keyHooks:{}),r=s.props?this.props.concat(s.props):this.props,e=new ut.Event(o),t=r.length;t--;)n=r[t],e[n]=o[n];return e.target||(e.target=o.srcElement||G),3===e.target.nodeType&&(e.target=e.target.parentNode),e.metaKey=!!e.metaKey,s.filter?s.filter(e,o):e},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,n){var r,i,o,s=n.button,a=n.fromElement;return null==e.pageX&&null!=n.clientX&&(i=e.target.ownerDocument||G,o=i.documentElement,r=i.body,e.pageX=n.clientX+(o&&o.scrollLeft||r&&r.scrollLeft||0)-(o&&o.clientLeft||r&&r.clientLeft||0),e.pageY=n.clientY+(o&&o.scrollTop||r&&r.scrollTop||0)-(o&&o.clientTop||r&&r.clientTop||0)),!e.relatedTarget&&a&&(e.relatedTarget=a===e.target?n.toElement:a),e.which||s===t||(e.which=1&s?1:2&s?3:4&s?2:0),e}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==u()&&this.focus)try{return this.focus(),!1}catch(e){}},delegateType:"focusin"},blur:{trigger:function(){return this===u()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return ut.nodeName(this,"input")&&"checkbox"===this.type&&this.click?(this.click(),!1):void 0},_default:function(e){return ut.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){e.result!==t&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,n,r){var i=ut.extend(new ut.Event,n,{type:e,isSimulated:!0,originalEvent:{}});r?ut.event.trigger(i,null,t):ut.event.dispatch.call(t,i),i.isDefaultPrevented()&&n.preventDefault()}},ut.removeEvent=G.removeEventListener?function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)}:function(e,t,n){var r="on"+t;e.detachEvent&&(typeof e[r]===z&&(e[r]=null),e.detachEvent(r,n))},ut.Event=function(e,t){return this instanceof ut.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||e.returnValue===!1||e.getPreventDefault&&e.getPreventDefault()?l:c):this.type=e,t&&ut.extend(this,t),this.timeStamp=e&&e.timeStamp||ut.now(),this[ut.expando]=!0,void 0):new ut.Event(e,t)},ut.Event.prototype={isDefaultPrevented:c,isPropagationStopped:c,isImmediatePropagationStopped:c,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=l,e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=l,e&&(e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=l,this.stopPropagation()}},ut.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(e,t){ut.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=this,i=e.relatedTarget,o=e.handleObj;return(!i||i!==r&&!ut.contains(r,i))&&(e.type=o.origType,n=o.handler.apply(this,arguments),e.type=t),n}}}),ut.support.submitBubbles||(ut.event.special.submit={setup:function(){return ut.nodeName(this,"form")?!1:(ut.event.add(this,"click._submit keypress._submit",function(e){var n=e.target,r=ut.nodeName(n,"input")||ut.nodeName(n,"button")?n.form:t;r&&!ut._data(r,"submitBubbles")&&(ut.event.add(r,"submit._submit",function(e){e._submit_bubble=!0}),ut._data(r,"submitBubbles",!0))}),void 0)},postDispatch:function(e){e._submit_bubble&&(delete e._submit_bubble,this.parentNode&&!e.isTrigger&&ut.event.simulate("submit",this.parentNode,e,!0))},teardown:function(){return ut.nodeName(this,"form")?!1:(ut.event.remove(this,"._submit"),void 0)}}),ut.support.changeBubbles||(ut.event.special.change={setup:function(){return Dt.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&(ut.event.add(this,"propertychange._change",function(e){"checked"===e.originalEvent.propertyName&&(this._just_changed=!0)}),ut.event.add(this,"click._change",function(e){this._just_changed&&!e.isTrigger&&(this._just_changed=!1),ut.event.simulate("change",this,e,!0)})),!1):(ut.event.add(this,"beforeactivate._change",function(e){var t=e.target;Dt.test(t.nodeName)&&!ut._data(t,"changeBubbles")&&(ut.event.add(t,"change._change",function(e){!this.parentNode||e.isSimulated||e.isTrigger||ut.event.simulate("change",this.parentNode,e,!0)}),ut._data(t,"changeBubbles",!0))}),void 0)},handle:function(e){var t=e.target;return this!==t||e.isSimulated||e.isTrigger||"radio"!==t.type&&"checkbox"!==t.type?e.handleObj.handler.apply(this,arguments):void 0},teardown:function(){return ut.event.remove(this,"._change"),!Dt.test(this.nodeName)}}),ut.support.focusinBubbles||ut.each({focus:"focusin",blur:"focusout"},function(e,t){var n=0,r=function(e){ut.event.simulate(t,e.target,ut.event.fix(e),!0)};ut.event.special[t]={setup:function(){0===n++&&G.addEventListener(e,r,!0)},teardown:function(){0===--n&&G.removeEventListener(e,r,!0)}}}),ut.fn.extend({on:function(e,n,r,i,o){var s,a;if("object"==typeof e){"string"!=typeof n&&(r=r||n,n=t);for(s in e)this.on(s,n,r,e[s],o);return this}if(null==r&&null==i?(i=n,r=n=t):null==i&&("string"==typeof n?(i=r,r=t):(i=r,r=n,n=t)),i===!1)i=c;else if(!i)return this;return 1===o&&(a=i,i=function(e){return ut().off(e),a.apply(this,arguments)},i.guid=a.guid||(a.guid=ut.guid++)),this.each(function(){ut.event.add(this,e,i,r,n)})},one:function(e,t,n,r){return this.on(e,t,n,r,1)},off:function(e,n,r){var i,o;if(e&&e.preventDefault&&e.handleObj)return i=e.handleObj,ut(e.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"==typeof e){for(o in e)this.off(o,n,e[o]);return this}return(n===!1||"function"==typeof n)&&(r=n,n=t),r===!1&&(r=c),this.each(function(){ut.event.remove(this,e,r,n)})},trigger:function(e,t){return this.each(function(){ut.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];return n?ut.event.trigger(e,t,n,!0):void 0}});var Qt=/^.[^:#\[\.,]*$/,Ft=/^(?:parents|prev(?:Until|All))/,qt=ut.expr.match.needsContext,Xt={children:!0,contents:!0,next:!0,prev:!0};ut.fn.extend({find:function(e){var t,n=[],r=this,i=r.length;if("string"!=typeof e)return this.pushStack(ut(e).filter(function(){for(t=0;i>t;t++)if(ut.contains(r[t],this))return!0}));for(t=0;i>t;t++)ut.find(e,r[t],n);return n=this.pushStack(i>1?ut.unique(n):n),n.selector=this.selector?this.selector+" "+e:e,n},has:function(e){var t,n=ut(e,this),r=n.length;return this.filter(function(){for(t=0;r>t;t++)if(ut.contains(this,n[t]))return!0})},not:function(e){return this.pushStack(h(this,e||[],!0))},filter:function(e){return this.pushStack(h(this,e||[],!1))},is:function(e){return!!h(this,"string"==typeof e&&qt.test(e)?ut(e):e||[],!1).length},closest:function(e,t){for(var n,r=0,i=this.length,o=[],s=qt.test(e)||"string"!=typeof e?ut(e,t||this.context):0;i>r;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(s?s.index(n)>-1:1===n.nodeType&&ut.find.matchesSelector(n,e))){n=o.push(n);break}return this.pushStack(o.length>1?ut.unique(o):o)},index:function(e){return e?"string"==typeof e?ut.inArray(this[0],ut(e)):ut.inArray(e.jquery?e[0]:e,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){var n="string"==typeof e?ut(e,t):ut.makeArray(e&&e.nodeType?[e]:e),r=ut.merge(this.get(),n);return this.pushStack(ut.unique(r))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),ut.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return ut.dir(e,"parentNode")},parentsUntil:function(e,t,n){return ut.dir(e,"parentNode",n)},next:function(e){return d(e,"nextSibling")},prev:function(e){return d(e,"previousSibling")},nextAll:function(e){return ut.dir(e,"nextSibling")},prevAll:function(e){return ut.dir(e,"previousSibling")},nextUntil:function(e,t,n){return ut.dir(e,"nextSibling",n)},prevUntil:function(e,t,n){return ut.dir(e,"previousSibling",n)},siblings:function(e){return ut.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return ut.sibling(e.firstChild)},contents:function(e){return ut.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:ut.merge([],e.childNodes)}},function(e,t){ut.fn[e]=function(n,r){var i=ut.map(this,t,n);return"Until"!==e.slice(-5)&&(r=n),r&&"string"==typeof r&&(i=ut.filter(r,i)),this.length>1&&(Xt[e]||(i=ut.unique(i)),Ft.test(e)&&(i=i.reverse())),this.pushStack(i)}}),ut.extend({filter:function(e,t,n){var r=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===r.nodeType?ut.find.matchesSelector(r,e)?[r]:[]:ut.find.matches(e,ut.grep(t,function(e){return 1===e.nodeType}))},dir:function(e,n,r){for(var i=[],o=e[n];o&&9!==o.nodeType&&(r===t||1!==o.nodeType||!ut(o).is(r));)1===o.nodeType&&i.push(o),o=o[n];return i},sibling:function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n}});var $t="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",Ut=/ jQuery\d+="(?:null|\d+)"/g,zt=new RegExp("<(?:"+$t+")[\\s/>]","i"),Kt=/^\s+/,Gt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Vt=/<([\w:]+)/,Jt=/<tbody/i,Zt=/<|&#?\w+;/,en=/<(?:script|style|link)/i,tn=/^(?:checkbox|radio)$/i,nn=/checked\s*(?:[^=]|=\s*.checked.)/i,rn=/^$|\/(?:java|ecma)script/i,on=/^true\/(.*)/,sn=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,an={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:ut.support.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},ln=p(G),cn=ln.appendChild(G.createElement("div"));
an.optgroup=an.option,an.tbody=an.tfoot=an.colgroup=an.caption=an.thead,an.th=an.td,ut.fn.extend({text:function(e){return ut.access(this,function(e){return e===t?ut.text(this):this.empty().append((this[0]&&this[0].ownerDocument||G).createTextNode(e))},null,e,arguments.length)},append:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=f(this,e);t.appendChild(e)}})},prepend:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=f(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},remove:function(e,t){for(var n,r=e?ut.filter(e,this):this,i=0;null!=(n=r[i]);i++)t||1!==n.nodeType||ut.cleanData(b(n)),n.parentNode&&(t&&ut.contains(n.ownerDocument,n)&&y(b(n,"script")),n.parentNode.removeChild(n));return this},empty:function(){for(var e,t=0;null!=(e=this[t]);t++){for(1===e.nodeType&&ut.cleanData(b(e,!1));e.firstChild;)e.removeChild(e.firstChild);e.options&&ut.nodeName(e,"select")&&(e.options.length=0)}return this},clone:function(e,t){return e=null==e?!1:e,t=null==t?e:t,this.map(function(){return ut.clone(this,e,t)})},html:function(e){return ut.access(this,function(e){var n=this[0]||{},r=0,i=this.length;if(e===t)return 1===n.nodeType?n.innerHTML.replace(Ut,""):t;if(!("string"!=typeof e||en.test(e)||!ut.support.htmlSerialize&&zt.test(e)||!ut.support.leadingWhitespace&&Kt.test(e)||an[(Vt.exec(e)||["",""])[1].toLowerCase()])){e=e.replace(Gt,"<$1></$2>");try{for(;i>r;r++)n=this[r]||{},1===n.nodeType&&(ut.cleanData(b(n,!1)),n.innerHTML=e);n=0}catch(o){}}n&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=ut.map(this,function(e){return[e.nextSibling,e.parentNode]}),t=0;return this.domManip(arguments,function(n){var r=e[t++],i=e[t++];i&&(r&&r.parentNode!==i&&(r=this.nextSibling),ut(this).remove(),i.insertBefore(n,r))},!0),t?this:this.remove()},detach:function(e){return this.remove(e,!0)},domManip:function(e,t,n){e=rt.apply([],e);var r,i,o,s,a,l,c=0,u=this.length,d=this,h=u-1,p=e[0],f=ut.isFunction(p);if(f||!(1>=u||"string"!=typeof p||ut.support.checkClone)&&nn.test(p))return this.each(function(r){var i=d.eq(r);f&&(e[0]=p.call(this,r,i.html())),i.domManip(e,t,n)});if(u&&(l=ut.buildFragment(e,this[0].ownerDocument,!1,!n&&this),r=l.firstChild,1===l.childNodes.length&&(l=r),r)){for(s=ut.map(b(l,"script"),m),o=s.length;u>c;c++)i=l,c!==h&&(i=ut.clone(i,!0,!0),o&&ut.merge(s,b(i,"script"))),t.call(this[c],i,c);if(o)for(a=s[s.length-1].ownerDocument,ut.map(s,g),c=0;o>c;c++)i=s[c],rn.test(i.type||"")&&!ut._data(i,"globalEval")&&ut.contains(a,i)&&(i.src?ut._evalUrl(i.src):ut.globalEval((i.text||i.textContent||i.innerHTML||"").replace(sn,"")));l=r=null}return this}}),ut.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){ut.fn[e]=function(e){for(var n,r=0,i=[],o=ut(e),s=o.length-1;s>=r;r++)n=r===s?this:this.clone(!0),ut(o[r])[t](n),it.apply(i,n.get());return this.pushStack(i)}}),ut.extend({clone:function(e,t,n){var r,i,o,s,a,l=ut.contains(e.ownerDocument,e);if(ut.support.html5Clone||ut.isXMLDoc(e)||!zt.test("<"+e.nodeName+">")?o=e.cloneNode(!0):(cn.innerHTML=e.outerHTML,cn.removeChild(o=cn.firstChild)),!(ut.support.noCloneEvent&&ut.support.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||ut.isXMLDoc(e)))for(r=b(o),a=b(e),s=0;null!=(i=a[s]);++s)r[s]&&v(i,r[s]);if(t)if(n)for(a=a||b(e),r=r||b(o),s=0;null!=(i=a[s]);s++)_(i,r[s]);else _(e,o);return r=b(o,"script"),r.length>0&&y(r,!l&&b(e,"script")),r=a=i=null,o},buildFragment:function(e,t,n,r){for(var i,o,s,a,l,c,u,d=e.length,h=p(t),f=[],m=0;d>m;m++)if(o=e[m],o||0===o)if("object"===ut.type(o))ut.merge(f,o.nodeType?[o]:o);else if(Zt.test(o)){for(a=a||h.appendChild(t.createElement("div")),l=(Vt.exec(o)||["",""])[1].toLowerCase(),u=an[l]||an._default,a.innerHTML=u[1]+o.replace(Gt,"<$1></$2>")+u[2],i=u[0];i--;)a=a.lastChild;if(!ut.support.leadingWhitespace&&Kt.test(o)&&f.push(t.createTextNode(Kt.exec(o)[0])),!ut.support.tbody)for(o="table"!==l||Jt.test(o)?"<table>"!==u[1]||Jt.test(o)?0:a:a.firstChild,i=o&&o.childNodes.length;i--;)ut.nodeName(c=o.childNodes[i],"tbody")&&!c.childNodes.length&&o.removeChild(c);for(ut.merge(f,a.childNodes),a.textContent="";a.firstChild;)a.removeChild(a.firstChild);a=h.lastChild}else f.push(t.createTextNode(o));for(a&&h.removeChild(a),ut.support.appendChecked||ut.grep(b(f,"input"),C),m=0;o=f[m++];)if((!r||-1===ut.inArray(o,r))&&(s=ut.contains(o.ownerDocument,o),a=b(h.appendChild(o),"script"),s&&y(a),n))for(i=0;o=a[i++];)rn.test(o.type||"")&&n.push(o);return a=null,h},cleanData:function(e,t){for(var n,r,i,o,s=0,a=ut.expando,l=ut.cache,c=ut.support.deleteExpando,u=ut.event.special;null!=(n=e[s]);s++)if((t||ut.acceptData(n))&&(i=n[a],o=i&&l[i])){if(o.events)for(r in o.events)u[r]?ut.event.remove(n,r):ut.removeEvent(n,r,o.handle);l[i]&&(delete l[i],c?delete n[a]:typeof n.removeAttribute!==z?n.removeAttribute(a):n[a]=null,tt.push(i))}},_evalUrl:function(e){return ut.ajax({url:e,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})}}),ut.fn.extend({wrapAll:function(e){if(ut.isFunction(e))return this.each(function(t){ut(this).wrapAll(e.call(this,t))});if(this[0]){var t=ut(e,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstChild&&1===e.firstChild.nodeType;)e=e.firstChild;return e}).append(this)}return this},wrapInner:function(e){return ut.isFunction(e)?this.each(function(t){ut(this).wrapInner(e.call(this,t))}):this.each(function(){var t=ut(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=ut.isFunction(e);return this.each(function(n){ut(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){ut.nodeName(this,"body")||ut(this).replaceWith(this.childNodes)}).end()}});var un,dn,hn,pn=/alpha\([^)]*\)/i,fn=/opacity\s*=\s*([^)]*)/,mn=/^(top|right|bottom|left)$/,gn=/^(none|table(?!-c[ea]).+)/,yn=/^margin/,_n=new RegExp("^("+dt+")(.*)$","i"),vn=new RegExp("^("+dt+")(?!px)[a-z%]+$","i"),bn=new RegExp("^([+-])=("+dt+")","i"),Cn={BODY:"block"},Tn={position:"absolute",visibility:"hidden",display:"block"},wn={letterSpacing:0,fontWeight:400},En=["Top","Right","Bottom","Left"],Sn=["Webkit","O","Moz","ms"];ut.fn.extend({css:function(e,n){return ut.access(this,function(e,n,r){var i,o,s={},a=0;if(ut.isArray(n)){for(o=dn(e),i=n.length;i>a;a++)s[n[a]]=ut.css(e,n[a],!1,o);return s}return r!==t?ut.style(e,n,r):ut.css(e,n)},e,n,arguments.length>1)},show:function(){return E(this,!0)},hide:function(){return E(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){w(this)?ut(this).show():ut(this).hide()})}}),ut.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=hn(e,"opacity");return""===n?"1":n}}}},cssNumber:{columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":ut.support.cssFloat?"cssFloat":"styleFloat"},style:function(e,n,r,i){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var o,s,a,l=ut.camelCase(n),c=e.style;if(n=ut.cssProps[l]||(ut.cssProps[l]=T(c,l)),a=ut.cssHooks[n]||ut.cssHooks[l],r===t)return a&&"get"in a&&(o=a.get(e,!1,i))!==t?o:c[n];if(s=typeof r,"string"===s&&(o=bn.exec(r))&&(r=(o[1]+1)*o[2]+parseFloat(ut.css(e,n)),s="number"),!(null==r||"number"===s&&isNaN(r)||("number"!==s||ut.cssNumber[l]||(r+="px"),ut.support.clearCloneStyle||""!==r||0!==n.indexOf("background")||(c[n]="inherit"),a&&"set"in a&&(r=a.set(e,r,i))===t)))try{c[n]=r}catch(u){}}},css:function(e,n,r,i){var o,s,a,l=ut.camelCase(n);return n=ut.cssProps[l]||(ut.cssProps[l]=T(e.style,l)),a=ut.cssHooks[n]||ut.cssHooks[l],a&&"get"in a&&(s=a.get(e,!0,r)),s===t&&(s=hn(e,n,i)),"normal"===s&&n in wn&&(s=wn[n]),""===r||r?(o=parseFloat(s),r===!0||ut.isNumeric(o)?o||0:s):s}}),e.getComputedStyle?(dn=function(t){return e.getComputedStyle(t,null)},hn=function(e,n,r){var i,o,s,a=r||dn(e),l=a?a.getPropertyValue(n)||a[n]:t,c=e.style;return a&&(""!==l||ut.contains(e.ownerDocument,e)||(l=ut.style(e,n)),vn.test(l)&&yn.test(n)&&(i=c.width,o=c.minWidth,s=c.maxWidth,c.minWidth=c.maxWidth=c.width=l,l=a.width,c.width=i,c.minWidth=o,c.maxWidth=s)),l}):G.documentElement.currentStyle&&(dn=function(e){return e.currentStyle},hn=function(e,n,r){var i,o,s,a=r||dn(e),l=a?a[n]:t,c=e.style;return null==l&&c&&c[n]&&(l=c[n]),vn.test(l)&&!mn.test(n)&&(i=c.left,o=e.runtimeStyle,s=o&&o.left,s&&(o.left=e.currentStyle.left),c.left="fontSize"===n?"1em":l,l=c.pixelLeft+"px",c.left=i,s&&(o.left=s)),""===l?"auto":l}),ut.each(["height","width"],function(e,t){ut.cssHooks[t]={get:function(e,n,r){return n?0===e.offsetWidth&&gn.test(ut.css(e,"display"))?ut.swap(e,Tn,function(){return N(e,t,r)}):N(e,t,r):void 0},set:function(e,n,r){var i=r&&dn(e);return S(e,n,r?x(e,t,r,ut.support.boxSizing&&"border-box"===ut.css(e,"boxSizing",!1,i),i):0)}}}),ut.support.opacity||(ut.cssHooks.opacity={get:function(e,t){return fn.test((t&&e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":t?"1":""},set:function(e,t){var n=e.style,r=e.currentStyle,i=ut.isNumeric(t)?"alpha(opacity="+100*t+")":"",o=r&&r.filter||n.filter||"";n.zoom=1,(t>=1||""===t)&&""===ut.trim(o.replace(pn,""))&&n.removeAttribute&&(n.removeAttribute("filter"),""===t||r&&!r.filter)||(n.filter=pn.test(o)?o.replace(pn,i):o+" "+i)}}),ut(function(){ut.support.reliableMarginRight||(ut.cssHooks.marginRight={get:function(e,t){return t?ut.swap(e,{display:"inline-block"},hn,[e,"marginRight"]):void 0}}),!ut.support.pixelPosition&&ut.fn.position&&ut.each(["top","left"],function(e,t){ut.cssHooks[t]={get:function(e,n){return n?(n=hn(e,t),vn.test(n)?ut(e).position()[t]+"px":n):void 0}}})}),ut.expr&&ut.expr.filters&&(ut.expr.filters.hidden=function(e){return e.offsetWidth<=0&&e.offsetHeight<=0||!ut.support.reliableHiddenOffsets&&"none"===(e.style&&e.style.display||ut.css(e,"display"))},ut.expr.filters.visible=function(e){return!ut.expr.filters.hidden(e)}),ut.each({margin:"",padding:"",border:"Width"},function(e,t){ut.cssHooks[e+t]={expand:function(n){for(var r=0,i={},o="string"==typeof n?n.split(" "):[n];4>r;r++)i[e+En[r]+t]=o[r]||o[r-2]||o[0];return i}},yn.test(e)||(ut.cssHooks[e+t].set=S)});var xn=/%20/g,Nn=/\[\]$/,Mn=/\r?\n/g,Wn=/^(?:submit|button|image|reset|file)$/i,Rn=/^(?:input|select|textarea|keygen)/i;ut.fn.extend({serialize:function(){return ut.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=ut.prop(this,"elements");return e?ut.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!ut(this).is(":disabled")&&Rn.test(this.nodeName)&&!Wn.test(e)&&(this.checked||!tn.test(e))}).map(function(e,t){var n=ut(this).val();return null==n?null:ut.isArray(n)?ut.map(n,function(e){return{name:t.name,value:e.replace(Mn,"\r\n")}}):{name:t.name,value:n.replace(Mn,"\r\n")}}).get()}}),ut.param=function(e,n){var r,i=[],o=function(e,t){t=ut.isFunction(t)?t():null==t?"":t,i[i.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(n===t&&(n=ut.ajaxSettings&&ut.ajaxSettings.traditional),ut.isArray(e)||e.jquery&&!ut.isPlainObject(e))ut.each(e,function(){o(this.name,this.value)});else for(r in e)R(r,e[r],n,o);return i.join("&").replace(xn,"+")},ut.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){ut.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),ut.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)}});var Ln,An,Yn=ut.now(),In=/\?/,On=/#.*$/,kn=/([?&])_=[^&]*/,Dn=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,jn=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Pn=/^(?:GET|HEAD)$/,Hn=/^\/\//,Bn=/^([\w.+-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,Qn=ut.fn.load,Fn={},qn={},Xn="*/".concat("*");try{An=K.href}catch($n){An=G.createElement("a"),An.href="",An=An.href}Ln=Bn.exec(An.toLowerCase())||[],ut.fn.load=function(e,n,r){if("string"!=typeof e&&Qn)return Qn.apply(this,arguments);var i,o,s,a=this,l=e.indexOf(" ");return l>=0&&(i=e.slice(l,e.length),e=e.slice(0,l)),ut.isFunction(n)?(r=n,n=t):n&&"object"==typeof n&&(s="POST"),a.length>0&&ut.ajax({url:e,type:s,dataType:"html",data:n}).done(function(e){o=arguments,a.html(i?ut("<div>").append(ut.parseHTML(e)).find(i):e)}).complete(r&&function(e,t){a.each(r,o||[e.responseText,t,e])}),this},ut.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){ut.fn[t]=function(e){return this.on(t,e)}}),ut.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:An,type:"GET",isLocal:jn.test(Ln[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Xn,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":ut.parseJSON,"text xml":ut.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?Y(Y(e,ut.ajaxSettings),t):Y(ut.ajaxSettings,e)},ajaxPrefilter:L(Fn),ajaxTransport:L(qn),ajax:function(e,n){function r(e,n,r,i){var o,d,_,v,C,w=n;2!==b&&(b=2,l&&clearTimeout(l),u=t,a=i||"",T.readyState=e>0?4:0,o=e>=200&&300>e||304===e,r&&(v=I(h,T,r)),v=O(h,v,T,o),o?(h.ifModified&&(C=T.getResponseHeader("Last-Modified"),C&&(ut.lastModified[s]=C),C=T.getResponseHeader("etag"),C&&(ut.etag[s]=C)),204===e||"HEAD"===h.type?w="nocontent":304===e?w="notmodified":(w=v.state,d=v.data,_=v.error,o=!_)):(_=w,(e||!w)&&(w="error",0>e&&(e=0))),T.status=e,T.statusText=(n||w)+"",o?m.resolveWith(p,[d,w,T]):m.rejectWith(p,[T,w,_]),T.statusCode(y),y=t,c&&f.trigger(o?"ajaxSuccess":"ajaxError",[T,h,o?d:_]),g.fireWith(p,[T,w]),c&&(f.trigger("ajaxComplete",[T,h]),--ut.active||ut.event.trigger("ajaxStop")))}"object"==typeof e&&(n=e,e=t),n=n||{};var i,o,s,a,l,c,u,d,h=ut.ajaxSetup({},n),p=h.context||h,f=h.context&&(p.nodeType||p.jquery)?ut(p):ut.event,m=ut.Deferred(),g=ut.Callbacks("once memory"),y=h.statusCode||{},_={},v={},b=0,C="canceled",T={readyState:0,getResponseHeader:function(e){var t;if(2===b){if(!d)for(d={};t=Dn.exec(a);)d[t[1].toLowerCase()]=t[2];t=d[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===b?a:null},setRequestHeader:function(e,t){var n=e.toLowerCase();return b||(e=v[n]=v[n]||e,_[e]=t),this},overrideMimeType:function(e){return b||(h.mimeType=e),this},statusCode:function(e){var t;if(e)if(2>b)for(t in e)y[t]=[y[t],e[t]];else T.always(e[T.status]);return this},abort:function(e){var t=e||C;return u&&u.abort(t),r(0,t),this}};if(m.promise(T).complete=g.add,T.success=T.done,T.error=T.fail,h.url=((e||h.url||An)+"").replace(On,"").replace(Hn,Ln[1]+"//"),h.type=n.method||n.type||h.method||h.type,h.dataTypes=ut.trim(h.dataType||"*").toLowerCase().match(ht)||[""],null==h.crossDomain&&(i=Bn.exec(h.url.toLowerCase()),h.crossDomain=!(!i||i[1]===Ln[1]&&i[2]===Ln[2]&&(i[3]||("http:"===i[1]?"80":"443"))===(Ln[3]||("http:"===Ln[1]?"80":"443")))),h.data&&h.processData&&"string"!=typeof h.data&&(h.data=ut.param(h.data,h.traditional)),A(Fn,h,n,T),2===b)return T;c=h.global,c&&0===ut.active++&&ut.event.trigger("ajaxStart"),h.type=h.type.toUpperCase(),h.hasContent=!Pn.test(h.type),s=h.url,h.hasContent||(h.data&&(s=h.url+=(In.test(s)?"&":"?")+h.data,delete h.data),h.cache===!1&&(h.url=kn.test(s)?s.replace(kn,"$1_="+Yn++):s+(In.test(s)?"&":"?")+"_="+Yn++)),h.ifModified&&(ut.lastModified[s]&&T.setRequestHeader("If-Modified-Since",ut.lastModified[s]),ut.etag[s]&&T.setRequestHeader("If-None-Match",ut.etag[s])),(h.data&&h.hasContent&&h.contentType!==!1||n.contentType)&&T.setRequestHeader("Content-Type",h.contentType),T.setRequestHeader("Accept",h.dataTypes[0]&&h.accepts[h.dataTypes[0]]?h.accepts[h.dataTypes[0]]+("*"!==h.dataTypes[0]?", "+Xn+"; q=0.01":""):h.accepts["*"]);for(o in h.headers)T.setRequestHeader(o,h.headers[o]);if(h.beforeSend&&(h.beforeSend.call(p,T,h)===!1||2===b))return T.abort();C="abort";for(o in{success:1,error:1,complete:1})T[o](h[o]);if(u=A(qn,h,n,T)){T.readyState=1,c&&f.trigger("ajaxSend",[T,h]),h.async&&h.timeout>0&&(l=setTimeout(function(){T.abort("timeout")},h.timeout));try{b=1,u.send(_,r)}catch(w){if(!(2>b))throw w;r(-1,w)}}else r(-1,"No Transport");return T},getJSON:function(e,t,n){return ut.get(e,t,n,"json")},getScript:function(e,n){return ut.get(e,t,n,"script")}}),ut.each(["get","post"],function(e,n){ut[n]=function(e,r,i,o){return ut.isFunction(r)&&(o=o||i,i=r,r=t),ut.ajax({url:e,type:n,dataType:o,data:r,success:i})}}),ut.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(e){return ut.globalEval(e),e}}}),ut.ajaxPrefilter("script",function(e){e.cache===t&&(e.cache=!1),e.crossDomain&&(e.type="GET",e.global=!1)}),ut.ajaxTransport("script",function(e){if(e.crossDomain){var n,r=G.head||ut("head")[0]||G.documentElement;return{send:function(t,i){n=G.createElement("script"),n.async=!0,e.scriptCharset&&(n.charset=e.scriptCharset),n.src=e.url,n.onload=n.onreadystatechange=function(e,t){(t||!n.readyState||/loaded|complete/.test(n.readyState))&&(n.onload=n.onreadystatechange=null,n.parentNode&&n.parentNode.removeChild(n),n=null,t||i(200,"success"))},r.insertBefore(n,r.firstChild)},abort:function(){n&&n.onload(t,!0)}}}});var Un=[],zn=/(=)\?(?=&|$)|\?\?/;ut.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Un.pop()||ut.expando+"_"+Yn++;return this[e]=!0,e}}),ut.ajaxPrefilter("json jsonp",function(n,r,i){var o,s,a,l=n.jsonp!==!1&&(zn.test(n.url)?"url":"string"==typeof n.data&&!(n.contentType||"").indexOf("application/x-www-form-urlencoded")&&zn.test(n.data)&&"data");return l||"jsonp"===n.dataTypes[0]?(o=n.jsonpCallback=ut.isFunction(n.jsonpCallback)?n.jsonpCallback():n.jsonpCallback,l?n[l]=n[l].replace(zn,"$1"+o):n.jsonp!==!1&&(n.url+=(In.test(n.url)?"&":"?")+n.jsonp+"="+o),n.converters["script json"]=function(){return a||ut.error(o+" was not called"),a[0]},n.dataTypes[0]="json",s=e[o],e[o]=function(){a=arguments},i.always(function(){e[o]=s,n[o]&&(n.jsonpCallback=r.jsonpCallback,Un.push(o)),a&&ut.isFunction(s)&&s(a[0]),a=s=t}),"script"):void 0});var Kn,Gn,Vn=0,Jn=e.ActiveXObject&&function(){var e;for(e in Kn)Kn[e](t,!0)};ut.ajaxSettings.xhr=e.ActiveXObject?function(){return!this.isLocal&&k()||D()}:k,Gn=ut.ajaxSettings.xhr(),ut.support.cors=!!Gn&&"withCredentials"in Gn,Gn=ut.support.ajax=!!Gn,Gn&&ut.ajaxTransport(function(n){if(!n.crossDomain||ut.support.cors){var r;return{send:function(i,o){var s,a,l=n.xhr();if(n.username?l.open(n.type,n.url,n.async,n.username,n.password):l.open(n.type,n.url,n.async),n.xhrFields)for(a in n.xhrFields)l[a]=n.xhrFields[a];n.mimeType&&l.overrideMimeType&&l.overrideMimeType(n.mimeType),n.crossDomain||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest");try{for(a in i)l.setRequestHeader(a,i[a])}catch(c){}l.send(n.hasContent&&n.data||null),r=function(e,i){var a,c,u,d;try{if(r&&(i||4===l.readyState))if(r=t,s&&(l.onreadystatechange=ut.noop,Jn&&delete Kn[s]),i)4!==l.readyState&&l.abort();else{d={},a=l.status,c=l.getAllResponseHeaders(),"string"==typeof l.responseText&&(d.text=l.responseText);try{u=l.statusText}catch(h){u=""}a||!n.isLocal||n.crossDomain?1223===a&&(a=204):a=d.text?200:404}}catch(p){i||o(-1,p)}d&&o(a,u,d,c)},n.async?4===l.readyState?setTimeout(r):(s=++Vn,Jn&&(Kn||(Kn={},ut(e).unload(Jn)),Kn[s]=r),l.onreadystatechange=r):r()},abort:function(){r&&r(t,!0)}}}});var Zn,er,tr=/^(?:toggle|show|hide)$/,nr=new RegExp("^(?:([+-])=|)("+dt+")([a-z%]*)$","i"),rr=/queueHooks$/,ir=[Q],or={"*":[function(e,t){var n=this.createTween(e,t),r=n.cur(),i=nr.exec(t),o=i&&i[3]||(ut.cssNumber[e]?"":"px"),s=(ut.cssNumber[e]||"px"!==o&&+r)&&nr.exec(ut.css(n.elem,e)),a=1,l=20;if(s&&s[3]!==o){o=o||s[3],i=i||[],s=+r||1;do a=a||".5",s/=a,ut.style(n.elem,e,s+o);while(a!==(a=n.cur()/r)&&1!==a&&--l)}return i&&(s=n.start=+s||+r||0,n.unit=o,n.end=i[1]?s+(i[1]+1)*i[2]:+i[2]),n}]};ut.Animation=ut.extend(H,{tweener:function(e,t){ut.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");for(var n,r=0,i=e.length;i>r;r++)n=e[r],or[n]=or[n]||[],or[n].unshift(t)},prefilter:function(e,t){t?ir.unshift(e):ir.push(e)}}),ut.Tween=F,F.prototype={constructor:F,init:function(e,t,n,r,i,o){this.elem=e,this.prop=n,this.easing=i||"swing",this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=o||(ut.cssNumber[n]?"":"px")},cur:function(){var e=F.propHooks[this.prop];return e&&e.get?e.get(this):F.propHooks._default.get(this)},run:function(e){var t,n=F.propHooks[this.prop];return this.pos=t=this.options.duration?ut.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):F.propHooks._default.set(this),this}},F.prototype.init.prototype=F.prototype,F.propHooks={_default:{get:function(e){var t;return null==e.elem[e.prop]||e.elem.style&&null!=e.elem.style[e.prop]?(t=ut.css(e.elem,e.prop,""),t&&"auto"!==t?t:0):e.elem[e.prop]},set:function(e){ut.fx.step[e.prop]?ut.fx.step[e.prop](e):e.elem.style&&(null!=e.elem.style[ut.cssProps[e.prop]]||ut.cssHooks[e.prop])?ut.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},F.propHooks.scrollTop=F.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},ut.each(["toggle","show","hide"],function(e,t){var n=ut.fn[t];ut.fn[t]=function(e,r,i){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(q(t,!0),e,r,i)}}),ut.fn.extend({fadeTo:function(e,t,n,r){return this.filter(w).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var i=ut.isEmptyObject(e),o=ut.speed(t,n,r),s=function(){var t=H(this,ut.extend({},e),o);(i||ut._data(this,"finish"))&&t.stop(!0)};return s.finish=s,i||o.queue===!1?this.each(s):this.queue(o.queue,s)},stop:function(e,n,r){var i=function(e){var t=e.stop;delete e.stop,t(r)};return"string"!=typeof e&&(r=n,n=e,e=t),n&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,n=null!=e&&e+"queueHooks",o=ut.timers,s=ut._data(this);if(n)s[n]&&s[n].stop&&i(s[n]);else for(n in s)s[n]&&s[n].stop&&rr.test(n)&&i(s[n]);for(n=o.length;n--;)o[n].elem!==this||null!=e&&o[n].queue!==e||(o[n].anim.stop(r),t=!1,o.splice(n,1));(t||!r)&&ut.dequeue(this,e)})},finish:function(e){return e!==!1&&(e=e||"fx"),this.each(function(){var t,n=ut._data(this),r=n[e+"queue"],i=n[e+"queueHooks"],o=ut.timers,s=r?r.length:0;for(n.finish=!0,ut.queue(this,e,[]),i&&i.stop&&i.stop.call(this,!0),t=o.length;t--;)o[t].elem===this&&o[t].queue===e&&(o[t].anim.stop(!0),o.splice(t,1));for(t=0;s>t;t++)r[t]&&r[t].finish&&r[t].finish.call(this);delete n.finish})}}),ut.each({slideDown:q("show"),slideUp:q("hide"),slideToggle:q("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){ut.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),ut.speed=function(e,t,n){var r=e&&"object"==typeof e?ut.extend({},e):{complete:n||!n&&t||ut.isFunction(e)&&e,duration:e,easing:n&&t||t&&!ut.isFunction(t)&&t};return r.duration=ut.fx.off?0:"number"==typeof r.duration?r.duration:r.duration in ut.fx.speeds?ut.fx.speeds[r.duration]:ut.fx.speeds._default,(null==r.queue||r.queue===!0)&&(r.queue="fx"),r.old=r.complete,r.complete=function(){ut.isFunction(r.old)&&r.old.call(this),r.queue&&ut.dequeue(this,r.queue)},r},ut.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},ut.timers=[],ut.fx=F.prototype.init,ut.fx.tick=function(){var e,n=ut.timers,r=0;for(Zn=ut.now();r<n.length;r++)e=n[r],e()||n[r]!==e||n.splice(r--,1);n.length||ut.fx.stop(),Zn=t},ut.fx.timer=function(e){e()&&ut.timers.push(e)&&ut.fx.start()},ut.fx.interval=13,ut.fx.start=function(){er||(er=setInterval(ut.fx.tick,ut.fx.interval))},ut.fx.stop=function(){clearInterval(er),er=null},ut.fx.speeds={slow:600,fast:200,_default:400},ut.fx.step={},ut.expr&&ut.expr.filters&&(ut.expr.filters.animated=function(e){return ut.grep(ut.timers,function(t){return e===t.elem}).length}),ut.fn.offset=function(e){if(arguments.length)return e===t?this:this.each(function(t){ut.offset.setOffset(this,e,t)});var n,r,i={top:0,left:0},o=this[0],s=o&&o.ownerDocument;if(s)return n=s.documentElement,ut.contains(n,o)?(typeof o.getBoundingClientRect!==z&&(i=o.getBoundingClientRect()),r=X(s),{top:i.top+(r.pageYOffset||n.scrollTop)-(n.clientTop||0),left:i.left+(r.pageXOffset||n.scrollLeft)-(n.clientLeft||0)}):i},ut.offset={setOffset:function(e,t,n){var r=ut.css(e,"position");"static"===r&&(e.style.position="relative");var i,o,s=ut(e),a=s.offset(),l=ut.css(e,"top"),c=ut.css(e,"left"),u=("absolute"===r||"fixed"===r)&&ut.inArray("auto",[l,c])>-1,d={},h={};u?(h=s.position(),i=h.top,o=h.left):(i=parseFloat(l)||0,o=parseFloat(c)||0),ut.isFunction(t)&&(t=t.call(e,n,a)),null!=t.top&&(d.top=t.top-a.top+i),null!=t.left&&(d.left=t.left-a.left+o),"using"in t?t.using.call(e,d):s.css(d)}},ut.fn.extend({position:function(){if(this[0]){var e,t,n={top:0,left:0},r=this[0];return"fixed"===ut.css(r,"position")?t=r.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),ut.nodeName(e[0],"html")||(n=e.offset()),n.top+=ut.css(e[0],"borderTopWidth",!0),n.left+=ut.css(e[0],"borderLeftWidth",!0)),{top:t.top-n.top-ut.css(r,"marginTop",!0),left:t.left-n.left-ut.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent||V;e&&!ut.nodeName(e,"html")&&"static"===ut.css(e,"position");)e=e.offsetParent;return e||V})}}),ut.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,n){var r=/Y/.test(n);ut.fn[e]=function(i){return ut.access(this,function(e,i,o){var s=X(e);return o===t?s?n in s?s[n]:s.document.documentElement[i]:e[i]:(s?s.scrollTo(r?ut(s).scrollLeft():o,r?o:ut(s).scrollTop()):e[i]=o,void 0)},e,i,arguments.length,null)}}),ut.each({Height:"height",Width:"width"},function(e,n){ut.each({padding:"inner"+e,content:n,"":"outer"+e},function(r,i){ut.fn[i]=function(i,o){var s=arguments.length&&(r||"boolean"!=typeof i),a=r||(i===!0||o===!0?"margin":"border");return ut.access(this,function(n,r,i){var o;return ut.isWindow(n)?n.document.documentElement["client"+e]:9===n.nodeType?(o=n.documentElement,Math.max(n.body["scroll"+e],o["scroll"+e],n.body["offset"+e],o["offset"+e],o["client"+e])):i===t?ut.css(n,r,a):ut.style(n,r,i,a)},n,s?i:t,s,null)}})}),ut.fn.size=function(){return this.length},ut.fn.andSelf=ut.fn.addBack,"object"==typeof module&&module&&"object"==typeof module.exports?module.exports=ut:(e.jQuery=e.$=ut,"function"==typeof define&&define.amd&&define("jquery",[],function(){return ut}))}(window),function(e,t){e.rails!==t&&e.error("jquery-ujs has already been loaded!");var n,r=e(document);e.rails=n={linkClickSelector:"a[data-confirm], a[data-method], a[data-remote], a[data-disable-with]",buttonClickSelector:"button[data-remote]",inputChangeSelector:"select[data-remote], input[data-remote], textarea[data-remote]",formSubmitSelector:"form",formInputClickSelector:"form input[type=submit], form input[type=image], form button[type=submit], form button:not([type])",disableSelector:"input[data-disable-with], button[data-disable-with], textarea[data-disable-with]",enableSelector:"input[data-disable-with]:disabled, button[data-disable-with]:disabled, textarea[data-disable-with]:disabled",requiredInputSelector:"input[name][required]:not([disabled]),textarea[name][required]:not([disabled])",fileInputSelector:"input[type=file]",linkDisableSelector:"a[data-disable-with]",CSRFProtection:function(t){var n=e('meta[name="csrf-token"]').attr("content");n&&t.setRequestHeader("X-CSRF-Token",n)},fire:function(t,n,r){var i=e.Event(n);return t.trigger(i,r),i.result!==!1},confirm:function(e){return confirm(e)},ajax:function(t){return e.ajax(t)},href:function(e){return e.attr("href")},handleRemote:function(r){var i,o,s,a,l,c,u,d;if(n.fire(r,"ajax:before")){if(a=r.data("cross-domain"),l=a===t?null:a,c=r.data("with-credentials")||null,u=r.data("type")||e.ajaxSettings&&e.ajaxSettings.dataType,r.is("form")){i=r.attr("method"),o=r.attr("action"),s=r.serializeArray();var h=r.data("ujs:submit-button");h&&(s.push(h),r.data("ujs:submit-button",null))}else r.is(n.inputChangeSelector)?(i=r.data("method"),o=r.data("url"),s=r.serialize(),r.data("params")&&(s=s+"&"+r.data("params"))):r.is(n.buttonClickSelector)?(i=r.data("method")||"get",o=r.data("url"),s=r.serialize(),r.data("params")&&(s=s+"&"+r.data("params"))):(i=r.data("method"),o=n.href(r),s=r.data("params")||null);d={type:i||"GET",data:s,dataType:u,beforeSend:function(e,i){return i.dataType===t&&e.setRequestHeader("accept","*/*;q=0.5, "+i.accepts.script),n.fire(r,"ajax:beforeSend",[e,i])},success:function(e,t,n){r.trigger("ajax:success",[e,t,n])},complete:function(e,t){r.trigger("ajax:complete",[e,t])},error:function(e,t,n){r.trigger("ajax:error",[e,t,n])},crossDomain:l},c&&(d.xhrFields={withCredentials:c}),o&&(d.url=o);var p=n.ajax(d);return r.trigger("ajax:send",p),p}return!1},handleMethod:function(r){var i=n.href(r),o=r.data("method"),s=r.attr("target"),a=e("meta[name=csrf-token]").attr("content"),l=e("meta[name=csrf-param]").attr("content"),c=e('<form method="post" action="'+i+'"></form>'),u='<input name="_method" value="'+o+'" type="hidden" />';l!==t&&a!==t&&(u+='<input name="'+l+'" value="'+a+'" type="hidden" />'),s&&c.attr("target",s),c.hide().append(u).appendTo("body"),c.submit()},disableFormElements:function(t){t.find(n.disableSelector).each(function(){var t=e(this),n=t.is("button")?"html":"val";t.data("ujs:enable-with",t[n]()),t[n](t.data("disable-with")),t.prop("disabled",!0)})},enableFormElements:function(t){t.find(n.enableSelector).each(function(){var t=e(this),n=t.is("button")?"html":"val";t.data("ujs:enable-with")&&t[n](t.data("ujs:enable-with")),t.prop("disabled",!1)})},allowAction:function(e){var t,r=e.data("confirm"),i=!1;return r?(n.fire(e,"confirm")&&(i=n.confirm(r),t=n.fire(e,"confirm:complete",[i])),i&&t):!0},blankInputs:function(t,n,r){var i,o,s=e(),a=n||"input,textarea",l=t.find(a);return l.each(function(){if(i=e(this),o=i.is("input[type=checkbox],input[type=radio]")?i.is(":checked"):i.val(),!o==!r){if(i.is("input[type=radio]")&&l.filter('input[type=radio]:checked[name="'+i.attr("name")+'"]').length)return!0;s=s.add(i)}}),s.length?s:!1},nonBlankInputs:function(e,t){return n.blankInputs(e,t,!0)},stopEverything:function(t){return e(t.target).trigger("ujs:everythingStopped"),t.stopImmediatePropagation(),!1},disableElement:function(e){e.data("ujs:enable-with",e.html()),e.html(e.data("disable-with")),e.bind("click.railsDisable",function(e){return n.stopEverything(e)})},enableElement:function(e){e.data("ujs:enable-with")!==t&&(e.html(e.data("ujs:enable-with")),e.removeData("ujs:enable-with")),e.unbind("click.railsDisable")}},n.fire(r,"rails:attachBindings")&&(e.ajaxPrefilter(function(e,t,r){e.crossDomain||n.CSRFProtection(r)}),r.delegate(n.linkDisableSelector,"ajax:complete",function(){n.enableElement(e(this))}),r.delegate(n.linkClickSelector,"click.rails",function(r){var i=e(this),o=i.data("method"),s=i.data("params");if(!n.allowAction(i))return n.stopEverything(r);if(i.is(n.linkDisableSelector)&&n.disableElement(i),i.data("remote")!==t){if(!(!r.metaKey&&!r.ctrlKey||o&&"GET"!==o||s))return!0;var a=n.handleRemote(i);return a===!1?n.enableElement(i):a.error(function(){n.enableElement(i)}),!1}return i.data("method")?(n.handleMethod(i),!1):void 0}),r.delegate(n.buttonClickSelector,"click.rails",function(t){var r=e(this);return n.allowAction(r)?(n.handleRemote(r),!1):n.stopEverything(t)}),r.delegate(n.inputChangeSelector,"change.rails",function(t){var r=e(this);return n.allowAction(r)?(n.handleRemote(r),!1):n.stopEverything(t)}),r.delegate(n.formSubmitSelector,"submit.rails",function(r){var i=e(this),o=i.data("remote")!==t,s=n.blankInputs(i,n.requiredInputSelector),a=n.nonBlankInputs(i,n.fileInputSelector);if(!n.allowAction(i))return n.stopEverything(r);if(s&&i.attr("novalidate")==t&&n.fire(i,"ajax:aborted:required",[s]))return n.stopEverything(r);
if(o){if(a){setTimeout(function(){n.disableFormElements(i)},13);var l=n.fire(i,"ajax:aborted:file",[a]);return l||setTimeout(function(){n.enableFormElements(i)},13),l}return n.handleRemote(i),!1}setTimeout(function(){n.disableFormElements(i)},13)}),r.delegate(n.formInputClickSelector,"click.rails",function(t){var r=e(this);if(!n.allowAction(r))return n.stopEverything(t);var i=r.attr("name"),o=i?{name:i,value:r.val()}:null;r.closest("form").data("ujs:submit-button",o)}),r.delegate(n.formSubmitSelector,"ajax:beforeSend.rails",function(t){this==t.target&&n.disableFormElements(e(this))}),r.delegate(n.formSubmitSelector,"ajax:complete.rails",function(t){this==t.target&&n.enableFormElements(e(this))}),e(function(){var t=e("meta[name=csrf-token]").attr("content"),n=e("meta[name=csrf-param]").attr("content");e('form input[name="'+n+'"]').val(t)}))}(jQuery),function(){var e,t,n,r,i,o,s,a,l,c,u,d,h,p,f,m,g,y,_,v,b,C,T,w,E,S,x,N,M,W,R,L,A,Y,I,O,k,D,j,P,H,B,Q,F,q,X,$,U,z,K,G,V={}.hasOwnProperty,J=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1};W={},a=10,h=null,S=null,O=null,u=null,K=null,y=function(e){return H(),s(),U("page:fetch",{url:e}),null!=K&&K.abort(),K=new XMLHttpRequest,K.open("GET",Q(e),!0),K.setRequestHeader("Accept","text/html, application/xhtml+xml, application/xml"),K.setRequestHeader("X-XHR-Referer",O),K.onload=function(){var t;return U("page:receive"),(t=Y())?(k(e),l.apply(null,m(t)),D(),X(),U("page:load")):document.location.href=e},K.onloadend=function(){return K=null},K.onabort=function(){return P()},K.onerror=function(){return document.location.href=e},K.send()},g=function(e){return s(),null!=K&&K.abort(),l(e.title,e.body),I(e),U("page:restore")},s=function(){return W[h.position]={url:document.location.href,body:document.body,title:document.title,positionY:window.pageYOffset,positionX:window.pageXOffset},c(a)},L=function(e){return null==e&&(e=a),/^[\d]+$/.test(e)?a=parseInt(e):void 0},c=function(e){var t,n;for(t in W)V.call(W,t)&&(n=W[t],t<=h.position-e&&(W[t]=null))},l=function(t,n,r,i){return document.title=t,document.documentElement.replaceChild(n,document.body),null!=r&&e.update(r),F(),i&&p(),h=window.history.state,U("page:change"),U("page:update")},p=function(){var e,t,n,r,i,o,s,a,l,c,u,d;for(o=Array.prototype.slice.call(document.body.querySelectorAll('script:not([data-turbolinks-eval="false"])')),s=0,l=o.length;l>s;s++)if(i=o[s],""===(u=i.type)||"text/javascript"===u){for(t=document.createElement("script"),d=i.attributes,a=0,c=d.length;c>a;a++)e=d[a],t.setAttribute(e.name,e.value);t.appendChild(document.createTextNode(i.innerHTML)),r=i.parentNode,n=i.nextSibling,r.removeChild(i),r.insertBefore(t,n)}},F=function(){var e,t,n,r;for(t=Array.prototype.slice.call(document.body.getElementsByTagName("noscript")),n=0,r=t.length;r>n;n++)e=t[n],e.parentNode.removeChild(e)},k=function(e){return e!==O?window.history.pushState({turbolinks:!0,position:h.position+1},"",e):void 0},D=function(){var e,t;return(e=K.getResponseHeader("X-XHR-Redirected-To"))?(t=B(e)===e?document.location.hash:"",window.history.replaceState(h,"",e+t)):void 0},H=function(){return O=document.location.href},P=function(){return window.history.replaceState({turbolinks:!0,position:Date.now()},"",document.location.href)},j=function(){return h=window.history.state},I=function(e){return window.scrollTo(e.positionX,e.positionY)},X=function(){return document.location.hash?document.location.href=document.location.href:window.scrollTo(0,0)},Q=function(e){return B(e)},B=function(e){var t;return t=e,null==e.href&&(t=document.createElement("A"),t.href=e),t.href.replace(t.hash,"")},A=function(e){var t,n;return t=(null!=(n=document.cookie.match(new RegExp(e+"=(\\w+)")))?n[1].toUpperCase():void 0)||"",document.cookie=e+"=; expires=Thu, 01-Jan-70 00:00:01 GMT; path=/",t},U=function(e,t){var n;return n=document.createEvent("Events"),t&&(n.data=t),n.initEvent(e,!0,!0),document.dispatchEvent(n)},R=function(){return!U("page:before-change")},Y=function(){var e,t,n,r,i,o;return t=function(){var e;return 400<=(e=K.status)&&600>e},o=function(){return K.getResponseHeader("Content-Type").match(/^(?:text\/html|application\/xhtml\+xml|application\/xml)(?:;|$)/)},r=function(e){var t,n,r,i,o;for(i=e.head.childNodes,o=[],n=0,r=i.length;r>n;n++)t=i[n],null!=("function"==typeof t.getAttribute?t.getAttribute("data-turbolinks-track"):void 0)&&o.push(t.getAttribute("src")||t.getAttribute("href"));return o},e=function(e){var t;return S||(S=r(document)),t=r(e),t.length!==S.length||i(t,S).length!==S.length},i=function(e,t){var n,r,i,o,s;for(e.length>t.length&&(o=[t,e],e=o[0],t=o[1]),s=[],r=0,i=e.length;i>r;r++)n=e[r],J.call(t,n)>=0&&s.push(n);return s},!t()&&o()&&(n=u(K.responseText),n&&!e(n))?n:void 0},m=function(t){var n;return n=t.querySelector("title"),[null!=n?n.textContent:void 0,t.body,e.get(t).token,"runScripts"]},e={get:function(e){var t;return null==e&&(e=document),{node:t=e.querySelector('meta[name="csrf-token"]'),token:null!=t?"function"==typeof t.getAttribute?t.getAttribute("content"):void 0:void 0}},update:function(e){var t;return t=this.get(),null!=t.token&&null!=e&&t.token!==e?t.node.setAttribute("content",e):void 0}},n=function(){var e,t,n,r,i,o;t=function(e){return(new DOMParser).parseFromString(e,"text/html")},e=function(e){var t;return t=document.implementation.createHTMLDocument(""),t.documentElement.innerHTML=e,t},n=function(e){var t;return t=document.implementation.createHTMLDocument(""),t.open("replace"),t.write(e),t.close(),t};try{if(window.DOMParser)return i=t("<html><body><p>test"),t}catch(s){return r=s,i=e("<html><body><p>test"),e}finally{if(1!==(null!=i?null!=(o=i.body)?o.childNodes.length:void 0:void 0))return n}},C=function(e){return e.defaultPrevented?void 0:(document.removeEventListener("click",_,!1),document.addEventListener("click",_,!1))},_=function(e){var t;return e.defaultPrevented||(t=f(e),"A"!==t.nodeName||v(e,t))?void 0:(R()||z(t.href),e.preventDefault())},f=function(e){var t;for(t=e.target;t.parentNode&&"A"!==t.nodeName;)t=t.parentNode;return t},d=function(e){return location.protocol!==e.protocol||location.host!==e.host},t=function(e){return(e.hash&&B(e))===B(location)||e.href===location.href+"#"},N=function(e){var t;return t=B(e),t.match(/\.[a-z]+(\?.*)?$/g)&&!t.match(/\.html?(\?.*)?$/g)},x=function(e){for(var t;!t&&e!==document;)t=null!=e.getAttribute("data-no-turbolink"),e=e.parentNode;return t},$=function(e){return 0!==e.target.length},M=function(e){return e.which>1||e.metaKey||e.ctrlKey||e.shiftKey||e.altKey},v=function(e,n){return d(n)||t(n)||N(n)||x(n)||$(n)||M(e)},T=function(){return document.addEventListener("DOMContentLoaded",function(){return U("page:change"),U("page:update")},!0)},E=function(){return"undefined"!=typeof jQuery?jQuery(document).on("ajaxSuccess",function(e,t){return jQuery.trim(t.responseText)?U("page:update"):void 0}):void 0},w=function(e){var t,n;return(null!=(n=e.state)?n.turbolinks:void 0)?(t=W[e.state.position])?g(t):z(e.target.location.href):void 0},b=function(){return P(),j(),u=n(),document.addEventListener("click",C,!0),window.addEventListener("popstate",w,!1)},i=window.history&&window.history.pushState&&window.history.replaceState&&void 0!==window.history.state,r=!navigator.userAgent.match(/CriOS\//),q="GET"===(G=A("request_method"))||""===G,o=i&&r&&q,T(),E(),o?(z=y,b()):z=function(e){return document.location.href=e},this.Turbolinks={visit:z,pagesCached:L,supported:o}}.call(this),function(){}.call(this),function(){}.call(this),"undefined"==typeof WYMeditor&&(WYMeditor={}),!function(){if("undefined"==typeof window.console&&"undefined"==typeof console){var e,t=["log","debug","info","warn","error","assert","dir","dirxml","group","groupEnd","time","timeEnd","count","trace","profile","profileEnd"],n=function(){};for(WYMeditor.console={},e=0;e<t.length;e+=1)WYMeditor.console[t[e]]=n}else console?WYMeditor.console=console:window.console.firebug?WYMeditor.console=window.console:window.console&&(WYMeditor.console=window.console)}(),jQuery.extend(WYMeditor,{VERSION:"1.0.0b5",INSTANCES:[],STRINGS:[],SKINS:[],NAME:"name",INDEX:"{Wym_Index}",WYM_INDEX:"wym_index",BASE_PATH:"{Wym_Base_Path}",CSS_PATH:"{Wym_Css_Path}",WYM_PATH:"{Wym_Wym_Path}",SKINS_DEFAULT_PATH:"skins/",SKINS_DEFAULT_CSS:"skin.css",SKINS_DEFAULT_JS:"skin.js",LANG_DEFAULT_PATH:"lang/",IFRAME_BASE_PATH:"{Wym_Iframe_Base_Path}",IFRAME_DEFAULT:"iframe/default/",JQUERY_PATH:"{Wym_Jquery_Path}",DIRECTION:"{Wym_Direction}",LOGO:"{Wym_Logo}",TOOLS:"{Wym_Tools}",TOOLS_ITEMS:"{Wym_Tools_Items}",TOOL_NAME:"{Wym_Tool_Name}",TOOL_TITLE:"{Wym_Tool_Title}",TOOL_CLASS:"{Wym_Tool_Class}",CLASSES:"{Wym_Classes}",CLASSES_ITEMS:"{Wym_Classes_Items}",CLASS_NAME:"{Wym_Class_Name}",CLASS_TITLE:"{Wym_Class_Title}",CONTAINERS:"{Wym_Containers}",CONTAINERS_ITEMS:"{Wym_Containers_Items}",CONTAINER_NAME:"{Wym_Container_Name}",CONTAINER_TITLE:"{Wym_Containers_Title}",CONTAINER_CLASS:"{Wym_Container_Class}",HTML:"{Wym_Html}",IFRAME:"{Wym_Iframe}",STATUS:"{Wym_Status}",DIALOG_TITLE:"{Wym_Dialog_Title}",DIALOG_BODY:"{Wym_Dialog_Body}",NEWLINE:"\n",STRING:"string",BODY:"body",DIV:"div",P:"p",H1:"h1",H2:"h2",H3:"h3",H4:"h4",H5:"h5",H6:"h6",PRE:"pre",BLOCKQUOTE:"blockquote",A:"a",BR:"br",IMG:"img",TABLE:"table",TR:"tr",TD:"td",TH:"th",UL:"ul",OL:"ol",LI:"li",CLASS:"class",HREF:"href",SRC:"src",TITLE:"title",REL:"rel",ALT:"alt",DIALOG_LINK:"Link",DIALOG_IMAGE:"Image",DIALOG_TABLE:"Table",DIALOG_PASTE:"Paste_From_Word",BOLD:"Bold",ITALIC:"Italic",CREATE_LINK:"CreateLink",INSERT_IMAGE:"InsertImage",INSERT_TABLE:"InsertTable",INSERT_HTML:"InsertHTML",PASTE:"Paste",INDENT:"Indent",OUTDENT:"Outdent",TOGGLE_HTML:"ToggleHtml",FORMAT_BLOCK:"FormatBlock",PREVIEW:"Preview",UNLINK:"Unlink",INSERT_UNORDEREDLIST:"InsertUnorderedList",INSERT_ORDEREDLIST:"InsertOrderedList",MAIN_CONTAINERS:["p","div","h1","h2","h3","h4","h5","h6","pre","blockquote"],FORBIDDEN_MAIN_CONTAINERS:["strong","b","em","i","sub","sup","a","span"],BLOCKS:["address","blockquote","div","dl","fieldset","form","h1","h2","h3","h4","h5","h6","hr","noscript","ol","p","pre","table","ul","dd","dt","li","tbody","td","tfoot","th","thead","tr"],BLOCKING_ELEMENTS:["table","blockquote","pre"],NON_BLOCKING_ELEMENTS:["p","div","h1","h2","h3","h4","h5","h6"],LIST_TYPE_ELEMENTS:["ul","ol"],HEADING_ELEMENTS:["h1","h2","h3","h4","h5","h6"],POTENTIAL_LIST_ELEMENTS:["p","div","h1","h2","h3","h4","h5","h6","pre","blockquote","td"],POTENTIAL_TABLE_INSERT_ELEMENTS:["p","div","h1","h2","h3","h4","h5","h6","pre","blockquote","li"],INLINE_TABLE_INSERTION_ELEMENTS:["li"],SELECTABLE_TABLE_ELEMENTS:["td","th","caption"],BLOCKING_ELEMENT_SPACER_CLASS:"wym-blocking-element-spacer",EDITOR_ONLY_CLASS:"wym-editor-only",CLASSES_REMOVED_BY_PARSER:["apple-style-span"],KEY:{BACKSPACE:8,TAB:9,ENTER:13,CTRL:17,END:35,HOME:36,CURSOR:[37,38,39,40],LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46,B:66,I:73,R:82,COMMAND:224},POTENTIAL_BLOCK_ELEMENT_CREATION_KEYS:[8,13,37,38,39,40,46],NODE:{ELEMENT:1,ATTRIBUTE:2,TEXT:3},editor:function(e,t){this._index=WYMeditor.INSTANCES.push(this)-1,this._element=e,this._options=t,this._options.html||(this._options.html=jQuery(e).val()),this._options.wymPath=this._options.wymPath||WYMeditor.computeWymPath(),this._options.basePath=this._options.basePath||WYMeditor.computeBasePath(this._options.wymPath),this._options.jQueryPath=this._options.jQueryPath||WYMeditor.computeJqueryPath(),this._options.skinPath=this._options.skinPath||this._options.basePath+WYMeditor.SKINS_DEFAULT_PATH+this._options.skin+"/",this._options.langPath=this._options.langPath||this._options.basePath+WYMeditor.LANG_DEFAULT_PATH,this._options.iframeBasePath=this._options.iframeBasePath||this._options.basePath+WYMeditor.IFRAME_DEFAULT,this.init()}}),jQuery.fn.wymeditor=function(e){return e=jQuery.extend({html:"",basePath:!1,skinPath:!1,wymPath:!1,iframeBasePath:!1,jQueryPath:!1,styles:!1,stylesheet:!1,skin:"default",initSkin:!0,loadSkin:!0,lang:"en",direction:"ltr",customCommands:[],structureRules:{defaultRootContainer:"p"},boxHtml:String()+"<div class='wym_box'><div class='wym_area_top'>"+WYMeditor.TOOLS+"</div><div class='wym_area_left'></div><div class='wym_area_right'>"+WYMeditor.CONTAINERS+WYMeditor.CLASSES+"</div><div class='wym_area_main'>"+WYMeditor.HTML+WYMeditor.IFRAME+WYMeditor.STATUS+"</div><div class='wym_area_bottom'>"+WYMeditor.LOGO+"</div></div>",logoHtml:String()+'<a class="wym_wymeditor_link" href="http://www.wymeditor.org/">WYMeditor</a>',iframeHtml:String()+'<div class="wym_iframe wym_section"><iframe src="'+WYMeditor.IFRAME_BASE_PATH+'wymiframe.html" onload="this.contentWindow.parent.WYMeditor.INSTANCES['+WYMeditor.INDEX+'].initIframe(this)"></iframe></div>',editorStyles:[],toolsHtml:String()+'<div class="wym_tools wym_section"><h2>{Tools}</h2><ul>'+WYMeditor.TOOLS_ITEMS+"</ul></div>",toolsItemHtml:String()+'<li class="'+WYMeditor.TOOL_CLASS+'"><a href="#" name="'+WYMeditor.TOOL_NAME+'" title="'+WYMeditor.TOOL_TITLE+'">'+WYMeditor.TOOL_TITLE+"</a></li>",toolsItems:[{name:"Bold",title:"Strong",css:"wym_tools_strong"},{name:"Italic",title:"Emphasis",css:"wym_tools_emphasis"},{name:"Superscript",title:"Superscript",css:"wym_tools_superscript"},{name:"Subscript",title:"Subscript",css:"wym_tools_subscript"},{name:"InsertOrderedList",title:"Ordered_List",css:"wym_tools_ordered_list"},{name:"InsertUnorderedList",title:"Unordered_List",css:"wym_tools_unordered_list"},{name:"Indent",title:"Indent",css:"wym_tools_indent"},{name:"Outdent",title:"Outdent",css:"wym_tools_outdent"},{name:"Undo",title:"Undo",css:"wym_tools_undo"},{name:"Redo",title:"Redo",css:"wym_tools_redo"},{name:"CreateLink",title:"Link",css:"wym_tools_link"},{name:"Unlink",title:"Unlink",css:"wym_tools_unlink"},{name:"InsertImage",title:"Image",css:"wym_tools_image"},{name:"InsertTable",title:"Table",css:"wym_tools_table"},{name:"Paste",title:"Paste_From_Word",css:"wym_tools_paste"},{name:"ToggleHtml",title:"HTML",css:"wym_tools_html"},{name:"Preview",title:"Preview",css:"wym_tools_preview"}],containersHtml:String()+'<div class="wym_containers wym_section"><h2>{Containers}</h2><ul>'+WYMeditor.CONTAINERS_ITEMS+"</ul></div>",containersItemHtml:String()+'<li class="'+WYMeditor.CONTAINER_CLASS+'"><a href="#" name="'+WYMeditor.CONTAINER_NAME+'">'+WYMeditor.CONTAINER_TITLE+"</a></li>",containersItems:[{name:"P",title:"Paragraph",css:"wym_containers_p"},{name:"H1",title:"Heading_1",css:"wym_containers_h1"},{name:"H2",title:"Heading_2",css:"wym_containers_h2"},{name:"H3",title:"Heading_3",css:"wym_containers_h3"},{name:"H4",title:"Heading_4",css:"wym_containers_h4"},{name:"H5",title:"Heading_5",css:"wym_containers_h5"},{name:"H6",title:"Heading_6",css:"wym_containers_h6"},{name:"PRE",title:"Preformatted",css:"wym_containers_pre"},{name:"BLOCKQUOTE",title:"Blockquote",css:"wym_containers_blockquote"},{name:"TH",title:"Table_Header",css:"wym_containers_th"}],classesHtml:String()+'<div class="wym_classes wym_section"><h2>{Classes}</h2><ul>'+WYMeditor.CLASSES_ITEMS+"</ul></div>",classesItemHtml:String()+'<li class="wym_classes_'+WYMeditor.CLASS_NAME+'"><a href="#" name="'+WYMeditor.CLASS_NAME+'">'+WYMeditor.CLASS_TITLE+"</a></li>",classesItems:[],statusHtml:String()+'<div class="wym_status wym_section"><h2>{Status}</h2></div>',htmlHtml:String()+'<div class="wym_html wym_section"><h2>{Source_Code}</h2><textarea class="wym_html_val"></textarea></div>',boxSelector:".wym_box",toolsSelector:".wym_tools",toolsListSelector:" ul",containersSelector:".wym_containers",classesSelector:".wym_classes",htmlSelector:".wym_html",iframeSelector:".wym_iframe iframe",iframeBodySelector:".wym_iframe",statusSelector:".wym_status",toolSelector:".wym_tools a",containerSelector:".wym_containers a",classSelector:".wym_classes a",htmlValSelector:".wym_html_val",hrefSelector:".wym_href",srcSelector:".wym_src",titleSelector:".wym_title",relSelector:".wym_rel",altSelector:".wym_alt",textSelector:".wym_text",rowsSelector:".wym_rows",colsSelector:".wym_cols",captionSelector:".wym_caption",summarySelector:".wym_summary",submitSelector:"form",cancelSelector:".wym_cancel",previewSelector:"",dialogTypeSelector:".wym_dialog_type",dialogLinkSelector:".wym_dialog_link",dialogImageSelector:".wym_dialog_image",dialogTableSelector:".wym_dialog_table",dialogPasteSelector:".wym_dialog_paste",dialogPreviewSelector:".wym_dialog_preview",updateSelector:".wymupdate",updateEvent:"click",dialogFeatures:"menubar=no,titlebar=no,toolbar=no,resizable=no,width=560,height=300,top=0,left=0",dialogFeaturesPreview:"menubar=no,titlebar=no,toolbar=no,resizable=no,scrollbars=yes,width=560,height=300,top=0,left=0",dialogHtml:String()+'<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html dir="'+WYMeditor.DIRECTION+'"><head><link rel="stylesheet" type="text/css" media="screen" href="'+WYMeditor.CSS_PATH+'" /><title>'+WYMeditor.DIALOG_TITLE+'</title><script type="text/javascript" src="'+WYMeditor.JQUERY_PATH+'"></script><script type="text/javascript" src="'+WYMeditor.WYM_PATH+'"></script></head>'+WYMeditor.DIALOG_BODY+"</html>",dialogLinkHtml:String()+'<body class="wym_dialog wym_dialog_link"  onload="WYMeditor.INIT_DIALOG('+WYMeditor.INDEX+')"><form><fieldset><input type="hidden" class="wym_dialog_type" value="'+WYMeditor.DIALOG_LINK+'" /><legend>{Link}</legend><div class="row"><label>{URL}</label><input type="text" class="wym_href" value="" size="40" autofocus="autofocus" /></div><div class="row"><label>{Title}</label><input type="text" class="wym_title" value="" size="40" /></div><div class="row"><label>{Relationship}</label><input type="text" class="wym_rel" value="" size="40" /></div><div class="row row-indent"><input class="wym_submit" type="submit" value="{Submit}" /><input class="wym_cancel" type="button" value="{Cancel}" /></div></fieldset></form></body>',dialogImageHtml:String()+'<body class="wym_dialog wym_dialog_image" onload="WYMeditor.INIT_DIALOG('+WYMeditor.INDEX+')"><form><fieldset><input type="hidden" class="wym_dialog_type" value="'+WYMeditor.DIALOG_IMAGE+'" /><legend>{Image}</legend><div class="row"><label>{URL}</label><input type="text" class="wym_src" value="" size="40" autofocus="autofocus" /></div><div class="row"><label>{Alternative_Text}</label><input type="text" class="wym_alt" value="" size="40" /></div><div class="row"><label>{Title}</label><input type="text" class="wym_title" value="" size="40" /></div><div class="row row-indent"><input class="wym_submit" type="submit" value="{Submit}" /><input class="wym_cancel" type="button" value="{Cancel}" /></div></fieldset></form></body>',dialogTableHtml:String()+'<body class="wym_dialog wym_dialog_table" onload="WYMeditor.INIT_DIALOG('+WYMeditor.INDEX+')"><form><fieldset><input type="hidden" class="wym_dialog_type" value="'+WYMeditor.DIALOG_TABLE+'" /><legend>{Table}</legend><div class="row"><label>{Caption}</label><input type="text" class="wym_caption" value="" size="40" /></div><div class="row"><label>{Summary}</label><input type="text" class="wym_summary" value="" size="40" /></div><div class="row"><label>{Number_Of_Rows}</label><input type="text" class="wym_rows" value="3" size="3" /></div><div class="row"><label>{Number_Of_Cols}</label><input type="text" class="wym_cols" value="2" size="3" /></div><div class="row row-indent"><input class="wym_submit" type="submit" value="{Submit}" /><input class="wym_cancel" type="button" value="{Cancel}" /></div></fieldset></form></body>',dialogPasteHtml:String()+'<body class="wym_dialog wym_dialog_paste" onload="WYMeditor.INIT_DIALOG('+WYMeditor.INDEX+')"><form><input type="hidden" class="wym_dialog_type" value="'+WYMeditor.DIALOG_PASTE+'" /><fieldset><legend>{Paste_From_Word}</legend><div class="row"><textarea class="wym_text" rows="10" cols="50" autofocus="autofocus"></textarea></div><div class="row"><input class="wym_submit" type="submit" value="{Submit}" /><input class="wym_cancel" type="button" value="{Cancel}" /></div></fieldset></form></body>',dialogPreviewHtml:String()+'<body class="wym_dialog wym_dialog_preview" onload="WYMeditor.INIT_DIALOG('+WYMeditor.INDEX+')"></body>',dialogStyles:[],stringDelimiterLeft:"{",stringDelimiterRight:"}",preInit:null,preBind:null,postInit:null,preInitDialog:null,postInitDialog:null},e),this.each(function(){new WYMeditor.editor(jQuery(this),e)})},jQuery.extend({wymeditors:function(e){return WYMeditor.INSTANCES[e]}}),WYMeditor.computeWymPath=function(){var e=jQuery(jQuery.grep(jQuery("script"),function(e){return e.src?e.src.match(/jquery\.wymeditor(\.pack|\.min|\.packed)?\.js(\?.*)?$/)||e.src.match(/\/core\.js(\?.*)?$/):null}));return e.length>0?e.attr("src"):(WYMeditor.console.warn("Error determining wymPath. No base WYMeditor file located."),WYMeditor.console.warn("Assuming wymPath to be the current URL"),WYMeditor.console.warn("Please pass a correct wymPath option"),"")},WYMeditor.computeBasePath=function(e){var t=e.lastIndexOf("/");return e.substr(0,t+1)},WYMeditor.computeJqueryPath=function(){return jQuery(jQuery.grep(jQuery("script"),function(e){return e.src&&e.src.match(/jquery(-(.*)){0,1}(\.pack|\.min|\.packed)?\.js(\?.*)?$/)})).attr("src")},WYMeditor.INIT_DIALOG=function(index){var wym=window.opener.WYMeditor.INSTANCES[index],doc=window.document,selected=wym.selected(),dialogType=jQuery(wym._options.dialogTypeSelector).val(),sStamp=wym.uniqueStamp(),styles,aCss,tableOnClick;dialogType===WYMeditor.DIALOG_LINK&&(selected&&selected.tagName&&selected.tagName.toLowerCase!==WYMeditor.A&&(selected=jQuery(selected).parentsOrSelf(WYMeditor.A)),!selected&&wym._selected_image&&(selected=jQuery(wym._selected_image).parentsOrSelf(WYMeditor.A))),jQuery.isFunction(wym._options.preInitDialog)&&wym._options.preInitDialog(wym,window),styles=doc.styleSheets[0],aCss=eval(wym._options.dialogStyles),wym.addCssRules(doc,aCss),selected&&(jQuery(wym._options.hrefSelector).val(jQuery(selected).attr(WYMeditor.HREF)),jQuery(wym._options.srcSelector).val(jQuery(selected).attr(WYMeditor.SRC)),jQuery(wym._options.titleSelector).val(jQuery(selected).attr(WYMeditor.TITLE)),jQuery(wym._options.relSelector).val(jQuery(selected).attr(WYMeditor.REL)),jQuery(wym._options.altSelector).val(jQuery(selected).attr(WYMeditor.ALT))),wym._selected_image&&(jQuery(wym._options.dialogImageSelector+" "+wym._options.srcSelector).val(jQuery(wym._selected_image).attr(WYMeditor.SRC)),jQuery(wym._options.dialogImageSelector+" "+wym._options.titleSelector).val(jQuery(wym._selected_image).attr(WYMeditor.TITLE)),jQuery(wym._options.dialogImageSelector+" "+wym._options.altSelector).val(jQuery(wym._selected_image).attr(WYMeditor.ALT))),jQuery(wym._options.dialogLinkSelector+" "+wym._options.submitSelector).submit(function(){var e,t=jQuery(wym._options.hrefSelector).val();t.length>0&&(selected[0]&&selected[0].tagName.toLowerCase()===WYMeditor.A?e=selected:(wym._exec(WYMeditor.CREATE_LINK,sStamp),e=jQuery("a[href="+sStamp+"]",wym._doc.body)),e.attr(WYMeditor.HREF,t),e.attr(WYMeditor.TITLE,jQuery(wym._options.titleSelector).val()),e.attr(WYMeditor.REL,jQuery(wym._options.relSelector).val())),window.close()}),jQuery(wym._options.dialogImageSelector+" "+wym._options.submitSelector).submit(function(){var e,t=jQuery(wym._options.srcSelector).val();t.length>0&&(wym._exec(WYMeditor.INSERT_IMAGE,sStamp),e=jQuery("img[src$="+sStamp+"]",wym._doc.body),e.attr(WYMeditor.SRC,t),e.attr(WYMeditor.TITLE,jQuery(wym._options.titleSelector).val()),e.attr(WYMeditor.ALT,jQuery(wym._options.altSelector).val())),window.close()}),tableOnClick=WYMeditor.MAKE_TABLE_ONCLICK(wym),jQuery(wym._options.dialogTableSelector+" "+wym._options.submitSelector).submit(tableOnClick),jQuery(wym._options.dialogPasteSelector+" "+wym._options.submitSelector).submit(function(){var e=jQuery(wym._options.textSelector).val();wym.paste(e),window.close()}),jQuery(wym._options.dialogPreviewSelector+" "+wym._options.previewSelector).html(wym.xhtml()),jQuery(wym._options.cancelSelector).mousedown(function(){window.close()}),jQuery.isFunction(wym._options.postInitDialog)&&wym._options.postInitDialog(wym,window)},WYMeditor.MAKE_TABLE_ONCLICK=function(e){var t=function(){{var t=jQuery(e._options.rowsSelector).val(),n=jQuery(e._options.colsSelector).val(),r=jQuery(e._options.captionSelector).val(),i=jQuery(e._options.summarySelector).val();e.insertTable(t,n,r,i)}window.close()};return t},jQuery.fn.isPhantomNode=function(){return 3===this[0].nodeType?!/[^\t\n\r ]/.test(this[0].data):!1},jQuery.fn.nextContentsUntil=function(e,t){var n,r=[],i=this.get(0);if(e=e?e:"",t=t?t:"",!i)return jQuery();for(i=i.nextSibling;i&&!jQuery(i).is(e);)r.push(i),i=i.nextSibling;return n=jQuery(r),t?n.filter(t):n},jQuery.fn.nextAllContents=function(){return jQuery(this).nextContentsUntil("","")},jQuery.fn.prevContentsUntil=function(e,t){var n,r=[],i=this.get(0);if(e=e?e:"",t=t?t:"",!i)return jQuery();for(i=i.previousSibling;i&&!jQuery(i).is(e);)r.push(i),i=i.previousSibling;return n=jQuery(r),t?n.filter(t):n},jQuery.fn.prevAllContents=function(){return jQuery(this).prevContentsUntil("","")},WYMeditor.isPhantomNode=function(e){return 3===e.nodeType?!/[^\t\n\r ]/.test(e.data):!1},WYMeditor.isPhantomString=function(e){return!/[^\t\n\r ]/.test(e)},jQuery.fn.parentsOrSelf=function(e){var t=this;return 3===t[0].nodeType&&(t=t.parents().slice(0,1)),1===t.filter(e).size()?t:t.parents(e).slice(0,1)},WYMeditor.changeNodeType=function(e,t){var n,r,i=e.attributes;for(jQuery(e).wrapInner("<"+t+">"),n=jQuery(e).children().get(0),r=0;r<i.length;r++)i[r].specified&&n.setAttribute(i[r].nodeName,i[r].nodeValue);return jQuery(e).contents().unwrap(),n},WYMeditor.Helper={replaceAll:function(e,t,n){var r=new RegExp(t,"g");return e.replace(r,n)},insertAt:function(e,t,n){return e.substr(0,n)+t+e.substring(n)},trim:function(e){return e.replace(/^(\s*)|(\s*)$/gm,"")},contains:function(e,t){var n;for(n=0;n<e.length;n+=1)if(e[n]===t)return!0;return!1},indexOf:function(e,t){var n,r=-1;for(n=0;n<e.length;n+=1)if(e[n]===t){r=n;break}return r},findByName:function(e,t){var n,r;for(n=0;n<e.length;n+=1)if(r=e[n],r.name===t)return r;return null}},window.rangy=function(){function e(e,t){var n=typeof e[t];return n==d||!(n!=u||!e[t])||"unknown"==n}function t(e,t){return!(typeof e[t]!=u||!e[t])}function n(e,t){return typeof e[t]!=h}function r(e){return function(t,n){for(var r=n.length;r--;)if(!e(t,n[r]))return!1;return!0}}function i(e){return e&&y(e,g)&&v(e,m)}function o(e){window.alert("Rangy not supported in your browser. Reason: "+e),b.initialized=!0,b.supported=!1}function s(e){var t="Rangy warning: "+e;b.config.alertOnWarn?window.alert(t):typeof window.console!=h&&typeof window.console.log!=h&&window.console.log(t)}function a(){if(!b.initialized){var n,r=!1,s=!1;e(document,"createRange")&&(n=document.createRange(),y(n,f)&&v(n,p)&&(r=!0),n.detach());var a=t(document,"body")?document.body:document.getElementsByTagName("body")[0];a&&e(a,"createTextRange")&&(n=a.createTextRange(),i(n)&&(s=!0)),r||s||o("Neither Range nor TextRange are implemented"),b.initialized=!0,b.features={implementsDomRange:r,implementsTextRange:s};for(var l=T.concat(C),c=0,u=l.length;u>c;++c)try{l[c](b)}catch(d){t(window,"console")&&e(window.console,"log")&&window.console.log("Init listener threw an exception. Continuing.",d)}}}function l(e){e=e||window,a();for(var t=0,n=w.length;n>t;++t)w[t](e)}function c(e){this.name=e,this.initialized=!1,this.supported=!1}var u="object",d="function",h="undefined",p=["startContainer","startOffset","endContainer","endOffset","collapsed","commonAncestorContainer","START_TO_START","START_TO_END","END_TO_START","END_TO_END"],f=["setStart","setStartBefore","setStartAfter","setEnd","setEndBefore","setEndAfter","collapse","selectNode","selectNodeContents","compareBoundaryPoints","deleteContents","extractContents","cloneContents","insertNode","surroundContents","cloneRange","toString","detach"],m=["boundingHeight","boundingLeft","boundingTop","boundingWidth","htmlText","text"],g=["collapse","compareEndPoints","duplicate","getBookmark","moveToBookmark","moveToElementText","parentElement","pasteHTML","select","setEndPoint","getBoundingClientRect"],y=r(e),_=r(t),v=r(n),b={version:"1.2.2",initialized:!1,supported:!0,util:{isHostMethod:e,isHostObject:t,isHostProperty:n,areHostMethods:y,areHostObjects:_,areHostProperties:v,isTextRange:i},features:{},modules:{},config:{alertOnWarn:!1,preferTextRange:!1}};b.fail=o,b.warn=s,{}.hasOwnProperty?b.util.extend=function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}:o("hasOwnProperty not supported");var C=[],T=[];b.init=a,b.addInitListener=function(e){b.initialized?e(b):C.push(e)};var w=[];b.addCreateMissingNativeApiListener=function(e){w.push(e)},b.createMissingNativeApi=l,c.prototype.fail=function(e){throw this.initialized=!0,this.supported=!1,new Error("Module '"+this.name+"' failed to load: "+e)},c.prototype.warn=function(e){b.warn("Module "+this.name+": "+e)},c.prototype.createError=function(e){return new Error("Error in Rangy "+this.name+" module: "+e)},b.createModule=function(e,t){var n=new c(e);b.modules[e]=n,T.push(function(e){t(e,n),n.initialized=!0,n.supported=!0})},b.requireModules=function(e){for(var t,n,r=0,i=e.length;i>r;++r){if(n=e[r],t=b.modules[n],!(t&&t instanceof c))throw new Error("Module '"+n+"' not found");if(!t.supported)throw new Error("Module '"+n+"' not supported")}};var E=!1,S=function(){E||(E=!0,b.initialized||a())};return typeof window==h?(o("No window found"),void 0):typeof document==h?(o("No document found"),void 0):(e(document,"addEventListener")&&document.addEventListener("DOMContentLoaded",S,!1),e(window,"addEventListener")?window.addEventListener("load",S,!1):e(window,"attachEvent")?window.attachEvent("onload",S):o("Window does not have required addEventListener or attachEvent method"),b)}(),rangy.createModule("DomUtil",function(e,t){function n(e){var t;return typeof e.namespaceURI==S||null===(t=e.namespaceURI)||"http://www.w3.org/1999/xhtml"==t}function r(e){var t=e.parentNode;return 1==t.nodeType?t:null}function i(e){for(var t=0;e=e.previousSibling;)t++;return t}function o(e){var t;return c(e)?e.length:(t=e.childNodes)?t.length:0}function s(e,t){var n,r=[];for(n=e;n;n=n.parentNode)r.push(n);for(n=t;n;n=n.parentNode)if(W(r,n))return n;return null}function a(e,t,n){for(var r=n?t:t.parentNode;r;){if(r===e)return!0;r=r.parentNode}return!1}function l(e,t,n){for(var r,i=n?e:e.parentNode;i;){if(r=i.parentNode,r===t)return i;i=r}return null}function c(e){var t=e.nodeType;return 3==t||4==t||8==t}function u(e,t){var n=t.nextSibling,r=t.parentNode;return n?r.insertBefore(e,n):r.appendChild(e),e}function d(e,t){var n=e.cloneNode(!1);return n.deleteData(0,t),e.deleteData(t,e.length-t),u(n,e),n}function h(e){if(9==e.nodeType)return e;if(typeof e.ownerDocument!=S)return e.ownerDocument;if(typeof e.document!=S)return e.document;if(e.parentNode)return h(e.parentNode);throw new Error("getDocument: no document found for node")}function p(e){var t=h(e);if(typeof t.defaultView!=S)return t.defaultView;if(typeof t.parentWindow!=S)return t.parentWindow;throw new Error("Cannot get a window object for node")}function f(e){if(typeof e.contentDocument!=S)return e.contentDocument;if(typeof e.contentWindow!=S)return e.contentWindow.document;throw new Error("getIframeWindow: No Document object found for iframe element")}function m(e){if(typeof e.contentWindow!=S)return e.contentWindow;if(typeof e.contentDocument!=S)return e.contentDocument.defaultView;throw new Error("getIframeWindow: No Window object found for iframe element")}function g(e){return x.isHostObject(e,"body")?e.body:e.getElementsByTagName("body")[0]}function y(e){for(var t;t=e.parentNode;)e=t;return e}function _(e,t,n,r){var o,a,c,u,d;if(e==n)return t===r?0:r>t?-1:1;if(o=l(n,e,!0))return t<=i(o)?-1:1;if(o=l(e,n,!0))return i(o)<r?-1:1;if(a=s(e,n),c=e===a?a:l(e,a,!0),u=n===a?a:l(n,a,!0),c===u)throw new Error("comparePoints got to case 4 and childA and childB are the same!");for(d=a.firstChild;d;){if(d===c)return-1;if(d===u)return 1;d=d.nextSibling}throw new Error("Should not be here!")}function v(e){for(var t,n=h(e).createDocumentFragment();t=e.firstChild;)n.appendChild(t);return n}function b(e){if(!e)return"[No node]";if(c(e))return'"'+e.data+'"';if(1==e.nodeType){var t=e.id?' id="'+e.id+'"':"";return"<"+e.nodeName+t+">["+e.childNodes.length+"]"}return e.nodeName}function C(e){this.root=e,this._next=e}function T(e){return new C(e)}function w(e,t){this.node=e,this.offset=t}function E(e){this.code=this[e],this.codeName=e,this.message="DOMException: "+this.codeName}var S="undefined",x=e.util;x.areHostMethods(document,["createDocumentFragment","createElement","createTextNode"])||t.fail("document missing a Node creation method"),x.isHostMethod(document,"getElementsByTagName")||t.fail("document missing getElementsByTagName method");
var N=document.createElement("div");x.areHostMethods(N,["insertBefore","appendChild","cloneNode"]||!x.areHostObjects(N,["previousSibling","nextSibling","childNodes","parentNode"]))||t.fail("Incomplete Element implementation"),x.isHostProperty(N,"innerHTML")||t.fail("Element is missing innerHTML property");var M=document.createTextNode("test");x.areHostMethods(M,["splitText","deleteData","insertData","appendData","cloneNode"]||!x.areHostObjects(N,["previousSibling","nextSibling","childNodes","parentNode"])||!x.areHostProperties(M,["data"]))||t.fail("Incomplete Text Node implementation");var W=function(e,t){for(var n=e.length;n--;)if(e[n]===t)return!0;return!1};C.prototype={_current:null,hasNext:function(){return!!this._next},next:function(){var e,t,n=this._current=this._next;if(this._current)if(e=n.firstChild)this._next=e;else{for(t=null;n!==this.root&&!(t=n.nextSibling);)n=n.parentNode;this._next=t}return this._current},detach:function(){this._current=this._next=this.root=null}},w.prototype={equals:function(e){return this.node===e.node&this.offset==e.offset},inspect:function(){return"[DomPosition("+b(this.node)+":"+this.offset+")]"}},E.prototype={INDEX_SIZE_ERR:1,HIERARCHY_REQUEST_ERR:3,WRONG_DOCUMENT_ERR:4,NO_MODIFICATION_ALLOWED_ERR:7,NOT_FOUND_ERR:8,NOT_SUPPORTED_ERR:9,INVALID_STATE_ERR:11},E.prototype.toString=function(){return this.message},e.dom={arrayContains:W,isHtmlNamespace:n,parentElement:r,getNodeIndex:i,getNodeLength:o,getCommonAncestor:s,isAncestorOf:a,getClosestAncestorIn:l,isCharacterDataNode:c,insertAfter:u,splitDataNode:d,getDocument:h,getWindow:p,getIframeWindow:m,getIframeDocument:f,getBody:g,getRootContainer:y,comparePoints:_,inspectNode:b,fragmentFromNodeChildren:v,createIterator:T,DomPosition:w},e.DOMException=E}),rangy.createModule("DomRange",function(e){function t(e,t){return 3!=e.nodeType&&(k.isAncestorOf(e,t.startContainer,!0)||k.isAncestorOf(e,t.endContainer,!0))}function n(e){return k.getDocument(e.startContainer)}function r(e,t,n){var r=e._listeners[t];if(r)for(var i=0,o=r.length;o>i;++i)r[i].call(e,{target:e,args:n})}function i(e){return new D(e.parentNode,k.getNodeIndex(e))}function o(e){return new D(e.parentNode,k.getNodeIndex(e)+1)}function s(e,t,n){var r=11==e.nodeType?e.firstChild:e;return k.isCharacterDataNode(t)?n==t.length?k.insertAfter(e,t):t.parentNode.insertBefore(e,0==n?t:k.splitDataNode(t,n)):n>=t.childNodes.length?t.appendChild(e):t.insertBefore(e,t.childNodes[n]),r}function a(e){for(var t,r,i,o=n(e.range).createDocumentFragment();r=e.next();){if(t=e.isPartiallySelectedSubtree(),r=r.cloneNode(!t),t&&(i=e.getSubtreeIterator(),r.appendChild(a(i)),i.detach(!0)),10==r.nodeType)throw new j("HIERARCHY_REQUEST_ERR");o.appendChild(r)}return o}function l(e,t,n){var r,i;n=n||{stop:!1};for(var o,s;o=e.next();)if(e.isPartiallySelectedSubtree()){if(t(o)===!1)return n.stop=!0,void 0;if(s=e.getSubtreeIterator(),l(s,t,n),s.detach(!0),n.stop)return}else for(r=k.createIterator(o);i=r.next();)if(t(i)===!1)return n.stop=!0,void 0}function c(e){for(var t;e.next();)e.isPartiallySelectedSubtree()?(t=e.getSubtreeIterator(),c(t),t.detach(!0)):e.remove()}function u(e){for(var t,r,i=n(e.range).createDocumentFragment();t=e.next();){if(e.isPartiallySelectedSubtree()?(t=t.cloneNode(!1),r=e.getSubtreeIterator(),t.appendChild(u(r)),r.detach(!0)):e.remove(),10==t.nodeType)throw new j("HIERARCHY_REQUEST_ERR");i.appendChild(t)}return i}function d(e,t,n){var r,i=!(!t||!t.length),o=!!n;i&&(r=new RegExp("^("+t.join("|")+")$"));var s=[];return l(new p(e,!1),function(e){i&&!r.test(e.nodeType)||o&&!n(e)||s.push(e)}),s}function h(e){var t="undefined"==typeof e.getName?"Range":e.getName();return"["+t+"("+k.inspectNode(e.startContainer)+":"+e.startOffset+", "+k.inspectNode(e.endContainer)+":"+e.endOffset+")]"}function p(e,t){if(this.range=e,this.clonePartiallySelectedTextNodes=t,!e.collapsed){this.sc=e.startContainer,this.so=e.startOffset,this.ec=e.endContainer,this.eo=e.endOffset;var n=e.commonAncestorContainer;this.sc===this.ec&&k.isCharacterDataNode(this.sc)?(this.isSingleCharacterDataNode=!0,this._first=this._last=this._next=this.sc):(this._first=this._next=this.sc!==n||k.isCharacterDataNode(this.sc)?k.getClosestAncestorIn(this.sc,n,!0):this.sc.childNodes[this.so],this._last=this.ec!==n||k.isCharacterDataNode(this.ec)?k.getClosestAncestorIn(this.ec,n,!0):this.ec.childNodes[this.eo-1])}}function f(e){this.code=this[e],this.codeName=e,this.message="RangeException: "+this.codeName}function m(e,t,n){this.nodes=d(e,t,n),this._next=this.nodes[0],this._position=0}function g(e){return function(t,n){for(var r,i=n?t:t.parentNode;i;){if(r=i.nodeType,k.arrayContains(e,r))return i;i=i.parentNode}return null}}function y(e,t){if(U(e,t))throw new f("INVALID_NODE_TYPE_ERR")}function _(e){if(!e.startContainer)throw new j("INVALID_STATE_ERR")}function v(e,t){if(!k.arrayContains(t,e.nodeType))throw new f("INVALID_NODE_TYPE_ERR")}function b(e,t){if(0>t||t>(k.isCharacterDataNode(e)?e.length:e.childNodes.length))throw new j("INDEX_SIZE_ERR")}function C(e,t){if(X(e,!0)!==X(t,!0))throw new j("WRONG_DOCUMENT_ERR")}function T(e){if($(e,!0))throw new j("NO_MODIFICATION_ALLOWED_ERR")}function w(e,t){if(!e)throw new j(t)}function E(e){return!k.arrayContains(H,e.nodeType)&&!X(e,!0)}function S(e,t){return t<=(k.isCharacterDataNode(e)?e.length:e.childNodes.length)}function x(e){if(_(e),E(e.startContainer)||E(e.endContainer)||!S(e.startContainer,e.startOffset)||!S(e.endContainer,e.endOffset))throw new Error("Range error: Range is no longer valid after DOM mutation ("+e.inspect()+")")}function N(){}function M(e){e.START_TO_START=Z,e.START_TO_END=et,e.END_TO_END=tt,e.END_TO_START=nt,e.NODE_BEFORE=rt,e.NODE_AFTER=it,e.NODE_BEFORE_AND_AFTER=ot,e.NODE_INSIDE=st}function W(e){M(e),M(e.prototype)}function R(e,t){return function(){x(this);var n,r,i=this.startContainer,s=this.startOffset,a=this.commonAncestorContainer,c=new p(this,!0);i!==a&&(n=k.getClosestAncestorIn(i,a,!0),r=o(n),i=r.node,s=r.offset),l(c,T),c.reset();var u=e(c);return c.detach(),t(this,i,s,i,s),u}}function L(n,r,s){function a(e,t){return function(n){_(this),v(n,P),v(q(n),H);var r=(e?i:o)(n);(t?l:d)(this,r.node,r.offset)}}function l(e,t,n){var i=e.endContainer,o=e.endOffset;(t!==e.startContainer||n!==e.startOffset)&&((q(t)!=q(i)||1==k.comparePoints(t,n,i,o))&&(i=t,o=n),r(e,t,n,i,o))}function d(e,t,n){var i=e.startContainer,o=e.startOffset;(t!==e.endContainer||n!==e.endOffset)&&((q(t)!=q(i)||-1==k.comparePoints(t,n,i,o))&&(i=t,o=n),r(e,i,o,t,n))}function h(e,t,n){(t!==e.startContainer||n!==e.startOffset||t!==e.endContainer||n!==e.endOffset)&&r(e,t,n,t,n)}n.prototype=new N,e.util.extend(n.prototype,{setStart:function(e,t){_(this),y(e,!0),b(e,t),l(this,e,t)},setEnd:function(e,t){_(this),y(e,!0),b(e,t),d(this,e,t)},setStartBefore:a(!0,!0),setStartAfter:a(!1,!0),setEndBefore:a(!0,!1),setEndAfter:a(!1,!1),collapse:function(e){x(this),e?r(this,this.startContainer,this.startOffset,this.startContainer,this.startOffset):r(this,this.endContainer,this.endOffset,this.endContainer,this.endOffset)},selectNodeContents:function(e){_(this),y(e,!0),r(this,e,0,e,k.getNodeLength(e))},selectNode:function(e){_(this),y(e,!1),v(e,P);var t=i(e),n=o(e);r(this,t.node,t.offset,n.node,n.offset)},extractContents:R(u,r),deleteContents:R(c,r),canSurroundContents:function(){x(this),T(this.startContainer),T(this.endContainer);var e=new p(this,!0),n=e._first&&t(e._first,this)||e._last&&t(e._last,this);return e.detach(),!n},detach:function(){s(this)},splitBoundaries:function(){x(this);var e=this.startContainer,t=this.startOffset,n=this.endContainer,i=this.endOffset,o=e===n;k.isCharacterDataNode(n)&&i>0&&i<n.length&&k.splitDataNode(n,i),k.isCharacterDataNode(e)&&t>0&&t<e.length&&(e=k.splitDataNode(e,t),o?(i-=t,n=e):n==e.parentNode&&i>=k.getNodeIndex(e)&&i++,t=0),r(this,e,t,n,i)},normalizeBoundaries:function(){x(this);var e=this.startContainer,t=this.startOffset,n=this.endContainer,i=this.endOffset,o=function(e){var t=e.nextSibling;t&&t.nodeType==e.nodeType&&(n=e,i=e.length,e.appendData(t.data),t.parentNode.removeChild(t))},s=function(r){var o=r.previousSibling;if(o&&o.nodeType==r.nodeType){e=r;var s=r.length;if(t=o.length,r.insertData(0,o.data),o.parentNode.removeChild(o),e==n)i+=t,n=e;else if(n==r.parentNode){var a=k.getNodeIndex(r);i==a?(n=r,i=s):i>a&&i--}}},a=!0;if(k.isCharacterDataNode(n))n.length==i&&o(n);else{if(i>0){var l=n.childNodes[i-1];l&&k.isCharacterDataNode(l)&&o(l)}a=!this.collapsed}if(a){if(k.isCharacterDataNode(e))0==t&&s(e);else if(t<e.childNodes.length){var c=e.childNodes[t];c&&k.isCharacterDataNode(c)&&s(c)}}else e=n,t=i;r(this,e,t,n,i)},collapseToPoint:function(e,t){_(this),y(e,!0),b(e,t),h(this,e,t)}}),W(n)}function A(e){e.collapsed=e.startContainer===e.endContainer&&e.startOffset===e.endOffset,e.commonAncestorContainer=e.collapsed?e.startContainer:k.getCommonAncestor(e.startContainer,e.endContainer)}function Y(e,t,n,i,o){var s=e.startContainer!==t||e.startOffset!==n,a=e.endContainer!==i||e.endOffset!==o;e.startContainer=t,e.startOffset=n,e.endContainer=i,e.endOffset=o,A(e),r(e,"boundarychange",{startMoved:s,endMoved:a})}function I(e){_(e),e.startContainer=e.startOffset=e.endContainer=e.endOffset=null,e.collapsed=e.commonAncestorContainer=null,r(e,"detach",null),e._listeners=null}function O(e){this.startContainer=e,this.startOffset=0,this.endContainer=e,this.endOffset=0,this._listeners={boundarychange:[],detach:[]},A(this)}e.requireModules(["DomUtil"]);var k=e.dom,D=k.DomPosition,j=e.DOMException;p.prototype={_current:null,_next:null,_first:null,_last:null,isSingleCharacterDataNode:!1,reset:function(){this._current=null,this._next=this._first},hasNext:function(){return!!this._next},next:function(){var e=this._current=this._next;return e&&(this._next=e!==this._last?e.nextSibling:null,k.isCharacterDataNode(e)&&this.clonePartiallySelectedTextNodes&&(e===this.ec&&(e=e.cloneNode(!0)).deleteData(this.eo,e.length-this.eo),this._current===this.sc&&(e=e.cloneNode(!0)).deleteData(0,this.so))),e},remove:function(){var e,t,n=this._current;!k.isCharacterDataNode(n)||n!==this.sc&&n!==this.ec?n.parentNode&&n.parentNode.removeChild(n):(e=n===this.sc?this.so:0,t=n===this.ec?this.eo:n.length,e!=t&&n.deleteData(e,t-e))},isPartiallySelectedSubtree:function(){var e=this._current;return t(e,this.range)},getSubtreeIterator:function(){var e;if(this.isSingleCharacterDataNode)e=this.range.cloneRange(),e.collapse();else{e=new O(n(this.range));var t=this._current,r=t,i=0,o=t,s=k.getNodeLength(t);k.isAncestorOf(t,this.sc,!0)&&(r=this.sc,i=this.so),k.isAncestorOf(t,this.ec,!0)&&(o=this.ec,s=this.eo),Y(e,r,i,o,s)}return new p(e,this.clonePartiallySelectedTextNodes)},detach:function(e){e&&this.range.detach(),this.range=this._current=this._next=this._first=this._last=this.sc=this.so=this.ec=this.eo=null}},f.prototype={BAD_BOUNDARYPOINTS_ERR:1,INVALID_NODE_TYPE_ERR:2},f.prototype.toString=function(){return this.message},m.prototype={_current:null,hasNext:function(){return!!this._next},next:function(){return this._current=this._next,this._next=this.nodes[++this._position],this._current},detach:function(){this._current=this._next=this.nodes=null}};var P=[1,3,4,5,7,8,10],H=[2,9,11],B=[5,6,10,12],Q=[1,3,4,5,7,8,10,11],F=[1,3,4,5,7,8],q=k.getRootContainer,X=g([9,11]),$=g(B),U=g([6,10,12]),z=document.createElement("style"),K=!1;try{z.innerHTML="<b>x</b>",K=3==z.firstChild.nodeType}catch(G){}e.features.htmlParsingConforms=K;var V=K?function(e){var t=this.startContainer,n=k.getDocument(t);if(!t)throw new j("INVALID_STATE_ERR");var r=null;return 1==t.nodeType?r=t:k.isCharacterDataNode(t)&&(r=k.parentElement(t)),r=null===r||"HTML"==r.nodeName&&k.isHtmlNamespace(k.getDocument(r).documentElement)&&k.isHtmlNamespace(r)?n.createElement("body"):r.cloneNode(!1),r.innerHTML=e,k.fragmentFromNodeChildren(r)}:function(e){_(this);var t=n(this),r=t.createElement("body");return r.innerHTML=e,k.fragmentFromNodeChildren(r)},J=["startContainer","startOffset","endContainer","endOffset","collapsed","commonAncestorContainer"],Z=0,et=1,tt=2,nt=3,rt=0,it=1,ot=2,st=3;N.prototype={attachListener:function(e,t){this._listeners[e].push(t)},compareBoundaryPoints:function(e,t){x(this),C(this.startContainer,t.startContainer);var n,r,i,o,s=e==nt||e==Z?"start":"end",a=e==et||e==Z?"start":"end";return n=this[s+"Container"],r=this[s+"Offset"],i=t[a+"Container"],o=t[a+"Offset"],k.comparePoints(n,r,i,o)},insertNode:function(e){if(x(this),v(e,Q),T(this.startContainer),k.isAncestorOf(e,this.startContainer,!0))throw new j("HIERARCHY_REQUEST_ERR");var t=s(e,this.startContainer,this.startOffset);this.setStartBefore(t)},cloneContents:function(){x(this);var e,t;if(this.collapsed)return n(this).createDocumentFragment();if(this.startContainer===this.endContainer&&k.isCharacterDataNode(this.startContainer))return e=this.startContainer.cloneNode(!0),e.data=e.data.slice(this.startOffset,this.endOffset),t=n(this).createDocumentFragment(),t.appendChild(e),t;var r=new p(this,!0);return e=a(r),r.detach(),e},canSurroundContents:function(){x(this),T(this.startContainer),T(this.endContainer);var e=new p(this,!0),n=e._first&&t(e._first,this)||e._last&&t(e._last,this);return e.detach(),!n},surroundContents:function(e){if(v(e,F),!this.canSurroundContents())throw new f("BAD_BOUNDARYPOINTS_ERR");var t=this.extractContents();if(e.hasChildNodes())for(;e.lastChild;)e.removeChild(e.lastChild);s(e,this.startContainer,this.startOffset),e.appendChild(t),this.selectNode(e)},cloneRange:function(){x(this);for(var e,t=new O(n(this)),r=J.length;r--;)e=J[r],t[e]=this[e];return t},toString:function(){x(this);var e=this.startContainer;if(e===this.endContainer&&k.isCharacterDataNode(e))return 3==e.nodeType||4==e.nodeType?e.data.slice(this.startOffset,this.endOffset):"";var t=[],n=new p(this,!0);return l(n,function(e){(3==e.nodeType||4==e.nodeType)&&t.push(e.data)}),n.detach(),t.join("")},compareNode:function(e){x(this);var t=e.parentNode,n=k.getNodeIndex(e);if(!t)throw new j("NOT_FOUND_ERR");var r=this.comparePoint(t,n),i=this.comparePoint(t,n+1);return 0>r?i>0?ot:rt:i>0?it:st},comparePoint:function(e,t){return x(this),w(e,"HIERARCHY_REQUEST_ERR"),C(e,this.startContainer),k.comparePoints(e,t,this.startContainer,this.startOffset)<0?-1:k.comparePoints(e,t,this.endContainer,this.endOffset)>0?1:0},createContextualFragment:V,toHtml:function(){x(this);var e=n(this).createElement("div");return e.appendChild(this.cloneContents()),e.innerHTML},intersectsNode:function(e,t){if(x(this),w(e,"NOT_FOUND_ERR"),k.getDocument(e)!==n(this))return!1;var r=e.parentNode,i=k.getNodeIndex(e);w(r,"NOT_FOUND_ERR");var o=k.comparePoints(r,i,this.endContainer,this.endOffset),s=k.comparePoints(r,i+1,this.startContainer,this.startOffset);return t?0>=o&&s>=0:0>o&&s>0},isPointInRange:function(e,t){return x(this),w(e,"HIERARCHY_REQUEST_ERR"),C(e,this.startContainer),k.comparePoints(e,t,this.startContainer,this.startOffset)>=0&&k.comparePoints(e,t,this.endContainer,this.endOffset)<=0},intersectsRange:function(e,t){if(x(this),n(e)!=n(this))throw new j("WRONG_DOCUMENT_ERR");var r=k.comparePoints(this.startContainer,this.startOffset,e.endContainer,e.endOffset),i=k.comparePoints(this.endContainer,this.endOffset,e.startContainer,e.startOffset);return t?0>=r&&i>=0:0>r&&i>0},intersection:function(e){if(this.intersectsRange(e)){var t=k.comparePoints(this.startContainer,this.startOffset,e.startContainer,e.startOffset),n=k.comparePoints(this.endContainer,this.endOffset,e.endContainer,e.endOffset),r=this.cloneRange();return-1==t&&r.setStart(e.startContainer,e.startOffset),1==n&&r.setEnd(e.endContainer,e.endOffset),r}return null},union:function(e){if(this.intersectsRange(e,!0)){var t=this.cloneRange();return-1==k.comparePoints(e.startContainer,e.startOffset,this.startContainer,this.startOffset)&&t.setStart(e.startContainer,e.startOffset),1==k.comparePoints(e.endContainer,e.endOffset,this.endContainer,this.endOffset)&&t.setEnd(e.endContainer,e.endOffset),t}throw new f("Ranges do not intersect")},containsNode:function(e,t){return t?this.intersectsNode(e,!1):this.compareNode(e)==st},containsNodeContents:function(e){return this.comparePoint(e,0)>=0&&this.comparePoint(e,k.getNodeLength(e))<=0},containsRange:function(e){return this.intersection(e).equals(e)},containsNodeText:function(e){var t=this.cloneRange();t.selectNode(e);var n=t.getNodes([3]);if(n.length>0){t.setStart(n[0],0);var r=n.pop();t.setEnd(r,r.length);var i=this.containsRange(t);return t.detach(),i}return this.containsNodeContents(e)},createNodeIterator:function(e,t){return x(this),new m(this,e,t)},getNodes:function(e,t){return x(this),d(this,e,t)},getDocument:function(){return n(this)},collapseBefore:function(e){_(this),this.setEndBefore(e),this.collapse(!1)},collapseAfter:function(e){_(this),this.setStartAfter(e),this.collapse(!0)},getName:function(){return"DomRange"},equals:function(e){return O.rangesEqual(this,e)},inspect:function(){return h(this)}},L(O,Y,I),e.rangePrototype=N.prototype,O.rangeProperties=J,O.RangeIterator=p,O.copyComparisonConstants=W,O.createPrototypeRange=L,O.inspect=h,O.getRangeDocument=n,O.rangesEqual=function(e,t){return e.startContainer===t.startContainer&&e.startOffset===t.startOffset&&e.endContainer===t.endContainer&&e.endOffset===t.endOffset},e.DomRange=O,e.RangeException=f}),rangy.createModule("WrappedRange",function(e){function t(e){var t=e.parentElement(),n=e.duplicate();n.collapse(!0);var r=n.parentElement();n=e.duplicate(),n.collapse(!1);var i=n.parentElement(),o=r==i?r:s.getCommonAncestor(r,i);return o==t?o:s.getCommonAncestor(t,o)}function n(e){return 0==e.compareEndPoints("StartToEnd",e)}function r(e,t,n,r){var i=e.duplicate();i.collapse(n);var o=i.parentElement();if(s.isAncestorOf(t,o,!0)||(o=t),!o.canHaveHTML)return new a(o.parentNode,s.getNodeIndex(o));var l,c,u,d,h,p=s.getDocument(o).createElement("span"),f=n?"StartToStart":"StartToEnd";do o.insertBefore(p,p.previousSibling),i.moveToElementText(p);while((l=i.compareEndPoints(f,e))>0&&p.previousSibling);if(h=p.nextSibling,-1==l&&h&&s.isCharacterDataNode(h)){i.setEndPoint(n?"EndToStart":"EndToEnd",e);var m;if(/[\r\n]/.test(h.data)){var g=i.duplicate(),y=g.text.replace(/\r\n/g,"\r").length;for(m=g.moveStart("character",y);-1==(l=g.compareEndPoints("StartToEnd",g));)m++,g.moveStart("character",1)}else m=i.text.length;d=new a(h,m)}else c=(r||!n)&&p.previousSibling,u=(r||n)&&p.nextSibling,d=u&&s.isCharacterDataNode(u)?new a(u,0):c&&s.isCharacterDataNode(c)?new a(c,c.length):new a(o,s.getNodeIndex(p));return p.parentNode.removeChild(p),d}function i(e,t){var n,r,i,o,a=e.offset,l=s.getDocument(e.node),c=l.body.createTextRange(),u=s.isCharacterDataNode(e.node);return u?(n=e.node,r=n.parentNode):(o=e.node.childNodes,n=a<o.length?o[a]:null,r=e.node),i=l.createElement("span"),i.innerHTML="&#feff;",n?r.insertBefore(i,n):r.appendChild(i),c.moveToElementText(i),c.collapse(!t),r.removeChild(i),u&&c[t?"moveStart":"moveEnd"]("character",a),c}e.requireModules(["DomUtil","DomRange"]);var o,s=e.dom,a=s.DomPosition,l=e.DomRange;if(!e.features.implementsDomRange||e.features.implementsTextRange&&e.config.preferTextRange){if(e.features.implementsTextRange){o=function(e){this.textRange=e,this.refresh()},o.prototype=new l(document),o.prototype.refresh=function(){var e,i,o=t(this.textRange);n(this.textRange)?i=e=r(this.textRange,o,!0,!0):(e=r(this.textRange,o,!0,!1),i=r(this.textRange,o,!1,!1)),this.setStart(e.node,e.offset),this.setEnd(i.node,i.offset)},l.copyComparisonConstants(o);var c=function(){return this}();"undefined"==typeof c.Range&&(c.Range=o),e.createNativeRange=function(e){return e=e||document,e.body.createTextRange()}}}else!function(){function t(e){for(var t,n=u.length;n--;)t=u[n],e[t]=e.nativeRange[t]}function n(e,t,n,r,i){var o=e.startContainer!==t||e.startOffset!=n,s=e.endContainer!==r||e.endOffset!=i;(o||s)&&(e.setEnd(r,i),e.setStart(t,n))}function r(e){e.nativeRange.detach(),e.detached=!0;for(var t,n=u.length;n--;)t=u[n],e[t]=null}var i,a,c,u=l.rangeProperties;o=function(e){if(!e)throw new Error("Range must be specified");this.nativeRange=e,t(this)},l.createPrototypeRange(o,n,r),i=o.prototype,i.selectNode=function(e){this.nativeRange.selectNode(e),t(this)},i.deleteContents=function(){this.nativeRange.deleteContents(),t(this)},i.extractContents=function(){var e=this.nativeRange.extractContents();return t(this),e},i.cloneContents=function(){return this.nativeRange.cloneContents()},i.surroundContents=function(e){this.nativeRange.surroundContents(e),t(this)},i.collapse=function(e){this.nativeRange.collapse(e),t(this)},i.cloneRange=function(){return new o(this.nativeRange.cloneRange())},i.refresh=function(){t(this)},i.toString=function(){return this.nativeRange.toString()};var d=document.createTextNode("test");s.getBody(document).appendChild(d);var h=document.createRange();h.setStart(d,0),h.setEnd(d,0);try{h.setStart(d,1),a=!0,i.setStart=function(e,n){this.nativeRange.setStart(e,n),t(this)},i.setEnd=function(e,n){this.nativeRange.setEnd(e,n),t(this)},c=function(e){return function(n){this.nativeRange[e](n),t(this)}}}catch(p){a=!1,i.setStart=function(e,n){try{this.nativeRange.setStart(e,n)}catch(r){this.nativeRange.setEnd(e,n),this.nativeRange.setStart(e,n)}t(this)},i.setEnd=function(e,n){try{this.nativeRange.setEnd(e,n)}catch(r){this.nativeRange.setStart(e,n),this.nativeRange.setEnd(e,n)}t(this)},c=function(e,n){return function(r){try{this.nativeRange[e](r)}catch(i){this.nativeRange[n](r),this.nativeRange[e](r)}t(this)}}}i.setStartBefore=c("setStartBefore","setEndBefore"),i.setStartAfter=c("setStartAfter","setEndAfter"),i.setEndBefore=c("setEndBefore","setStartBefore"),i.setEndAfter=c("setEndAfter","setStartAfter"),h.selectNodeContents(d),i.selectNodeContents=h.startContainer==d&&h.endContainer==d&&0==h.startOffset&&h.endOffset==d.length?function(e){this.nativeRange.selectNodeContents(e),t(this)}:function(e){this.setStart(e,0),this.setEnd(e,l.getEndOffset(e))},h.selectNodeContents(d),h.setEnd(d,3);var f=document.createRange();f.selectNodeContents(d),f.setEnd(d,4),f.setStart(d,2),i.compareBoundaryPoints=-1==h.compareBoundaryPoints(h.START_TO_END,f)&1==h.compareBoundaryPoints(h.END_TO_START,f)?function(e,t){return t=t.nativeRange||t,e==t.START_TO_END?e=t.END_TO_START:e==t.END_TO_START&&(e=t.START_TO_END),this.nativeRange.compareBoundaryPoints(e,t)}:function(e,t){return this.nativeRange.compareBoundaryPoints(e,t.nativeRange||t)},e.util.isHostMethod(h,"createContextualFragment")&&(i.createContextualFragment=function(e){return this.nativeRange.createContextualFragment(e)}),s.getBody(document).removeChild(d),h.detach(),f.detach()}(),e.createNativeRange=function(e){return e=e||document,e.createRange()};e.features.implementsTextRange&&(o.rangeToTextRange=function(e){if(e.collapsed){var t=i(new a(e.startContainer,e.startOffset),!0);return t}var n=i(new a(e.startContainer,e.startOffset),!0),r=i(new a(e.endContainer,e.endOffset),!1),o=s.getDocument(e.startContainer).body.createTextRange();return o.setEndPoint("StartToStart",n),o.setEndPoint("EndToEnd",r),o}),o.prototype.getName=function(){return"WrappedRange"},e.WrappedRange=o,e.createRange=function(t){return t=t||document,new o(e.createNativeRange(t))},e.createRangyRange=function(e){return e=e||document,new l(e)},e.createIframeRange=function(t){return e.createRange(s.getIframeDocument(t))},e.createIframeRangyRange=function(t){return e.createRangyRange(s.getIframeDocument(t))},e.addCreateMissingNativeApiListener(function(t){var n=t.document;"undefined"==typeof n.createRange&&(n.createRange=function(){return e.createRange(this)}),n=t=null})}),rangy.createModule("WrappedSelection",function(e,t){function n(e){return(e||window).getSelection()}function r(e){return(e||window).document.selection}function i(e,t,n){var r=n?"end":"start",i=n?"start":"end";e.anchorNode=t[r+"Container"],e.anchorOffset=t[r+"Offset"],e.focusNode=t[i+"Container"],e.focusOffset=t[i+"Offset"]}function o(e){var t=e.nativeSelection;e.anchorNode=t.anchorNode,e.anchorOffset=t.anchorOffset,e.focusNode=t.focusNode,e.focusOffset=t.focusOffset}function s(e){e.anchorNode=e.focusNode=null,e.anchorOffset=e.focusOffset=0,e.rangeCount=0,e.isCollapsed=!0,e._ranges.length=0}function a(t){var n;return t instanceof E?(n=t._selectionNativeRange,n||(n=e.createNativeRange(T.getDocument(t.startContainer)),n.setEnd(t.endContainer,t.endOffset),n.setStart(t.startContainer,t.startOffset),t._selectionNativeRange=n,t.attachListener("detach",function(){this._selectionNativeRange=null}))):t instanceof S?n=t.nativeRange:e.features.implementsDomRange&&t instanceof T.getWindow(t.startContainer).Range&&(n=t),n}function l(e){if(!e.length||1!=e[0].nodeType)return!1;for(var t=1,n=e.length;n>t;++t)if(!T.isAncestorOf(e[0],e[t]))return!1;return!0}function c(e){var t=e.getNodes();if(!l(t))throw new Error("getSingleElementFromRange: range "+e.inspect()+" did not consist of a single element");return t[0]}function u(e){return!!e&&"undefined"!=typeof e.text}function d(e,t){var n=new S(t);e._ranges=[n],i(e,n,!1),e.rangeCount=1,e.isCollapsed=n.collapsed}function h(t){if(t._ranges.length=0,"None"==t.docSelection.type)s(t);else{var n=t.docSelection.createRange();if(u(n))d(t,n);else{t.rangeCount=n.length;for(var r,o=T.getDocument(n.item(0)),a=0;a<t.rangeCount;++a)r=e.createRange(o),r.selectNode(n.item(a)),t._ranges.push(r);t.isCollapsed=1==t.rangeCount&&t._ranges[0].collapsed,i(t,t._ranges[t.rangeCount-1],!1)}}}function p(e,t){for(var n=e.docSelection.createRange(),r=c(t),i=T.getDocument(n.item(0)),o=T.getBody(i).createControlRange(),s=0,a=n.length;a>s;++s)o.add(n.item(s));try{o.add(r)}catch(l){throw new Error("addRange(): Element within the specified Range could not be added to control selection (does it have layout?)")}o.select(),h(e)}function f(e,t,n){this.nativeSelection=e,this.docSelection=t,this._ranges=[],this.win=n,this.refresh()}function m(e,t){for(var n,r=T.getDocument(t[0].startContainer),i=T.getBody(r).createControlRange(),o=0;rangeCount>o;++o){n=c(t[o]);try{i.add(n)}catch(s){throw new Error("setRanges(): Element within the one of the specified Ranges could not be added to control selection (does it have layout?)")}}i.select(),h(e)}function g(e,t){if(e.anchorNode&&T.getDocument(e.anchorNode)!==T.getDocument(t))throw new x("WRONG_DOCUMENT_ERR")}function y(e){var t=[],n=new N(e.anchorNode,e.anchorOffset),r=new N(e.focusNode,e.focusOffset),i="function"==typeof e.getName?e.getName():"Selection";if("undefined"!=typeof e.rangeCount)for(var o=0,s=e.rangeCount;s>o;++o)t[o]=E.inspect(e.getRangeAt(o));return"["+i+"(Ranges: "+t.join(", ")+")(anchor: "+n.inspect()+", focus: "+r.inspect()+"]"}e.requireModules(["DomUtil","DomRange","WrappedRange"]),e.config.checkSelectionRanges=!0;var _,v,b="boolean",C="_rangySelection",T=e.dom,w=e.util,E=e.DomRange,S=e.WrappedRange,x=e.DOMException,N=T.DomPosition,M="Control",W=e.util.isHostMethod(window,"getSelection"),R=e.util.isHostObject(document,"selection"),L=R&&(!W||e.config.preferTextRange);L?(_=r,e.isSelectionValid=function(e){var t=(e||window).document,n=t.selection;return"None"!=n.type||T.getDocument(n.createRange().parentElement())==t}):W?(_=n,e.isSelectionValid=function(){return!0}):t.fail("Neither document.selection or window.getSelection() detected."),e.getNativeSelection=_;var A=_(),Y=e.createNativeRange(document),I=T.getBody(document),O=w.areHostObjects(A,["anchorNode","focusNode"]&&w.areHostProperties(A,["anchorOffset","focusOffset"]));e.features.selectionHasAnchorAndFocus=O;var k=w.isHostMethod(A,"extend");e.features.selectionHasExtend=k;var D="number"==typeof A.rangeCount;e.features.selectionHasRangeCount=D;var j=!1,P=!0;w.areHostMethods(A,["addRange","getRangeAt","removeAllRanges"])&&"number"==typeof A.rangeCount&&e.features.implementsDomRange&&!function(){var e=document.createElement("iframe");I.appendChild(e);var t=T.getIframeDocument(e);t.open(),t.write("<html><head></head><body>12</body></html>"),t.close();var n=T.getIframeWindow(e).getSelection(),r=t.documentElement,i=r.lastChild,o=i.firstChild,s=t.createRange();s.setStart(o,1),s.collapse(!0),n.addRange(s),P=1==n.rangeCount,n.removeAllRanges();var a=s.cloneRange();s.setStart(o,0),a.setEnd(o,2),n.addRange(s),n.addRange(a),j=2==n.rangeCount,s.detach(),a.detach(),I.removeChild(e)}(),e.features.selectionSupportsMultipleRanges=j,e.features.collapsedNonEditableSelectionsSupported=P;var H,B=!1;I&&w.isHostMethod(I,"createControlRange")&&(H=I.createControlRange(),w.areHostProperties(H,["item","add"])&&(B=!0)),e.features.implementsControlRange=B,v=O?function(e){return e.anchorNode===e.focusNode&&e.anchorOffset===e.focusOffset}:function(e){return e.rangeCount?e.getRangeAt(e.rangeCount-1).collapsed:!1};var Q;w.isHostMethod(A,"getRangeAt")?Q=function(e,t){try{return e.getRangeAt(t)}catch(n){return null}}:O&&(Q=function(t){var n=T.getDocument(t.anchorNode),r=e.createRange(n);return r.setStart(t.anchorNode,t.anchorOffset),r.setEnd(t.focusNode,t.focusOffset),r.collapsed!==this.isCollapsed&&(r.setStart(t.focusNode,t.focusOffset),r.setEnd(t.anchorNode,t.anchorOffset)),r}),e.getSelection=function(e){e=e||window;var t=e[C],n=_(e),i=R?r(e):null;return t?(t.nativeSelection=n,t.docSelection=i,t.refresh(e)):(t=new f(n,i,e),e[C]=t),t},e.getIframeSelection=function(t){return e.getSelection(T.getIframeWindow(t))};var F=f.prototype;if(!L&&O&&w.areHostMethods(A,["removeAllRanges","addRange"])){F.removeAllRanges=function(){this.nativeSelection.removeAllRanges(),s(this)};var q=function(t,n){var r=E.getRangeDocument(n),i=e.createRange(r);i.collapseToPoint(n.endContainer,n.endOffset),t.nativeSelection.addRange(a(i)),t.nativeSelection.extend(n.startContainer,n.startOffset),t.refresh()};F.addRange=D?function(t,n){if(B&&R&&this.docSelection.type==M)p(this,t);else if(n&&k)q(this,t);else{var r;if(j?r=this.rangeCount:(this.removeAllRanges(),r=0),this.nativeSelection.addRange(a(t)),this.rangeCount=this.nativeSelection.rangeCount,this.rangeCount==r+1){if(e.config.checkSelectionRanges){var o=Q(this.nativeSelection,this.rangeCount-1);o&&!E.rangesEqual(o,t)&&(t=new S(o))}this._ranges[this.rangeCount-1]=t,i(this,t,U(this.nativeSelection)),this.isCollapsed=v(this)}else this.refresh()}}:function(e,t){t&&k?q(this,e):(this.nativeSelection.addRange(a(e)),this.refresh())},F.setRanges=function(e){if(B&&e.length>1)m(this,e);else{this.removeAllRanges();for(var t=0,n=e.length;n>t;++t)this.addRange(e[t])}}}else{if(!(w.isHostMethod(A,"empty")&&w.isHostMethod(Y,"select")&&B&&L))return t.fail("No means of selecting a Range or TextRange was found"),!1;F.removeAllRanges=function(){try{if(this.docSelection.empty(),"None"!=this.docSelection.type){var e;if(this.anchorNode)e=T.getDocument(this.anchorNode);else if(this.docSelection.type==M){var t=this.docSelection.createRange();t.length&&(e=T.getDocument(t.item(0)).body.createTextRange())}if(e){var n=e.body.createTextRange();n.select(),this.docSelection.empty()}}}catch(r){}s(this)},F.addRange=function(e){this.docSelection.type==M?p(this,e):(S.rangeToTextRange(e).select(),this._ranges[0]=e,this.rangeCount=1,this.isCollapsed=this._ranges[0].collapsed,i(this,e,!1))},F.setRanges=function(e){this.removeAllRanges();var t=e.length;t>1?m(this,e):t&&this.addRange(e[0])}}F.getRangeAt=function(e){if(0>e||e>=this.rangeCount)throw new x("INDEX_SIZE_ERR");return this._ranges[e]};var X;if(L)X=function(t){var n;e.isSelectionValid(t.win)?n=t.docSelection.createRange():(n=T.getBody(t.win.document).createTextRange(),n.collapse(!0)),t.docSelection.type==M?h(t):u(n)?d(t,n):s(t)};else if(w.isHostMethod(A,"getRangeAt")&&"number"==typeof A.rangeCount)X=function(t){if(B&&R&&t.docSelection.type==M)h(t);else if(t._ranges.length=t.rangeCount=t.nativeSelection.rangeCount,t.rangeCount){for(var n=0,r=t.rangeCount;r>n;++n)t._ranges[n]=new e.WrappedRange(t.nativeSelection.getRangeAt(n));i(t,t._ranges[t.rangeCount-1],U(t.nativeSelection)),t.isCollapsed=v(t)}else s(t)};else{if(!O||typeof A.isCollapsed!=b||typeof Y.collapsed!=b||!e.features.implementsDomRange)return t.fail("No means of obtaining a Range or TextRange from the user's selection was found"),!1;X=function(e){var t,n=e.nativeSelection;n.anchorNode?(t=Q(n,0),e._ranges=[t],e.rangeCount=1,o(e),e.isCollapsed=v(e)):s(e)}}F.refresh=function(e){var t=e?this._ranges.slice(0):null;if(X(this),e){var n=t.length;if(n!=this._ranges.length)return!1;for(;n--;)if(!E.rangesEqual(t[n],this._ranges[n]))return!1;return!0}};var $=function(e,t){var n=e.getAllRanges(),r=!1;e.removeAllRanges();for(var i=0,o=n.length;o>i;++i)r||t!==n[i]?e.addRange(n[i]):r=!0;e.rangeCount||s(e)};F.removeRange=B?function(e){if(this.docSelection.type==M){for(var t,n=this.docSelection.createRange(),r=c(e),i=T.getDocument(n.item(0)),o=T.getBody(i).createControlRange(),s=!1,a=0,l=n.length;l>a;++a)t=n.item(a),t!==r||s?o.add(n.item(a)):s=!0;o.select(),h(this)}else $(this,e)}:function(e){$(this,e)};var U;!L&&O&&e.features.implementsDomRange?(U=function(e){var t=!1;
return e.anchorNode&&(t=1==T.comparePoints(e.anchorNode,e.anchorOffset,e.focusNode,e.focusOffset)),t},F.isBackwards=function(){return U(this)}):U=F.isBackwards=function(){return!1},F.toString=function(){for(var e=[],t=0,n=this.rangeCount;n>t;++t)e[t]=""+this._ranges[t];return e.join("")},F.collapse=function(t,n){g(this,t);var r=e.createRange(T.getDocument(t));r.collapseToPoint(t,n),this.removeAllRanges(),this.addRange(r),this.isCollapsed=!0},F.collapseToStart=function(){if(!this.rangeCount)throw new x("INVALID_STATE_ERR");var e=this._ranges[0];this.collapse(e.startContainer,e.startOffset)},F.collapseToEnd=function(){if(!this.rangeCount)throw new x("INVALID_STATE_ERR");var e=this._ranges[this.rangeCount-1];this.collapse(e.endContainer,e.endOffset)},F.selectAllChildren=function(t){g(this,t);var n=e.createRange(T.getDocument(t));n.selectNodeContents(t),this.removeAllRanges(),this.addRange(n)},F.deleteFromDocument=function(){if(B&&R&&this.docSelection.type==M){for(var e,t=this.docSelection.createRange();t.length;)e=t.item(0),t.remove(e),e.parentNode.removeChild(e);this.refresh()}else if(this.rangeCount){var n=this.getAllRanges();this.removeAllRanges();for(var r=0,i=n.length;i>r;++r)n[r].deleteContents();this.addRange(n[i-1])}},F.getAllRanges=function(){return this._ranges.slice(0)},F.setSingleRange=function(e){this.setRanges([e])},F.containsNode=function(e,t){for(var n=0,r=this._ranges.length;r>n;++n)if(this._ranges[n].containsNode(e,t))return!0;return!1},F.toHtml=function(){var e="";if(this.rangeCount){for(var t=E.getRangeDocument(this._ranges[0]).createElement("div"),n=0,r=this._ranges.length;r>n;++n)t.appendChild(this._ranges[n].cloneContents());e=t.innerHTML}return e},F.getName=function(){return"WrappedSelection"},F.inspect=function(){return y(this)},F.detach=function(){this.win[C]=null,this.win=this.anchorNode=this.focusNode=null},f.inspect=y,e.Selection=f,e.selectionPrototype=F,e.addCreateMissingNativeApiListener(function(t){"undefined"==typeof t.getSelection&&(t.getSelection=function(){return e.getSelection(this)}),t=null})}),rangy.createModule("SaveRestore",function(e,t){function n(e,t){return(t||document).getElementById(e)}function r(e,t){var n,r="selectionBoundary_"+ +new Date+"_"+(""+Math.random()).slice(2),i=u.getDocument(e.startContainer),o=e.cloneRange();return o.collapse(t),n=i.createElement("span"),n.id=r,n.style.lineHeight="0",n.style.display="none",n.className="rangySelectionBoundary",n.appendChild(i.createTextNode(d)),o.insertNode(n),o.detach(),n}function i(e,r,i,o){var s=n(i,e);s?(r[o?"setStartBefore":"setEndBefore"](s),s.parentNode.removeChild(s)):t.warn("Marker element has been removed. Cannot restore selection.")}function o(e,t){return t.compareBoundaryPoints(e.START_TO_START,e)}function s(i){i=i||window;var s=i.document;if(!e.isSelectionValid(i))return t.warn("Cannot save selection. This usually happens when the selection is collapsed and the selection document has lost focus."),void 0;var a,l,c,u=e.getSelection(i),d=u.getAllRanges(),h=[];d.sort(o);for(var p=0,f=d.length;f>p;++p)c=d[p],c.collapsed?(l=r(c,!1),h.push({markerId:l.id,collapsed:!0})):(l=r(c,!1),a=r(c,!0),h[p]={startMarkerId:a.id,endMarkerId:l.id,collapsed:!1,backwards:1==d.length&&u.isBackwards()});for(p=f-1;p>=0;--p)c=d[p],c.collapsed?c.collapseBefore(n(h[p].markerId,s)):(c.setEndBefore(n(h[p].endMarkerId,s)),c.setStartAfter(n(h[p].startMarkerId,s)));return u.setRanges(d),{win:i,doc:s,rangeInfos:h,restored:!1}}function a(r,o){if(!r.restored){for(var s,a,l=r.rangeInfos,c=e.getSelection(r.win),u=[],d=l.length,h=d-1;h>=0;--h){if(s=l[h],a=e.createRange(r.doc),s.collapsed){var p=n(s.markerId,r.doc);if(p){p.style.display="inline";var f=p.previousSibling;f&&3==f.nodeType?(p.parentNode.removeChild(p),a.collapseToPoint(f,f.length)):(a.collapseBefore(p),p.parentNode.removeChild(p))}else t.warn("Marker element has been removed. Cannot restore selection.")}else i(r.doc,a,s.startMarkerId,!0),i(r.doc,a,s.endMarkerId,!1);1==d&&a.normalizeBoundaries(),u[h]=a}1==d&&o&&e.features.selectionHasExtend&&l[0].backwards?(c.removeAllRanges(),c.addRange(u[0],!0)):c.setRanges(u),r.restored=!0}}function l(e,t){var r=n(t,e);r&&r.parentNode.removeChild(r)}function c(e){for(var t,n=e.rangeInfos,r=0,i=n.length;i>r;++r)t=n[r],t.collapsed?l(e.doc,t.markerId):(l(e.doc,t.startMarkerId),l(e.doc,t.endMarkerId))}e.requireModules(["DomUtil","DomRange","WrappedRange"]);var u=e.dom,d="";e.saveSelection=s,e.restoreSelection=a,e.removeMarkerElement=l,e.removeMarkers=c}),WYMeditor.editor.prototype.init=function(){var WymClass=!1,SaxListener,prop,h,iframeHtml,boxHtml,aTools,sTools,oTool,sTool,i,aClasses,sClasses,oClass,sClass,aContainers,sContainers,sContainer,oContainer;if(jQuery.browser.msie?WymClass=new WYMeditor.WymClassExplorer(this):jQuery.browser.mozilla?WymClass=new WYMeditor.WymClassMozilla(this):jQuery.browser.opera?WymClass=new WYMeditor.WymClassOpera(this):(jQuery.browser.safari||jQuery.browser.webkit||jQuery.browser.chrome)&&(WymClass=new WYMeditor.WymClassSafari(this)),WymClass!==!1){jQuery.isFunction(this._options.preInit)&&this._options.preInit(this),this.parser=null,this.helper=null,SaxListener=new WYMeditor.XhtmlSaxListener,this.parser=new WYMeditor.XhtmlParser(SaxListener),(this._options.styles||this._options.stylesheet)&&this.configureEditorUsingRawCss(),this.helper=new WYMeditor.XmlHelper;for(prop in WymClass)this[prop]=WymClass[prop];for(this._box=jQuery(this._element).hide().after(this._options.boxHtml).next().addClass("wym_box_"+this._index),jQuery.isFunction(jQuery.fn.data)&&(jQuery.data(this._box.get(0),WYMeditor.WYM_INDEX,this._index),jQuery.data(this._element.get(0),WYMeditor.WYM_INDEX,this._index)),h=WYMeditor.Helper,iframeHtml=this._options.iframeHtml,iframeHtml=h.replaceAll(iframeHtml,WYMeditor.INDEX,this._index),iframeHtml=h.replaceAll(iframeHtml,WYMeditor.IFRAME_BASE_PATH,this._options.iframeBasePath),boxHtml=jQuery(this._box).html(),boxHtml=h.replaceAll(boxHtml,WYMeditor.LOGO,this._options.logoHtml),boxHtml=h.replaceAll(boxHtml,WYMeditor.TOOLS,this._options.toolsHtml),boxHtml=h.replaceAll(boxHtml,WYMeditor.CONTAINERS,this._options.containersHtml),boxHtml=h.replaceAll(boxHtml,WYMeditor.CLASSES,this._options.classesHtml),boxHtml=h.replaceAll(boxHtml,WYMeditor.HTML,this._options.htmlHtml),boxHtml=h.replaceAll(boxHtml,WYMeditor.IFRAME,iframeHtml),boxHtml=h.replaceAll(boxHtml,WYMeditor.STATUS,this._options.statusHtml),aTools=eval(this._options.toolsItems),sTools="",i=0;i<aTools.length;i+=1)oTool=aTools[i],sTool="",oTool.name&&oTool.title&&(sTool=this._options.toolsItemHtml),sTool=h.replaceAll(sTool,WYMeditor.TOOL_NAME,oTool.name),sTool=h.replaceAll(sTool,WYMeditor.TOOL_TITLE,this._options.stringDelimiterLeft+oTool.title+this._options.stringDelimiterRight),sTool=h.replaceAll(sTool,WYMeditor.TOOL_CLASS,oTool.css),sTools+=sTool;for(boxHtml=h.replaceAll(boxHtml,WYMeditor.TOOLS_ITEMS,sTools),aClasses=eval(this._options.classesItems),sClasses="",i=0;i<aClasses.length;i+=1)oClass=aClasses[i],sClass="",oClass.name&&oClass.title&&(sClass=this._options.classesItemHtml),sClass=h.replaceAll(sClass,WYMeditor.CLASS_NAME,oClass.name),sClass=h.replaceAll(sClass,WYMeditor.CLASS_TITLE,oClass.title),sClasses+=sClass;for(boxHtml=h.replaceAll(boxHtml,WYMeditor.CLASSES_ITEMS,sClasses),aContainers=eval(this._options.containersItems),sContainers="",i=0;i<aContainers.length;i+=1)oContainer=aContainers[i],sContainer="",oContainer.name&&oContainer.title&&(sContainer=this._options.containersItemHtml),sContainer=h.replaceAll(sContainer,WYMeditor.CONTAINER_NAME,oContainer.name),sContainer=h.replaceAll(sContainer,WYMeditor.CONTAINER_TITLE,this._options.stringDelimiterLeft+oContainer.title+this._options.stringDelimiterRight),sContainer=h.replaceAll(sContainer,WYMeditor.CONTAINER_CLASS,oContainer.css),sContainers+=sContainer;boxHtml=h.replaceAll(boxHtml,WYMeditor.CONTAINERS_ITEMS,sContainers),boxHtml=this.replaceStrings(boxHtml),jQuery(this._box).html(boxHtml),jQuery(this._box).find(this._options.htmlSelector).hide(),this.documentStructureManager=new WYMeditor.DocumentStructureManager(this,this._options.structureRules.defaultRootContainer),this.loadSkin()}},WYMeditor.editor.prototype.bindEvents=function(){var wym=this,$html_val;jQuery(this._box).find(this._options.toolSelector).click(function(){return wym._iframe.contentWindow.focus(),wym.exec(jQuery(this).attr(WYMeditor.NAME)),!1}),jQuery(this._box).find(this._options.containerSelector).click(function(){return wym.container(jQuery(this).attr(WYMeditor.NAME)),!1}),$html_val=jQuery(this._box).find(this._options.htmlValSelector),$html_val.keyup(function(){jQuery(wym._doc.body).html(jQuery(this).val())}),$html_val.focus(function(){jQuery(this).toggleClass("hasfocus")}),$html_val.blur(function(){jQuery(this).toggleClass("hasfocus")}),jQuery(this._box).find(this._options.classSelector).click(function(){var aClasses=eval(wym._options.classesItems),sName=jQuery(this).attr(WYMeditor.NAME),oClass=WYMeditor.Helper.findByName(aClasses,sName),jqexpr;return oClass&&(jqexpr=oClass.expr,wym.toggleClass(sName,jqexpr)),wym._iframe.contentWindow.focus(),!1}),jQuery(this._options.updateSelector).bind(this._options.updateEvent,function(){wym.update()})},WYMeditor.editor.prototype.ready=function(){return null!==this._doc},WYMeditor.editor.prototype.box=function(){return this._box},WYMeditor.editor.prototype._html=function(e){return"string"!=typeof e?jQuery(this._doc.body).html():(jQuery(this._doc.body).html(e),this.update(),void 0)},WYMeditor.editor.prototype.html=function(e){return WYMeditor.console.warn("The function WYMeditor.editor.html() is deprecated. Use either WYMeditor.editor.xhtml() or WYMeditor.editor._html() instead."),"string"!=typeof e?this._html():(this._html(e),void 0)},WYMeditor.editor.prototype.xhtml=function(){return this.parser.parse(this._html())},WYMeditor.editor.prototype.exec=function(e){var t,n,r=this;switch(e){case WYMeditor.CREATE_LINK:t=this.container(),(t||this._selected_image)&&this.dialog(WYMeditor.DIALOG_LINK);break;case WYMeditor.INSERT_IMAGE:this.dialog(WYMeditor.DIALOG_IMAGE);break;case WYMeditor.INSERT_TABLE:this.dialog(WYMeditor.DIALOG_TABLE);break;case WYMeditor.PASTE:this.dialog(WYMeditor.DIALOG_PASTE);break;case WYMeditor.TOGGLE_HTML:this.update(),this.toggleHtml();break;case WYMeditor.PREVIEW:this.dialog(WYMeditor.PREVIEW,this._options.dialogFeaturesPreview);break;case WYMeditor.INSERT_ORDEREDLIST:this.insertOrderedlist();break;case WYMeditor.INSERT_UNORDEREDLIST:this.insertUnorderedlist();break;case WYMeditor.INDENT:this.indent();break;case WYMeditor.OUTDENT:this.outdent();break;default:n=!1,jQuery.each(this._options.customCommands,function(){return e===this.name?(n=!0,this.run.apply(r),!1):void 0}),n||this._exec(e)}},WYMeditor.editor.prototype.selection=function(){window.rangy&&!rangy.initialized&&rangy.init();var e=this._iframe,t=rangy.getIframeSelection(e);return t},WYMeditor.editor.prototype.selected=function(){var e,t=this.selection(),n=t.focusNode;if(n){if(jQuery.browser.msie){var r=n.tagName&&"body"===n.tagName.toLowerCase(),i="#text"===n.nodeName;t.isCollapsed&&(r||i)&&(e=this._iframe.contentWindow.document.caretPos,e&&e.parentElement&&(n=e.parentElement()))}return"#text"===n.nodeName?n.parentNode:n}return null},WYMeditor.editor.prototype.selection_collapsed=function(){var e=this.selection(),t=!1;return jQuery.each(e.getAllRanges(),function(){return this.collapsed?(t=!0,!1):void 0}),t},WYMeditor.editor.prototype.selected_contains=function(e){var t=this.selection(),n=[];return jQuery.each(t.getAllRanges(),function(){jQuery.each(this.getNodes(),function(){jQuery(this).is(e)&&n.push(this)})}),n},WYMeditor.editor.prototype.selected_parents_contains=function(e){var t=jQuery([]),n=jQuery(this.selected());return n.is(e)&&(t=t.add(n)),t=t.add(n.parents(e))},WYMeditor.editor.prototype.container=function(e){if("undefined"==typeof e)return this.selected();var t,n,r,i,o,s,a=null;if(e.toLowerCase()===WYMeditor.TH){switch(a=this.container(),a.tagName.toLowerCase()){case WYMeditor.TD:case WYMeditor.TH:break;default:aTypes=[WYMeditor.TD,WYMeditor.TH],a=this.findUp(this.container(),aTypes)}null!==a&&(e=WYMeditor.TD,a.tagName.toLowerCase()===WYMeditor.TD&&(e=WYMeditor.TH),this.switchTo(a,e,!1),this.update())}else if(aTypes=[WYMeditor.P,WYMeditor.DIV,WYMeditor.H1,WYMeditor.H2,WYMeditor.H3,WYMeditor.H4,WYMeditor.H5,WYMeditor.H6,WYMeditor.PRE,WYMeditor.BLOCKQUOTE],a=this.findUp(this.container(),aTypes)){if(e.toLowerCase()===WYMeditor.BLOCKQUOTE)if(n=this.findUp(this.container(),WYMeditor.BLOCKQUOTE),null===n)t=this._doc.createElement(e),a.parentNode.insertBefore(t,a),t.appendChild(a),this.setFocusToNode(t.firstChild);else{for(r=n.childNodes,i=r.length,i>0&&(o=r.item(0)),s=0;i>s;s+=1)n.parentNode.insertBefore(r.item(0),n);n.parentNode.removeChild(n),o&&this.setFocusToNode(o)}else this.switchTo(a,e);this.update()}return!1},WYMeditor.editor.prototype.isForbiddenMainContainer=function(e){return jQuery.inArray(e.toLowerCase(),WYMeditor.FORBIDDEN_MAIN_CONTAINERS)>-1},WYMeditor.editor.prototype.keyCanCreateBlockElement=function(e){return jQuery.inArray(e,WYMeditor.POTENTIAL_BLOCK_ELEMENT_CREATION_KEYS)>-1},WYMeditor.editor.prototype.toggleClass=function(e,t){var n=null;n=this._selected_image?this._selected_image:jQuery(this.selected()),n=jQuery(n).parentsOrSelf(t),jQuery(n).toggleClass(e),jQuery(n).attr(WYMeditor.CLASS)||jQuery(n).removeAttr(this._class)},WYMeditor.editor.prototype.findUp=function(e,t){if("undefined"==typeof e||null===e)return null;"#text"===e.nodeName&&(e=e.parentNode);var n,r,i=e.tagName.toLowerCase();if(typeof t===WYMeditor.STRING)for(;i!==t&&i!==WYMeditor.BODY;)e=e.parentNode,i=e.tagName.toLowerCase();else for(n=!1;!n&&i!==WYMeditor.BODY;){for(r=0;r<t.length;r+=1)if(i===t[r]){n=!0;break}if(!n){if(e=e.parentNode,null===e)return null;i=e.tagName.toLowerCase()}}return i===WYMeditor.BODY?null:e},WYMeditor.editor.prototype.switchTo=function(e,t,n){var r,i=this._doc.createElement(t),o=jQuery(e).html(),s=e.attributes;if(!n)for(r=0;r<s.length;++r)i.setAttribute(s.item(r).nodeName,s.item(r).nodeValue);i.innerHTML=o,e.parentNode.replaceChild(i,e),this.setFocusToNode(i)},WYMeditor.editor.prototype.replaceStrings=function(sVal){var key;if(!WYMeditor.STRINGS[this._options.lang])try{eval(jQuery.ajax({url:this._options.langPath+this._options.lang+".js",async:!1}).responseText)}catch(e){return WYMeditor.console.error("WYMeditor: error while parsing language file."),sVal}for(key in WYMeditor.STRINGS[this._options.lang])WYMeditor.STRINGS[this._options.lang].hasOwnProperty(key)&&(sVal=WYMeditor.Helper.replaceAll(sVal,this._options.stringDelimiterLeft+key+this._options.stringDelimiterRight,WYMeditor.STRINGS[this._options.lang][key]));return sVal},WYMeditor.editor.prototype.encloseString=function(e){return this._options.stringDelimiterLeft+e+this._options.stringDelimiterRight},WYMeditor.editor.prototype.status=function(e){jQuery(this._box).find(this._options.statusSelector).html(e)},WYMeditor.editor.prototype.update=function(){var e;e=this.xhtml(),jQuery(this._element).val(e),jQuery(this._box).find(this._options.htmlValSelector).not(".hasfocus").val(e),this.fixBodyHtml()},WYMeditor.editor.prototype.fixBodyHtml=function(){this.spaceBlockingElements(),this.fixDoubleBr()},WYMeditor.editor.prototype.spaceBlockingElements=function(){var e,t,n,r,i,o,s=WYMeditor.DocumentStructureManager.CONTAINERS_BLOCKING_NAVIGATION.join(", "),a=jQuery(this._doc).find("body.wym_iframe"),l=a.children();e=jQuery.browser.mozilla?'<br class="'+WYMeditor.BLOCKING_ELEMENT_SPACER_CLASS+" "+WYMeditor.EDITOR_ONLY_CLASS+'" _moz_editor_bogus_node="TRUE" _moz_dirty=""/>':'<br class="'+WYMeditor.BLOCKING_ELEMENT_SPACER_CLASS+" "+WYMeditor.EDITOR_ONLY_CLASS+'"/>',l.length>0&&(t=jQuery(l[0]),n=jQuery(l[l.length-1]),t.is(s)&&t.before(e),!n.is(s)||jQuery.browser.msie&&jQuery.browser.version<"7.0"||n.after(e)),r=this._getBlockSepSelector(),a.find(r).before(e),i=this._getBlockInListSepSelector(),o=a.find(i),o.each(function(){var t=jQuery(this);t.next(s).length||t.next(WYMeditor.BR).length||t.after(e)})},WYMeditor.editor.prototype._getBlockSepSelector=function(){if("undefined"!=typeof this._blockSpacersSel)return this._blockSpacersSel;var e,t=this,n=[],r=WYMeditor.DocumentStructureManager.CONTAINERS_BLOCKING_NAVIGATION;return e=jQuery.grep(t.documentStructureManager.structureRules.validRootContainers,function(e){return-1===jQuery.inArray(e,r)}),jQuery.each(r,function(e,t){jQuery.each(r,function(e,r){n.push(t+" + "+r)})}),jQuery.each(r,function(t,r){jQuery.each(e,function(e,t){n.push(r+" + "+t),n.push(t+" + "+r)})}),this._blockSpacersSel=n.join(", "),this._blockSpacersSel},WYMeditor.editor.prototype._getBlockInListSepSelector=function(){if("undefined"!=typeof this._blockInListSpacersSel)return this._blockInListSpacersSel;var e=[];return jQuery.each(WYMeditor.LIST_TYPE_ELEMENTS,function(t,n){jQuery.each(WYMeditor.BLOCKING_ELEMENTS,function(t,r){e.push(n+" "+r)})}),this._blockInListSpacersSel=e.join(", "),this._blockInListSpacersSel},WYMeditor.editor.prototype.fixDoubleBr=function(){{var e,t=jQuery(this._doc).find("body.wym_iframe");WYMeditor.BLOCKING_ELEMENTS.join(", ")}t.children("br + br").filter(":not(pre br)").remove(),t.find("p + br").next("p").prev("br").remove(),e=t.find("p + br").slice(-1),e.length>0&&0===e.next().length&&e.remove()},WYMeditor.editor.prototype.dialog=function(e,t,n){var r,i,o,s=t||this._wym._options.dialogFeatures,a=window.open("","dialog",s),l=WYMeditor.Helper;if(a){switch(r="",e){case WYMeditor.DIALOG_LINK:r=this._options.dialogLinkHtml;break;case WYMeditor.DIALOG_IMAGE:r=this._options.dialogImageHtml;break;case WYMeditor.DIALOG_TABLE:r=this._options.dialogTableHtml;break;case WYMeditor.DIALOG_PASTE:r=this._options.dialogPasteHtml;break;case WYMeditor.PREVIEW:r=this._options.dialogPreviewHtml;break;default:r=n}i=this._options.dialogHtml,i=l.replaceAll(i,WYMeditor.BASE_PATH,this._options.basePath),i=l.replaceAll(i,WYMeditor.DIRECTION,this._options.direction),i=l.replaceAll(i,WYMeditor.CSS_PATH,this._options.skinPath+WYMeditor.SKINS_DEFAULT_CSS),i=l.replaceAll(i,WYMeditor.WYM_PATH,this._options.wymPath),i=l.replaceAll(i,WYMeditor.JQUERY_PATH,this._options.jQueryPath),i=l.replaceAll(i,WYMeditor.DIALOG_TITLE,this.encloseString(e)),i=l.replaceAll(i,WYMeditor.DIALOG_BODY,r),i=l.replaceAll(i,WYMeditor.INDEX,this._index),i=this.replaceStrings(i),o=a.document,o.write(i),o.close()}},WYMeditor.editor.prototype.toggleHtml=function(){jQuery(this._box).find(this._options.htmlSelector).toggle()},WYMeditor.editor.prototype.uniqueStamp=function(){var e=new Date;return"wym-"+e.getTime()},WYMeditor.editor.prototype._handleMultilineBlockContainerPaste=function(e,t,n,r){var i,o,s,a,l,c,u,d,h,p;for($insertAfter=jQuery(h),o="p",t.is("li")&&(o="li"),n.splitBoundaries(),h=e.findUp(n.startContainer,["p","h1","h2","h3","h4","h5","h6","li"]),p=h.tagName,s=[],a=[],jQuery(h).contents().each(function(e,t){l=n.compareNode(t),l===n.NODE_BEFORE||l===n.NODE_BEFORE_AND_AFTER&&n.startOffset===n.startContainer.length?s.push(t):a.push(t)}),i=0;i<s.length;i++)jQuery(s[i]).remove();for(i=0;i<a.length;i++)jQuery(a[i]).remove();for(s.length>0&&jQuery(h).prepend(s),a.length>0&&(c=jQuery("<"+p+"></"+p+">",e._doc),c.insertAfter(jQuery(h)),c.append(a)),u=r.splice(0,1)[0],d=u.split(WYMeditor.NEWLINE).join("<br />"),jQuery(h).html(jQuery(h).html()+d),$insertAfter=jQuery(h),i=0;i<r.length;i++)html="<"+o+">"+r[i].split(WYMeditor.NEWLINE).join("<br />")+"</"+o+">",$insertAfter=jQuery(html,e._doc).insertAfter($insertAfter)},WYMeditor.editor.prototype.paste=function(e){var t,n,r,i,o,s,a,l,c=this.selected(),u="",d=!1;if(s=this,i=rangy.getIframeSelection(s._iframe),a=i.getRangeAt(0),t=jQuery(c),a.collapse(!0),paragraphStrings=e.split(new RegExp(WYMeditor.NEWLINE+"{2,}","g")),1===paragraphStrings.length&&(d=!0),"undefined"==typeof c||c&&c.tagName.toLowerCase()===WYMeditor.BODY)if(d)n=jQuery("<p>"+paragraphStrings[0]+"</p>",this._doc).appendTo(this._doc.body);else for(blockSplitter="p",r=paragraphStrings.length-1;r>=0;r-=1)for(u="<"+blockSplitter+">"+paragraphStrings[r].split(WYMeditor.NEWLINE).join("<br />")+"</"+blockSplitter+">",l=jQuery(u,s._doc),j=l.length-1;j>=0;j--)a.insertNode(l[j]);else if(d||t.is("pre"))o=this._doc.createTextNode(e),a.insertNode(o);else if(t.is("p,h1,h2,h3,h4,h5,h6,li"))s._handleMultilineBlockContainerPaste(s,t,a,paragraphStrings);else for(textNodesToInsert=e.split(WYMeditor.NEWLINE),r=textNodesToInsert.length-1;r>=0;r-=1)o=this._doc.createTextNode(textNodesToInsert[r]),a.insertNode(o),r>0&&a.insertNode(jQuery("<br />",s._doc).get(0))},WYMeditor.editor.prototype.insert=function(e){var t,n,r=this._iframe.contentWindow.getSelection();null!==r.focusNode?(t=r.getRangeAt(0),n=t.createContextualFragment(e),t.deleteContents(),t.insertNode(n)):this.paste(e)},WYMeditor.editor.prototype.wrap=function(e,t){this.insert(e+this._iframe.contentWindow.getSelection().toString()+t)},WYMeditor.editor.prototype.unwrap=function(){this.insert(this._iframe.contentWindow.getSelection().toString())},WYMeditor.editor.prototype.setFocusToNode=function(e,t){var n=rangy.createRange(this._doc),r=rangy.getIframeSelection(this._iframe);t=t||!1,n.selectNodeContents(e),n.collapse(t),r.setSingleRange(n)},WYMeditor.editor.prototype.addCssRules=function(e,t){var n,r,i=e.styleSheets[0];if(i)for(n=0;n<t.length;n+=1)r=t[n],r.name&&r.css&&this.addCssRule(i,r)},WYMeditor.editor.prototype.splitListItemContents=function(e){var t,n,r,i=!1,o={itemContents:[],sublistContents:[]};for(t=e.contents(),n=0;n<t.length;n++)r=t.get(n),i||jQuery(r).is("ol,ul")?(i=!0,o.sublistContents.push(r)):o.itemContents.push(r);return o},WYMeditor.editor.prototype.joinAdjacentLists=function(e,t){var n;"undefined"!=typeof e&&"undefined"!=typeof t&&e.nextSibling===t&&e.tagName.toLowerCase()===t.tagName.toLowerCase()&&(n=jQuery(t).contents(),n.unwrap(),n.detach(),jQuery(e).append(n))},WYMeditor.editor.prototype._indentSingleItem=function(e){var t,n,r,i,o,s,a,l,c,u,d,h,p=this;t=jQuery(e),n=t.parent()[0].tagName.toLowerCase(),o=p.splitListItemContents(t),a=jQuery(o.sublistContents),s=jQuery(o.itemContents),l=t.prev().filter("li"),0===l.length&&(r='<li class="spacer_li"></li>',t.before(r),l=t.prev()),c=l.contents().last().filter("ol,ul"),c.length>0?(c.append(t),a.detach(),l.append(a),u=a.first(),p.joinAdjacentLists(c.get(0),u.get(0))):(a.length>0?(a.detach(),l.append(a),c=a.first()):(i="<"+n+"></"+n+">",l.append(i),c=l.contents().last()),c.prepend(t)),t.next().is(".spacer_li")&&(d=t.next(".spacer_li"),h=d.contents(),h.detach(),t.append(h),d.remove())},WYMeditor.editor.prototype._outdentSingleItem=function(e){var t,n,r,i,o,s,a,l,c,u,d,h=this;if(t=jQuery(e),n=t.parent()[0].tagName.toLowerCase(),t.parent().parent().is("ol,ul,li")){if(t.parent().parent().is("li")||(WYMeditor.console.log("Attempting to fix invalid list nesting before outdenting."),h.correctInvalidListNesting(e)),i=h.splitListItemContents(t),s=jQuery(i.sublistContents),o=jQuery(i.itemContents),a=t.parent().parent("li"),0===a.length)return WYMeditor.console.error("Invalid list. No parentLi found, so aborting outdent"),void 0;l=t.parent(),c=t.nextAllContents(),u=l.nextAllContents(),t.detach(),a.after(t),s.length>0&&(r="<"+n+'><li class="spacer_li"></li></'+n+">",t.append(r),d=t.children().last(),s.detach(),d.children("li").append(s)),c.length>0&&("undefined"==typeof d&&(r="<"+n+"></"+n+">",t.append(r),d=t.children().last()),c.detach(),d.append(c)),u.length>0&&(u.detach(),t.contents().length>0&&t.contents().last()[0].nodeType===WYMeditor.NODE.TEXT&&u[0].nodeType===WYMeditor.NODE.TEXT&&t.append("<br />"),t.append(u)),0===l.contents().length&&l.remove(),0===a.contents().length&&a.remove()}},WYMeditor.editor.prototype.correctInvalidListNesting=function(e,t){var n,r,i=e;if("undefined"==typeof t&&(t=!1),!i)return t;for(;i.parentNode&&(n=i.parentNode,n.nodeType===WYMeditor.NODE.ELEMENT)&&(r=n.tagName.toLowerCase(),"ol"===r||"ul"===r||"li"===r);)i=n;return jQuery(i).is("li")?(WYMeditor.console.log("Correcting orphaned root li before correcting invalid list nesting."),this._correctOrphanedListItem(i),this.correctInvalidListNesting(i,!0)):jQuery(i).is("ol,ul")?this._correctInvalidListNesting(i,t):(WYMeditor.console.error("Can't correct invalid list nesting. No root list found"),t)},WYMeditor.editor.prototype._correctOrphanedListItem=function(e){var t,n,r,i,o=jQuery();t=jQuery(e).prevContentsUntil(":not(li)"),n=jQuery(e).nextContentsUntil(":not(li)"),o=o.add(t),o=o.add(e),o=o.add(n),i=o[0].previousSibling,i&&jQuery(i).is("ol,ul")?r=i:(o.before("<ol></ol>"),r=o.prev()[0]),jQuery(r).append(o)},WYMeditor.editor.prototype._correctInvalidListNesting=function(e,t){var n,r,i,o,s,a,l=e,c=e,u=!1,d='<li class="spacer_li"></li>';for("undefined"!=typeof t&&(u=t);c;)if(c._wym_visited){if(c._wym_visited=!1,c===l)break;c=c.previousSibling?c.previousSibling:c.parentNode}else{if(c!==l&&!jQuery(c).is("li"))for(i=c;i.parentNode&&(i=i.parentNode,!jQuery(i).is("li"))&&i.nodeType===WYMeditor.NODE.ELEMENT;)if(r=i.tagName.toLowerCase(),"ol"===r||"ul"===r){for(WYMeditor.console.log("Fixing orphaned list content"),u=!0,o=[c],n=c,s=null;n.previousSibling;){if(n=n.previousSibling,jQuery(n).is("li")){s=n;break}o.push(n)}o.reverse(),s||1!==o.length||jQuery(c.nextSibling).is("li")&&(s=c.nextSibling),s||(jQuery(o[0]).before(d),s=jQuery(o[0]).prev()[0]),a=jQuery(s).contents().last(),1===a.length&&a[0].nodeType===WYMeditor.NODE.TEXT&&o[0].nodeType===WYMeditor.NODE.TEXT&&jQuery(s).append("<br />"),jQuery(s).append(jQuery(o));break}c.lastChild?(c._wym_visited=!0,c=c.lastChild):c=c.previousSibling?c.previousSibling:c.parentNode}return u},WYMeditor.editor.prototype.getCommonParentList=function(e){var t,n,r;return e=jQuery(e).filter("li"),0===e.length?null:(t=e[0],n=jQuery(t).parent("ol,ul"),0===n.length?null:(r=n[0],jQuery(e).each(function(e,t){return n=jQuery(t).parent("ol,ul"),0===n.length||n[0]!==r?null:void 0}),r))},WYMeditor.editor.prototype._getSelectedListItems=function(e){var t,n,r,i,o,s,a=this,l=[],c=[];for(i=function(e){var t;if(rangy.dom.isCharacterDataNode(e))return e;try{t=n.containsNodeText(e)}catch(r){return!0}return t===!0?!0:void 0},t=0;t<e.rangeCount;t++)if(n=e.getRangeAt(t),n.collapsed===!0)r=a.findUp(n.startContainer,"li"),r&&(l=l.concat([r]));else{for(l=l.concat(n.getNodes([],i)),o=[],j=0;j<l.length;j++)if(s=l[j],!jQuery(s).is("li,ol,ul"))for(;s.parentNode;)if(s=s.parentNode,jQuery(s).is("li")){o.push(s);break}for(j=0;j<o.length;j++)-1===jQuery.inArray(o[j],l)&&l.push(o[j])}for(t=0;t<l.length;t++)l[t].nodeType===WYMeditor.NODE.ELEMENT&&l[t].tagName.toLowerCase()===WYMeditor.LI&&c.push(l[t]);return c},WYMeditor.editor.prototype.indent=function(){var e,t,n,r=this._wym,o=rangy.getIframeSelection(this._iframe);return n=function(){var e=r.selected(),t=r.findUp(e,["ol","ul","li"]);return r.correctInvalidListNesting(t)},r.restoreSelectionAfterManipulation(n)?!0:(o=rangy.getIframeSelection(this._iframe),e=r._getSelectedListItems(o),0===e.length?!1:(t=r.getCommonParentList(e),null===t?!1:(n=function(){var t=!1;for(i=0;i<e.length;i++)r._indentSingleItem(e[i]),t=!0;return t},r.restoreSelectionAfterManipulation(n))))},WYMeditor.editor.prototype.outdent=function(){var e,t,n,r=this._wym,o=rangy.getIframeSelection(this._iframe);return n=function(){var e=r.selected(),t=r.findUp(e,["ol","ul","li"]);return r.correctInvalidListNesting(t)},r.restoreSelectionAfterManipulation(n)?!0:(o=rangy.getIframeSelection(this._iframe),e=r._getSelectedListItems(o),0===e.length?!1:(t=r.getCommonParentList(e),null===t?!1:(n=function(){var t=!1;for(i=0;i<e.length;i++)r._outdentSingleItem(e[i]),t=!0;return t},r.restoreSelectionAfterManipulation(n))))},WYMeditor.editor.prototype.restoreSelectionAfterManipulation=function(e){var t=(rangy.getIframeSelection(this._iframe),rangy.saveSelection(rangy.dom.getIframeWindow(this._iframe))),n=!0;try{n=e(),n?rangy.restoreSelection(t):rangy.removeMarkers(t)}catch(r){WYMeditor.console.error("Error during manipulation"),WYMeditor.console.error(r),rangy.removeMarkers(t)}return n},WYMeditor.editor.prototype.insertOrderedlist=function(){var e,t=this;return e=function(){var e=t.selected(),n=t.findUp(e,["ol","ul","li"]);return t.correctInvalidListNesting(n)},t.restoreSelectionAfterManipulation(e)?!0:(e=function(){return t._insertList("ol")},t.restoreSelectionAfterManipulation(e))},WYMeditor.editor.prototype.insertUnorderedlist=function(){var e,t=this;return e=function(){var e=t.selected(),n=t.findUp(e,["ol","ul","li"]);return t.correctInvalidListNesting(n)},t.restoreSelectionAfterManipulation(e)?!0:(e=function(){return t._insertList("ul")},t.restoreSelectionAfterManipulation(e))},WYMeditor.editor.prototype._insertList=function(e){var t,n,r,i,o=this._wym,s=rangy.getIframeSelection(this._iframe);return t=o._getSelectedListItems(s),0!==t.length?(n=o.getCommonParentList(t),n?(this._changeListType(n,e),!0):!1):(r=this.selected(),i=this.findUp(r,WYMeditor.POTENTIAL_LIST_ELEMENTS),i?(this._convertToList(i,e),!0):!1)},WYMeditor.editor.prototype._changeListType=function(e,t){return WYMeditor.changeNodeType(e,t)},WYMeditor.editor.prototype._convertToList=function(e,t){var n,r,i=jQuery(e);return n="<"+t+"><li></li></"+t+">",this.findUp(e,WYMeditor.MAIN_CONTAINERS)===e?(i.wrapInner(n),r=i.children(),r.unwrap(),r.get(0)):(i.wrapInner(n),r=i.children(),r.get(0))},WYMeditor.editor.prototype.insertTable=function(e,t,n,r){if(!(0>=e||0>=t)){var i,o,s,a,l,c=this._doc.createElement(WYMeditor.TABLE),u=null;for(i=c.createCaption(),i.innerHTML=n,o=0;e>o;o+=1)for(u=c.insertRow(o),s=0;t>s;s+=1)u.insertCell(s);if(""!==r&&jQuery(c).attr("summary",r),a=jQuery(this.findUp(this.container(),WYMeditor.POTENTIAL_TABLE_INSERT_ELEMENTS)).get(0),a&&a.parentNode)if(jQuery.inArray(a.nodeName.toLowerCase(),WYMeditor.INLINE_TABLE_INSERTION_ELEMENTS)>-1){if(l=this.selection().focusNode,jQuery.inArray(l.nodeName.toLowerCase(),WYMeditor.SELECTABLE_TABLE_ELEMENTS)>-1||jQuery.inArray(l.parentNode.nodeName.toLowerCase(),WYMeditor.SELECTABLE_TABLE_ELEMENTS)>-1)for(;l.nodeName.toLowerCase()!==WYMeditor.TABLE;)l=l.parentNode;l.nodeName.toLowerCase()===WYMeditor.LI?jQuery(l).append(c):jQuery(l).after(c)}else jQuery(a).after(c);else jQuery(this._doc.body).append(c);return this.afterInsertTable(c),this.fixBodyHtml(),c}},WYMeditor.editor.prototype.afterInsertTable=function(){},WYMeditor.editor.prototype.configureEditorUsingRawCss=function(){var e=new WYMeditor.WymCssParser;this._options.stylesheet?e.parse(jQuery.ajax({url:this._options.stylesheet,async:!1}).responseText):e.parse(this._options.styles,!1),0===this._options.classesItems.length&&(this._options.classesItems=e.css_settings.classesItems),0===this._options.editorStyles.length&&(this._options.editorStyles=e.css_settings.editorStyles),0===this._options.dialogStyles.length&&(this._options.dialogStyles=e.css_settings.dialogStyles)},WYMeditor.editor.prototype.listen=function(){var e=this;jQuery(this._doc.body).bind("mousedown",function(t){e.mousedown(t)})},WYMeditor.editor.prototype.mousedown=function(e){this._selected_image=null,e.target.tagName.toLowerCase()===WYMeditor.IMG&&(this._selected_image=e.target)},WYMeditor.loadCss=function(e){var t,n=document.createElement("link");n.rel="stylesheet",n.href=e,t=jQuery("head").get(0),t.appendChild(n)},WYMeditor.editor.prototype.loadSkin=function(){if(this._options.loadSkin&&!WYMeditor.SKINS[this._options.skin]){var found=!1,rExp=new RegExp(this._options.skin+"/"+WYMeditor.SKINS_DEFAULT_CSS+"$");jQuery("link").each(function(){this.href.match(rExp)&&(found=!0)}),found||WYMeditor.loadCss(this._options.skinPath+WYMeditor.SKINS_DEFAULT_CSS)}jQuery(this._box).addClass("wym_skin_"+this._options.skin),this._options.initSkin&&!WYMeditor.SKINS[this._options.skin]&&eval(jQuery.ajax({url:this._options.skinPath+WYMeditor.SKINS_DEFAULT_JS,async:!1}).responseText),WYMeditor.SKINS[this._options.skin]&&WYMeditor.SKINS[this._options.skin].init&&WYMeditor.SKINS[this._options.skin].init(this)},WYMeditor.DocumentStructureManager=function(e,t){this._wym=e,this.structureRules=WYMeditor.DocumentStructureManager.DEFAULTS,this.setDefaultRootContainer(t)},jQuery.extend(WYMeditor.DocumentStructureManager,{VALID_DEFAULT_ROOT_CONTAINERS:["p","div"],DEFAULT_ROOT_CONTAINER_TITLES:{p:"Paragraph",div:"Division"},CONTAINERS_BLOCKING_NAVIGATION:["table","blockquote","pre"],DEFAULTS:{defaultRootContainer:"p",notValidRootContainers:["div"],validRootContainers:["p","div","h1","h2","h3","h4","h5","h6","pre","blockquote","table","ol","ul"],convertIfRootContainers:["div"],validListConversionTargetContainers:["p","div","h1","h2","h3","h4","h5","h6","pre","blockquote","td","th"],wrapContentsInList:["td","th"]}}),WYMeditor.DocumentStructureManager.prototype.setDefaultRootContainer=function(e){var t,n;if(this.structureRules.defaultRootContainer!==e){if(t=WYMeditor.DocumentStructureManager.VALID_DEFAULT_ROOT_CONTAINERS,n=jQuery.inArray(e,t),-1===n)throw new Error("a defaultRootContainer of '"+e+"' is not supported");
this.structureRules.defaultRootContainer=e,this.structureRules.notValidRootContainers=WYMeditor.DocumentStructureManager.VALID_DEFAULT_ROOT_CONTAINERS,this.structureRules.notValidRootContainers.splice(n,1),this.adjustDefaultRootContainerUI()}},WYMeditor.DocumentStructureManager.prototype.adjustDefaultRootContainerUI=function(){var e,t,n,r,i,o,s,a=this._wym,l=this.structureRules.defaultRootContainer;for(e=jQuery(a._box).find(a._options.containersSelector).find("li"),i=!0,s=0;s<e.length;++s)t=e.eq(s).find("a"),r=t.attr("name").toLowerCase(),jQuery.inArray(r,this.structureRules.notValidRootContainers)>-1&&e.eq(s).remove(),r===l&&(i=!1);i&&(o=a._options.containersItemHtml,o=WYMeditor.Helper.replaceAll(o,WYMeditor.CONTAINER_NAME,l.toUpperCase()),o=WYMeditor.Helper.replaceAll(o,WYMeditor.CONTAINER_TITLE,WYMeditor.DocumentStructureManager.DEFAULT_ROOT_CONTAINER_TITLES[l]),o=WYMeditor.Helper.replaceAll(o,WYMeditor.CONTAINER_CLASS,"wym_containers_"+l),n=jQuery(o),e=jQuery(a._box).find(a._options.containersSelector).find("li"),e.eq(0).before(n),n.find("a").click(function(){return a.container(jQuery(this).attr(WYMeditor.NAME)),!1}))},WYMeditor.WymClassExplorer=function(e){this._wym=e,this._class="className"},WYMeditor.WymClassExplorer.prototype.initIframe=function(iframe){this._iframe=iframe,this._doc=iframe.contentWindow.document;var styles=this._doc.styleSheets[0],aCss=eval(this._options.editorStyles);this.addCssRules(this._doc,aCss),this._doc.title=this._wym._index,jQuery("html",this._doc).attr("dir",this._options.direction),jQuery(this._doc.body).html(this._wym._options.html);var wym=this;this._doc.body.onfocus=function(){wym._doc.designMode="on",wym._doc=iframe.contentWindow.document},this._doc.onbeforedeactivate=function(){wym.saveCaret()},jQuery(this._doc).bind("keyup",wym.keyup);var ieVersion=parseInt(jQuery.browser.version,10);ieVersion>=8&&9>ieVersion&&jQuery(this._doc).bind("keydown",function(){wym.fixBluescreenOfDeath()}),this._doc.onkeyup=function(){wym.saveCaret()},this._doc.onclick=function(){wym.saveCaret()},this._doc.body.onbeforepaste=function(){wym._iframe.contentWindow.event.returnValue=!1},this._doc.body.onpaste=function(){wym._iframe.contentWindow.event.returnValue=!1,wym.paste(window.clipboardData.getData("Text"))},this._initialized&&(jQuery.isFunction(this._options.preBind)&&this._options.preBind(this),this._wym.bindEvents(),jQuery.isFunction(this._options.postInit)&&this._options.postInit(this),this.listen()),this._initialized=!0,this._doc.designMode="on";try{this._doc=iframe.contentWindow.document}catch(e){}},!function(e){WYMeditor.WymClassExplorer.prototype.loadSkin=function(){jQuery(this._box).find(this._options.containerSelector).attr("unselectable","on"),e.call(this)}}(WYMeditor.editor.prototype.loadSkin),WYMeditor.WymClassExplorer.prototype.fixBluescreenOfDeath=function(){var e=jQuery(this._doc).find("p").eq(0).position();null!==e&&"undefined"!=typeof e&&e.left<0&&(jQuery(this._box).append('<br id="wym-bluescreen-bug-fix" />'),jQuery(this._box).find("#wym-bluescreen-bug-fix").remove())},WYMeditor.WymClassExplorer.prototype._exec=function(e,t){t?this._doc.execCommand(e,!1,t):this._doc.execCommand(e)},WYMeditor.WymClassExplorer.prototype.saveCaret=function(){this._doc.caretPos=this._doc.selection.createRange()},WYMeditor.WymClassExplorer.prototype.addCssRule=function(e,t){var n,r=t.name.split(",");for(n=0;n<r.length;n++)e.addRule(r[n],t.css)},WYMeditor.WymClassExplorer.prototype.insert=function(e){var t=this._doc.selection.createRange();if(jQuery(t.parentElement()).parents().is(this._options.iframeBodySelector))try{t.pasteHTML(e)}catch(n){}else this.paste(e)},WYMeditor.WymClassExplorer.prototype.wrap=function(e,t){var n=this._doc.selection.createRange();if(jQuery(n.parentElement()).parents().is(this._options.iframeBodySelector))try{n.pasteHTML(e+n.text+t)}catch(r){}},WYMeditor.WymClassExplorer.prototype.wrapWithContainer=function(e,t){var n,r,i,o=this._wym;n=jQuery(e).wrap("<"+t+" />"),r=rangy.getIframeSelection(o._iframe),i=rangy.createRange(o._doc),i.selectNodeContents(n[0]),i.collapse(),r.setSingleRange(i)},WYMeditor.WymClassExplorer.prototype.unwrap=function(){var e=this._doc.selection.createRange();if(jQuery(e.parentElement()).parents().is(this._options.iframeBodySelector))try{var t=e.text;this._exec("Cut"),e.pasteHTML(t)}catch(n){}},WYMeditor.WymClassExplorer.prototype.keyup=function(e){var t,n,r,i,o,s=WYMeditor.INSTANCES[this.title],a=!1;r=s.documentStructureManager.structureRules.notValidRootContainers,n=s.documentStructureManager.structureRules.defaultRootContainer,this._selected_image=null,s.keyCanCreateBlockElement(e.which)||e.which===WYMeditor.KEY.CTRL||e.which===WYMeditor.KEY.COMMAND||e.metaKey||e.ctrlKey||(t=s.selected(),selectedNode=s.selection().focusNode,null!==t&&(i=t.tagName.toLowerCase()),t.parentNode&&(o=t.parentNode.tagName.toLowerCase()),s.isForbiddenMainContainer(i)&&(i=o,a=!0),i===WYMeditor.BODY&&"#text"===selectedNode.nodeName&&(a&&(selectedNode=selectedNode.parentNode),s.wrapWithContainer(selectedNode,n),s.fixBodyHtml()),jQuery.inArray(i,r)>-1&&o===WYMeditor.BODY&&(s.switchTo(t,n),s.fixBodyHtml())),s.keyCanCreateBlockElement(e.which)&&(t=s.selected(),i=t.tagName.toLowerCase(),t.parentNode&&(o=t.parentNode.tagName.toLowerCase()),jQuery.inArray(i,r)>-1&&o===WYMeditor.BODY&&s.switchTo(t,n),s.fixBodyHtml())},WYMeditor.WymClassMozilla=function(e){this._wym=e,this._class="class"},WYMeditor.WymClassMozilla.CELL_PLACEHOLDER='<br _moz_dirty="" />',WYMeditor.WymClassMozilla.NEEDS_CELL_FIX=1===parseInt(jQuery.browser.version,10)&&jQuery.browser.version>="1.9.1"&&jQuery.browser.version<"2.0",WYMeditor.WymClassMozilla.prototype.initIframe=function(iframe){var wym=this,styles,aCss;this._iframe=iframe,this._doc=iframe.contentDocument,styles=this._doc.styleSheets[0],aCss=eval(this._options.editorStyles),this.addCssRules(this._doc,aCss),this._doc.title=this._wym._index,jQuery("html",this._doc).attr("dir",this._options.direction),this._html(this._wym._options.html),this.enableDesignMode(),jQuery.isFunction(this._options.preBind)&&this._options.preBind(this),this._wym.bindEvents(),jQuery(this._doc).bind("keydown",this.keydown),jQuery(this._doc).bind("keyup",this.keyup),jQuery(this._doc).bind("click",this.click),jQuery(this._doc).bind("focus",function(){wym.enableDesignMode.call(wym)}),jQuery.isFunction(this._options.postInit)&&this._options.postInit(this),this.listen()},WYMeditor.WymClassMozilla.prototype._html=function(e){if("string"!=typeof e)return jQuery(this._doc.body).html();try{this._doc.designMode="off"}catch(t){}return e=e.replace(/<em(\b[^>]*)>/gi,"<i$1>"),e=e.replace(/<\/em>/gi,"</i>"),e=e.replace(/<strong(\b[^>]*)>/gi,"<b$1>"),e=e.replace(/<\/strong>/gi,"</b>"),jQuery(this._doc.body).html(e),this._wym.fixBodyHtml(),this.enableDesignMode(),!1},WYMeditor.WymClassMozilla.prototype._exec=function(e,t){if(!this.selected())return!1;t?this._doc.execCommand(e,"",t):this._doc.execCommand(e,"",null);var n=this.selected();return n&&n.tagName.toLowerCase()===WYMeditor.BODY&&(this._exec(WYMeditor.FORMAT_BLOCK,WYMeditor.P),this.fixBodyHtml()),!0},WYMeditor.WymClassMozilla.prototype.addCssRule=function(e,t){e.insertRule(t.name+" {"+t.css+"}",e.cssRules.length)},WYMeditor.WymClassMozilla.prototype.keydown=function(e){var t=WYMeditor.INSTANCES[this.title];if(e.ctrlKey){if(66===e.which)return t._exec(WYMeditor.BOLD),!1;if(73===e.which)return t._exec(WYMeditor.ITALIC),!1}return!0},WYMeditor.WymClassMozilla.prototype.keyup=function(e){var t,n,r,i,o,s=WYMeditor.INSTANCES[this.title];r=s.documentStructureManager.structureRules.notValidRootContainers,n=s.documentStructureManager.structureRules.defaultRootContainer,s._selected_image=null,t=null,s.keyCanCreateBlockElement(e.which)||e.which===WYMeditor.KEY.CTRL||e.which===WYMeditor.KEY.COMMAND||e.metaKey||e.ctrlKey||(t=s.selected(),i=t.tagName.toLowerCase(),t.parentNode&&(o=t.parentNode.tagName.toLowerCase()),s.isForbiddenMainContainer(i)&&(i=o),(i===WYMeditor.BODY||jQuery.inArray(i,r)>-1&&o===WYMeditor.BODY)&&(s._exec(WYMeditor.FORMAT_BLOCK,n),s.fixBodyHtml())),s.keyCanCreateBlockElement(e.which)&&(t=s.selected(),i=t.tagName.toLowerCase(),t.parentNode&&(o=t.parentNode.tagName.toLowerCase()),jQuery.inArray(i,r)>-1&&o===WYMeditor.BODY&&s._exec(WYMeditor.FORMAT_BLOCK,n),s.fixBodyHtml())},WYMeditor.WymClassMozilla.prototype.click=function(){var e,t=WYMeditor.INSTANCES[this.title],n=t.selected();WYMeditor.WymClassMozilla.NEEDS_CELL_FIX===!0&&n&&n.tagName.toLowerCase()===WYMeditor.TR&&jQuery(WYMeditor.TD,t._doc.body).append(WYMeditor.WymClassMozilla.CELL_PLACEHOLDER),n&&n.tagName.toLowerCase()===WYMeditor.BODY&&(e=t._iframe.contentWindow.getSelection(),e.isCollapsed===!0&&t._exec(WYMeditor.FORMAT_BLOCK,WYMeditor.P))},WYMeditor.WymClassMozilla.prototype.enableDesignMode=function(){if("off"===this._doc.designMode)try{this._doc.designMode="on",this._doc.execCommand("styleWithCSS","",!1),this._doc.execCommand("enableObjectResizing",!1,!0)}catch(e){}},WYMeditor.WymClassMozilla.prototype.afterInsertTable=function(e){WYMeditor.WymClassMozilla.NEEDS_CELL_FIX===!0&&jQuery(e).find("td").each(function(e,t){jQuery(t).append(WYMeditor.WymClassMozilla.CELL_PLACEHOLDER)})},WYMeditor.WymClassOpera=function(e){this._wym=e,this._class="class"},WYMeditor.WymClassOpera.prototype.initIframe=function(iframe){this._iframe=iframe,this._doc=iframe.contentWindow.document;var styles=this._doc.styleSheets[0],aCss=eval(this._options.editorStyles);this.addCssRules(this._doc,aCss),this._doc.title=this._wym._index,jQuery("html",this._doc).attr("dir",this._options.direction),this._doc.designMode="on",this._html(this._wym._options.html),jQuery.isFunction(this._options.preBind)&&this._options.preBind(this),this._wym.bindEvents(),jQuery(this._doc).bind("keydown",this.keydown),jQuery(this._doc).bind("keyup",this.keyup),jQuery.isFunction(this._options.postInit)&&this._options.postInit(this),this.listen()},WYMeditor.WymClassOpera.prototype._exec=function(e,t){t?this._doc.execCommand(e,!1,t):this._doc.execCommand(e)},WYMeditor.WymClassOpera.prototype.selected=function(){var e=this._iframe.contentWindow.getSelection(),t=e.focusNode;return t?"#text"===t.nodeName?t.parentNode:t:null},WYMeditor.WymClassOpera.prototype.addCssRule=function(e,t){e.insertRule(t.name+" {"+t.css+"}",e.cssRules.length)},WYMeditor.WymClassOpera.prototype.keydown=function(e){var t=WYMeditor.INSTANCES[this.title],n=t._iframe.contentWindow.getSelection();startNode=n.getRangeAt(0).startContainer,jQuery(startNode).parentsOrSelf(WYMeditor.MAIN_CONTAINERS.join(","))[0]||jQuery(startNode).parentsOrSelf("li")||keyCanCreateBlockElement(e.which)||t._exec(WYMeditor.FORMAT_BLOCK,WYMeditor.P)},WYMeditor.WymClassOpera.prototype.keyup=function(){var e=WYMeditor.INSTANCES[this.title];e._selected_image=null},WYMeditor.WymClassSafari=function(e){this._wym=e,this._class="class"},WYMeditor.WymClassSafari.prototype.initIframe=function(iframe){var wym=this,styles,aCss;this._iframe=iframe,this._doc=iframe.contentDocument,styles=this._doc.styleSheets[0],aCss=eval(this._options.editorStyles),this.addCssRules(this._doc,aCss),this._doc.title=this._wym._index,jQuery("html",this._doc).attr("dir",this._options.direction),this._doc.designMode="on",this._html(this._wym._options.html),jQuery.isFunction(this._options.preBind)&&this._options.preBind(this),this._wym.bindEvents(),jQuery(this._doc).bind("keydown",this.keydown),jQuery(this._doc).bind("keyup",this.keyup),jQuery.isFunction(this._options.postInit)&&this._options.postInit(this),this.listen()},WYMeditor.WymClassSafari.prototype._exec=function(e,t){if(!this.selected())return!1;var n,r,i;return t?this._doc.execCommand(e,"",t):this._doc.execCommand(e,"",null),n=this.selected(),n&&(r=jQuery(n),i=n.tagName.toLowerCase(),i===WYMeditor.BODY&&(this._exec(WYMeditor.FORMAT_BLOCK,this.documentStructureManager.structureRules.defaultRootContainer),this.fixBodyHtml()),e===WYMeditor.FORMAT_BLOCK&&r.siblings("body.wym_iframe").length&&r.siblings("body.wym_iframe").append(n),"span"!==i||r.attr("class")&&"apple-style-span"!==r.attr("class").toLowerCase()||"font-weight: normal;"!==r.attr("style")||r.contents().unwrap()),!0},WYMeditor.WymClassSafari.prototype.addCssRule=function(e,t){e.insertRule(t.name+" {"+t.css+"}",e.cssRules.length)},WYMeditor.WymClassSafari.prototype.keydown=function(e){var t=WYMeditor.INSTANCES[this.title];e.ctrlKey?(e.which===WYMeditor.KEY.B&&(t._exec(WYMeditor.BOLD),e.preventDefault()),e.which===WYMeditor.KEY.I&&(t._exec(WYMeditor.ITALIC),e.preventDefault())):e.shiftKey&&e.which===WYMeditor.KEY.ENTER&&(t._exec("InsertLineBreak"),e.preventDefault())},WYMeditor.WymClassSafari.prototype.keyup=function(e){var t,n,r,i,o,s=WYMeditor.INSTANCES[this.title];r=s.documentStructureManager.structureRules.notValidRootContainers,n=s.documentStructureManager.structureRules.defaultRootContainer,s._selected_image=null,jQuery.browser.version<534.1&&e.which===WYMeditor.KEY.ENTER&&e.shiftKey&&s._exec("InsertLineBreak"),s.keyCanCreateBlockElement(e.which)||e.which===WYMeditor.KEY.CTRL||e.which===WYMeditor.KEY.COMMAND||e.metaKey||e.ctrlKey||(t=s.selected(),i=t.tagName.toLowerCase(),t.parentNode&&(o=t.parentNode.tagName.toLowerCase()),s.isForbiddenMainContainer(i)&&(i=o),(i===WYMeditor.BODY||jQuery.inArray(i,r)>-1&&o===WYMeditor.BODY)&&(s._exec(WYMeditor.FORMAT_BLOCK,n),s.fixBodyHtml())),s.keyCanCreateBlockElement(e.which)&&(t=s.selected(),i=t.tagName.toLowerCase(),t.parentNode&&(o=t.parentNode.tagName.toLowerCase()),jQuery.inArray(i,r)>-1&&o===WYMeditor.BODY&&s._exec(WYMeditor.FORMAT_BLOCK,n),s.fixBodyHtml())},WYMeditor.XmlHelper=function(){return this._entitiesDiv=document.createElement("div"),this},WYMeditor.XmlHelper.prototype.tag=function(e,t,n){return t=t||!1,n=n||!1,"<"+e+(t?this.tagOptions(t):"")+(n?">":" />")},WYMeditor.XmlHelper.prototype.contentTag=function(e,t,n){return n=n||!1,"<"+e+(n?this.tagOptions(n):"")+">"+t+"</"+e+">"},WYMeditor.XmlHelper.prototype.cdataSection=function(e){return"<![CDATA["+e+"]]>"},WYMeditor.XmlHelper.prototype.escapeOnce=function(e){return this._fixDoubleEscape(this.escapeEntities(e))},WYMeditor.XmlHelper.prototype._fixDoubleEscape=function(e){return e.replace(/&amp;([a-z]+|(#\d+));/gi,"&$1;")},WYMeditor.XmlHelper.prototype.tagOptions=function(e){var t=this;t._formated_options="";for(var n in e){var r=e[n];"function"!=typeof r&&r.length>0&&(parseInt(n,10)==n&&"object"==typeof r&&(n=r.shift(),r=r.pop()),""!==n&&""!==r&&(t._formated_options+=" "+n+'="'+t.escapeOnce(r)+'"'))}return t._formated_options},WYMeditor.XmlHelper.prototype.escapeEntities=function(e,t){this._entitiesDiv.innerHTML=e,this._entitiesDiv.textContent=e;var n=this._entitiesDiv.innerHTML;return"undefined"==typeof t&&(t!==!1&&(n=n.replace('"',"&quot;")),t===!0&&(n=n.replace('"',"&#039;"))),n},WYMeditor.XmlHelper.prototype.parseAttributes=function(e){var t=[],n=e.split(/((=\s*")(")("))|((=\s*\')(\')(\'))|((=\s*[^>\s]*))/g);if(n.toString()!=e)for(var r in n){var i=n[r];if("function"!=typeof i&&0!==i.length){var o=new RegExp("(\\w+)\\s*"+i),s=e.match(o);if(s){var a=i.replace(/^[\s=]+/,""),l=a.charAt(0);l='"'==l?'"':"'"==l?"'":"",""!==l&&(a='"'==l?a.replace(/^"|"+$/g,""):a.replace(/^'|'+$/g,"")),e=e.replace(s[0],""),t.push([s[1],a])}}}return t},WYMeditor.XhtmlValidator={_attributes:{core:{except:["base","head","html","meta","param","script","style","title"],attributes:["class","id","style","title","accesskey","tabindex","/^data-.*/"]},language:{except:["base","br","hr","iframe","param","script"],attributes:{dir:["ltr","rtl"],0:"lang",1:"xml:lang"}},keyboard:{attributes:{accesskey:/^(\w){1}$/,tabindex:/^(\d)+$/}}},_events:{window:{only:["body"],attributes:["onload","onunload"]},form:{only:["form","input","textarea","select","a","label","button"],attributes:["onchange","onsubmit","onreset","onselect","onblur","onfocus"]},keyboard:{except:["base","bdo","br","frame","frameset","head","html","iframe","meta","param","script","style","title"],attributes:["onkeydown","onkeypress","onkeyup"]},mouse:{except:["base","bdo","br","head","html","meta","param","script","style","title"],attributes:["onclick","ondblclick","onmousedown","onmousemove","onmouseover","onmouseout","onmouseup"]}},_tags:{a:{attributes:{0:"charset",1:"coords",2:"href",3:"hreflang",4:"name",5:"rel",6:"rev",shape:/^(rect|rectangle|circ|circle|poly|polygon)$/,7:"type"}},0:"abbr",1:"acronym",2:"address",area:{attributes:{0:"alt",1:"coords",2:"href",nohref:/^(true|false)$/,shape:/^(rect|rectangle|circ|circle|poly|polygon)$/},required:["alt"]},3:"b",base:{attributes:["href"],required:["href"]},bdo:{attributes:{dir:/^(ltr|rtl)$/},required:["dir"]},4:"big",blockquote:{attributes:["cite"]},5:"body",6:"br",button:{attributes:{disabled:/^(disabled)$/,type:/^(button|reset|submit)$/,0:"value"},inside:"form"},7:"caption",8:"cite",9:"code",col:{attributes:{align:/^(right|left|center|justify)$/,0:"char",1:"charoff",span:/^(\d)+$/,valign:/^(top|middle|bottom|baseline)$/,2:"width"},inside:"colgroup"},colgroup:{attributes:{align:/^(right|left|center|justify)$/,0:"char",1:"charoff",span:/^(\d)+$/,valign:/^(top|middle|bottom|baseline)$/,2:"width"}},10:"dd",del:{attributes:{0:"cite",datetime:/^([0-9]){8}/}},11:"div",12:"dfn",13:"dl",14:"dt",15:"em",fieldset:{inside:"form"},form:{attributes:{0:"action",1:"accept",2:"accept-charset",3:"enctype",method:/^(get|post)$/},required:["action"]},head:{attributes:["profile"]},16:"h1",17:"h2",18:"h3",19:"h4",20:"h5",21:"h6",22:"hr",html:{attributes:["xmlns"]},23:"i",img:{attributes:["alt","src","height","ismap","longdesc","usemap","width"],required:["alt","src"]},input:{attributes:{0:"accept",1:"alt",checked:/^(checked)$/,disabled:/^(disabled)$/,maxlength:/^(\d)+$/,2:"name",readonly:/^(readonly)$/,size:/^(\d)+$/,3:"src",type:/^(button|checkbox|file|hidden|image|password|radio|reset|submit|text)$/,4:"value"},inside:"form"},ins:{attributes:{0:"cite",datetime:/^([0-9]){8}/}},24:"kbd",label:{attributes:["for"],inside:"form"},25:"legend",26:"li",link:{attributes:{0:"charset",1:"href",2:"hreflang",media:/^(all|braille|print|projection|screen|speech|,|;| )+$/i,rel:/^(alternate|appendix|bookmark|chapter|contents|copyright|glossary|help|home|index|next|prev|section|start|stylesheet|subsection| |shortcut|icon)+$/i,rev:/^(alternate|appendix|bookmark|chapter|contents|copyright|glossary|help|home|index|next|prev|section|start|stylesheet|subsection| |shortcut|icon)+$/i,3:"type"},inside:"head"},map:{attributes:["id","name"],required:["id"]},meta:{attributes:{0:"content","http-equiv":/^(content\-type|expires|refresh|set\-cookie)$/i,1:"name",2:"scheme"},required:["content"]},27:"noscript",object:{attributes:["archive","classid","codebase","codetype","data","declare","height","name","standby","type","usemap","width"]},28:"ol",optgroup:{attributes:{0:"label",disabled:/^(disabled)$/},required:["label"]},option:{attributes:{0:"label",disabled:/^(disabled)$/,selected:/^(selected)$/,1:"value"},inside:"select"},29:"p",param:{attributes:{0:"type",valuetype:/^(data|ref|object)$/,1:"valuetype",2:"value"},required:["name"]},30:"pre",q:{attributes:["cite"]},31:"samp",script:{attributes:{type:/^(text\/ecmascript|text\/javascript|text\/jscript|text\/vbscript|text\/vbs|text\/xml)$/,0:"charset",defer:/^(defer)$/,1:"src"},required:["type"]},select:{attributes:{disabled:/^(disabled)$/,multiple:/^(multiple)$/,0:"name",1:"size"},inside:"form"},32:"small",33:"span",34:"strong",style:{attributes:{0:"type",media:/^(screen|tty|tv|projection|handheld|print|braille|aural|all)$/},required:["type"]},35:"sub",36:"sup",table:{attributes:{0:"border",1:"cellpadding",2:"cellspacing",frame:/^(void|above|below|hsides|lhs|rhs|vsides|box|border)$/,rules:/^(none|groups|rows|cols|all)$/,3:"summary",4:"width"}},tbody:{attributes:{align:/^(right|left|center|justify)$/,0:"char",1:"charoff",valign:/^(top|middle|bottom|baseline)$/}},td:{attributes:{0:"abbr",align:/^(left|right|center|justify|char)$/,1:"axis",2:"char",3:"charoff",colspan:/^(\d)+$/,4:"headers",rowspan:/^(\d)+$/,scope:/^(col|colgroup|row|rowgroup)$/,valign:/^(top|middle|bottom|baseline)$/}},textarea:{attributes:["cols","rows","disabled","name","readonly"],required:["cols","rows"],inside:"form"},tfoot:{attributes:{align:/^(right|left|center|justify)$/,0:"char",1:"charoff",valign:/^(top|middle|bottom)$/,2:"baseline"}},th:{attributes:{0:"abbr",align:/^(left|right|center|justify|char)$/,1:"axis",2:"char",3:"charoff",colspan:/^(\d)+$/,4:"headers",rowspan:/^(\d)+$/,scope:/^(col|colgroup|row|rowgroup)$/,valign:/^(top|middle|bottom|baseline)$/}},thead:{attributes:{align:/^(right|left|center|justify)$/,0:"char",1:"charoff",valign:/^(top|middle|bottom|baseline)$/}},37:"title",tr:{attributes:{align:/^(right|left|center|justify|char)$/,0:"char",1:"charoff",valign:/^(top|middle|bottom|baseline)$/}},38:"tt",39:"ul",40:"var"},skiped_attributes:[],skiped_attribute_values:[],getValidTagAttributes:function(e,t){var n={},r=this.getPossibleTagAttributes(e);for(var i in t){var o=t[i];i=i.toLowerCase();var s=WYMeditor.Helper;s.contains(this.skiped_attributes,i)||s.contains(this.skiped_attribute_values,o)||("function"!=typeof o&&s.contains(r,i)?this.doesAttributeNeedsValidation(e,i)?this.validateAttribute(e,i,o)&&(n[i]=o):n[i]=o:jQuery.each(r,function(){this.match(/\/(.*)\//)&&(regex=new RegExp(this.match(/\/(.*)\//)[1]),regex.test(i)&&(n[i]=o))}))}return n},getUniqueAttributesAndEventsForTag:function(e){var t=[];if(this._tags[e]&&this._tags[e].attributes)for(var n in this._tags[e].attributes)t.push(parseInt(n,10)==n?this._tags[e].attributes[n]:n);return t},getDefaultAttributesAndEventsForTags:function(){var e=[];for(var t in this._events)e.push(this._events[t]);for(t in this._attributes)e.push(this._attributes[t]);return e},isValidTag:function(e){if(this._tags[e])return!0;for(var t in this._tags)if(this._tags[t]==e)return!0;return!1},getDefaultAttributesAndEventsForTag:function(e){var t=[];if(this.isValidTag(e)){var n=this.getDefaultAttributesAndEventsForTags();for(var r in n){var i=n[r];if("object"==typeof i){var o=WYMeditor.Helper;if(i.except&&o.contains(i.except,e)||i.only&&!o.contains(i.only,e))continue;var s=i.attributes?i.attributes:i.events;for(var a in s)t.push("string"!=typeof s[a]?a:s[a])}}}return t},doesAttributeNeedsValidation:function(e,t){return this._tags[e]&&(this._tags[e].attributes&&this._tags[e].attributes[t]||this._tags[e].required&&WYMeditor.Helper.contains(this._tags[e].required,t))},validateAttribute:function(e,t,n){return this._tags[e]&&this._tags[e].attributes&&this._tags[e].attributes[t]&&n.length>0&&!n.match(this._tags[e].attributes[t])||this._tags[e]&&this._tags[e].required&&WYMeditor.Helper.contains(this._tags[e].required,t)&&0===n.length?!1:"undefined"!=typeof this._tags[e]},getPossibleTagAttributes:function(e){return this._possible_tag_attributes||(this._possible_tag_attributes={}),this._possible_tag_attributes[e]||(this._possible_tag_attributes[e]=this.getUniqueAttributesAndEventsForTag(e).concat(this.getDefaultAttributesAndEventsForTag(e))),this._possible_tag_attributes[e]}},WYMeditor.ParallelRegex=function(e){return this._case=e,this._patterns=[],this._labels=[],this._regex=null,this},WYMeditor.ParallelRegex.prototype.addPattern=function(e,t){t=t||!0;var n=this._patterns.length;this._patterns[n]=e,this._labels[n]=t,this._regex=null},WYMeditor.ParallelRegex.prototype.match=function(e){if(0===this._patterns.length)return[!1,""];var t=e.match(this._getCompoundedRegex());if(!t)return[!1,""];for(var n=t[0],r=1;r<t.length;r++)if(t[r])return[this._labels[r-1],n];return[!0,t[0]]},WYMeditor.ParallelRegex.prototype._getCompoundedRegex=function(){if(null===this._regex){for(var e=0,t=this._patterns.length;t>e;e++)this._patterns[e]="("+this._untokenizeRegex(this._tokenizeRegex(this._patterns[e]).replace(/([\/\(\)])/g,"\\$1"))+")";this._regex=new RegExp(this._patterns.join("|"),this._getPerlMatchingFlags())}return this._regex},WYMeditor.ParallelRegex.prototype._tokenizeRegex=function(e){return e.replace(/\(\?(i|m|s|x|U)\)/,"~~~~~~Tk1$1~~~~~~").replace(/\(\?(\-[i|m|s|x|U])\)/,"~~~~~~Tk2$1~~~~~~").replace(/\(\?\=(.*)\)/,"~~~~~~Tk3$1~~~~~~").replace(/\(\?\!(.*)\)/,"~~~~~~Tk4$1~~~~~~").replace(/\(\?\<\=(.*)\)/,"~~~~~~Tk5$1~~~~~~").replace(/\(\?\<\!(.*)\)/,"~~~~~~Tk6$1~~~~~~").replace(/\(\?\:(.*)\)/,"~~~~~~Tk7$1~~~~~~")},WYMeditor.ParallelRegex.prototype._untokenizeRegex=function(e){return e.replace(/~~~~~~Tk1(.{1})~~~~~~/,"(?$1)").replace(/~~~~~~Tk2(.{2})~~~~~~/,"(?$1)").replace(/~~~~~~Tk3(.*)~~~~~~/,"(?=$1)").replace(/~~~~~~Tk4(.*)~~~~~~/,"(?!$1)").replace(/~~~~~~Tk5(.*)~~~~~~/,"(?<=$1)").replace(/~~~~~~Tk6(.*)~~~~~~/,"(?<!$1)").replace(/~~~~~~Tk7(.*)~~~~~~/,"(?:$1)")},WYMeditor.ParallelRegex.prototype._getPerlMatchingFlags=function(){return this._case?"m":"mi"},WYMeditor.StateStack=function(e){return this._stack=[e],this},WYMeditor.StateStack.prototype.getCurrent=function(){return this._stack[this._stack.length-1]},WYMeditor.StateStack.prototype.enter=function(e){this._stack.push(e)},WYMeditor.StateStack.prototype.leave=function(){return 1==this._stack.length?!1:(this._stack.pop(),!0)},WYMeditor.LEXER_ENTER=1,WYMeditor.LEXER_MATCHED=2,WYMeditor.LEXER_UNMATCHED=3,WYMeditor.LEXER_EXIT=4,WYMeditor.LEXER_SPECIAL=5,WYMeditor.Lexer=function(e,t,n){return t=t||"accept",this._case=n||!1,this._regexes={},this._parser=e,this._mode=new WYMeditor.StateStack(t),this._mode_handlers={},this._mode_handlers[t]=t,this},WYMeditor.Lexer.prototype.addPattern=function(e,t){t=t||"accept","undefined"==typeof this._regexes[t]&&(this._regexes[t]=new WYMeditor.ParallelRegex(this._case)),this._regexes[t].addPattern(e),"undefined"==typeof this._mode_handlers[t]&&(this._mode_handlers[t]=t)},WYMeditor.Lexer.prototype.addEntryPattern=function(e,t,n){"undefined"==typeof this._regexes[t]&&(this._regexes[t]=new WYMeditor.ParallelRegex(this._case)),this._regexes[t].addPattern(e,n),"undefined"==typeof this._mode_handlers[n]&&(this._mode_handlers[n]=n)},WYMeditor.Lexer.prototype.addExitPattern=function(e,t){"undefined"==typeof this._regexes[t]&&(this._regexes[t]=new WYMeditor.ParallelRegex(this._case)),this._regexes[t].addPattern(e,"__exit"),"undefined"==typeof this._mode_handlers[t]&&(this._mode_handlers[t]=t)},WYMeditor.Lexer.prototype.addSpecialPattern=function(e,t,n){"undefined"==typeof this._regexes[t]&&(this._regexes[t]=new WYMeditor.ParallelRegex(this._case)),this._regexes[t].addPattern(e,"_"+n),"undefined"==typeof this._mode_handlers[n]&&(this._mode_handlers[n]=n)},WYMeditor.Lexer.prototype.mapHandler=function(e,t){this._mode_handlers[e]=t},WYMeditor.Lexer.prototype.parse=function(e){if("undefined"==typeof this._parser)return!1;for(var t,n=e.length;"object"==typeof(t=this._reduce(e));){e=t[0];var r=t[1],i=t[2],o=t[3];if(!this._dispatchTokens(r,i,o))return!1;if(""===e)return!0;if(e.length==n)return!1;n=e.length}return t?this._invokeParser(e,WYMeditor.LEXER_UNMATCHED):!1},WYMeditor.Lexer.prototype._dispatchTokens=function(e,t,n){return n=n||!1,this._invokeParser(e,WYMeditor.LEXER_UNMATCHED)?"boolean"==typeof n?this._invokeParser(t,WYMeditor.LEXER_MATCHED):this._isModeEnd(n)?this._invokeParser(t,WYMeditor.LEXER_EXIT)?this._mode.leave():!1:this._isSpecialMode(n)?(this._mode.enter(this._decodeSpecial(n)),this._invokeParser(t,WYMeditor.LEXER_SPECIAL)?this._mode.leave():!1):(this._mode.enter(n),this._invokeParser(t,WYMeditor.LEXER_ENTER)):!1},WYMeditor.Lexer.prototype._isModeEnd=function(e){return"__exit"===e},WYMeditor.Lexer.prototype._isSpecialMode=function(e){return"_"==e.substring(0,1)},WYMeditor.Lexer.prototype._decodeSpecial=function(e){return e.substring(1)},WYMeditor.Lexer.prototype._invokeParser=function(e,t){if(""===e)return!0;var n=this._mode.getCurrent(),r=this._mode_handlers[n],i=this._parser[r](e,t);return i},WYMeditor.Lexer.prototype._reduce=function(e){var t=this._regexes[this._mode.getCurrent()].match(e),n=t[1],r=t[0];if(r){var i=e.indexOf(n),o=e.substr(0,i);return e=e.substring(i+n.length),[e,o,n,r]}return!0},WYMeditor.XhtmlLexer=function(e){return jQuery.extend(this,new WYMeditor.Lexer(e,"Text")),this.mapHandler("Text","Text"),this.addTokens(),this.init(),this},WYMeditor.XhtmlLexer.prototype.init=function(){},WYMeditor.XhtmlLexer.prototype.addTokens=function(){this.addCommentTokens("Text"),this.addScriptTokens("Text"),this.addCssTokens("Text"),this.addTagTokens("Text")},WYMeditor.XhtmlLexer.prototype.addCommentTokens=function(e){this.addEntryPattern("<!--",e,"Comment"),this.addExitPattern("-->","Comment")},WYMeditor.XhtmlLexer.prototype.addScriptTokens=function(e){this.addEntryPattern("<script",e,"Script"),this.addExitPattern("</script>","Script")},WYMeditor.XhtmlLexer.prototype.addCssTokens=function(e){this.addEntryPattern("<style",e,"Css"),this.addExitPattern("</style>","Css")},WYMeditor.XhtmlLexer.prototype.addTagTokens=function(e){this.addSpecialPattern("<\\s*[a-z0-9:-]+\\s*/>",e,"SelfClosingTag"),this.addSpecialPattern("<\\s*[a-z0-9:-]+\\s*>",e,"OpeningTag"),this.addEntryPattern("<[a-z0-9:-]+[\\/ \\>]+",e,"OpeningTag"),this.addInTagDeclarationTokens("OpeningTag"),this.addSpecialPattern("</\\s*[a-z0-9:-]+\\s*>",e,"ClosingTag")},WYMeditor.XhtmlLexer.prototype.addInTagDeclarationTokens=function(e){this.addSpecialPattern("\\s+",e,"Ignore"),this.addAttributeTokens(e),this.addExitPattern("/>",e),this.addExitPattern(">",e)},WYMeditor.XhtmlLexer.prototype.addAttributeTokens=function(e){this.addSpecialPattern("\\s*[a-z-_0-9]*:?[a-z-_0-9]+\\s*(?==)\\s*",e,"TagAttributes"),this.addEntryPattern('=\\s*"',e,"DoubleQuotedAttribute"),this.addPattern('\\\\"',"DoubleQuotedAttribute"),this.addExitPattern('"',"DoubleQuotedAttribute"),this.addEntryPattern("=\\s*'",e,"SingleQuotedAttribute"),this.addPattern("\\\\'","SingleQuotedAttribute"),this.addExitPattern("'","SingleQuotedAttribute"),this.addSpecialPattern("=\\s*[^>\\s]*",e,"UnquotedAttribute")},WYMeditor.XhtmlParser=function(e,t){return t=t||"Text",this._Lexer=new WYMeditor.XhtmlLexer(this),this._Listener=e,this._mode=t,this._matches=[],this._last_match="",this._current_match="",this},WYMeditor.XhtmlParser.prototype.parse=function(e){return this._Lexer.parse(this.beforeParsing(e)),this.afterParsing(this._Listener.getResult())},WYMeditor.XhtmlParser.prototype.beforeParsing=function(e){return(e.match(/class="MsoNormal"/)||e.match(/ns = "urn:schemas-microsoft-com/))&&this._Listener.avoidStylingTagsAndAttributes(),this._Listener.beforeParsing(e)},WYMeditor.XhtmlParser.prototype.afterParsing=function(e){return this._Listener._avoiding_tags_implicitly&&this._Listener.allowStylingTagsAndAttributes(),this._Listener.afterParsing(e)},WYMeditor.XhtmlParser.prototype.Ignore=function(){return!0},WYMeditor.XhtmlParser.prototype.Text=function(e){return this._Listener.addContent(e),!0},WYMeditor.XhtmlParser.prototype.Comment=function(e,t){return this._addNonTagBlock(e,t,"addComment")},WYMeditor.XhtmlParser.prototype.Script=function(e,t){return this._addNonTagBlock(e,t,"addScript")},WYMeditor.XhtmlParser.prototype.Css=function(e,t){return this._addNonTagBlock(e,t,"addCss")},WYMeditor.XhtmlParser.prototype._addNonTagBlock=function(e,t,n){switch(t){case WYMeditor.LEXER_ENTER:this._non_tag=e;break;case WYMeditor.LEXER_UNMATCHED:this._non_tag+=e;break;case WYMeditor.LEXER_EXIT:switch(n){case"addComment":this._Listener.addComment(this._non_tag+e);break;case"addScript":this._Listener.addScript(this._non_tag+e);break;case"addCss":this._Listener.addCss(this._non_tag+e)}}return!0},WYMeditor.XhtmlParser.prototype.SelfClosingTag=function(e,t){this.OpeningTag(e,t),this.normalizeTag(e);return this.ClosingTag(e,t)},WYMeditor.XhtmlParser.prototype.OpeningTag=function(e,t){switch(t){case WYMeditor.LEXER_ENTER:this._tag=this.normalizeTag(e),this._tag_attributes={};break;case WYMeditor.LEXER_SPECIAL:this._callOpenTagListener(this.normalizeTag(e));break;case WYMeditor.LEXER_EXIT:this._callOpenTagListener(this._tag,this._tag_attributes)}return!0},WYMeditor.XhtmlParser.prototype.ClosingTag=function(e){return this._callCloseTagListener(this.normalizeTag(e)),!0},WYMeditor.XhtmlParser.prototype._callOpenTagListener=function(e,t){t=t||{},this.autoCloseUnclosedBeforeNewOpening(e),this._Listener.isBlockTag(e)?(this._Listener._tag_stack.push(e),this._Listener.fixNestingBeforeOpeningBlockTag(e,t),this._Listener.openBlockTag(e,t),this._increaseOpenTagCounter(e)):this._Listener.isInlineTag(e)?this._Listener.inlineTag(e,t):(this._Listener.openUnknownTag(e,t),this._increaseOpenTagCounter(e)),this._Listener.last_tag=e,this._Listener.last_tag_opened=!0,this._Listener.last_tag_attributes=t},WYMeditor.XhtmlParser.prototype._callCloseTagListener=function(e){if(this._decreaseOpenTagCounter(e)){if(this.autoCloseUnclosedBeforeTagClosing(e),this._Listener.isBlockTag(e)){var t=this._Listener._tag_stack.pop();if(t===!1)return;t!=e&&(e=t),this._Listener.closeBlockTag(e)}}else this._Listener.isInlineTag(e)||this._Listener.closeUnopenedTag(e);
this._Listener.last_tag=e,this._Listener.last_tag_opened=!1},WYMeditor.XhtmlParser.prototype._increaseOpenTagCounter=function(e){this._Listener._open_tags[e]=this._Listener._open_tags[e]||0,this._Listener._open_tags[e]++},WYMeditor.XhtmlParser.prototype._decreaseOpenTagCounter=function(e){return this._Listener._open_tags[e]?(this._Listener._open_tags[e]--,0===this._Listener._open_tags[e]&&(this._Listener._open_tags[e]=void 0),!0):!1},WYMeditor.XhtmlParser.prototype.autoCloseUnclosedBeforeNewOpening=function(e){this._autoCloseUnclosed(e,!1)},WYMeditor.XhtmlParser.prototype.autoCloseUnclosedBeforeTagClosing=function(e){this._autoCloseUnclosed(e,!0)},WYMeditor.XhtmlParser.prototype._autoCloseUnclosed=function(e,t){if(t=t||!1,this._Listener._open_tags)for(var n in this._Listener._open_tags){var r=this._Listener._open_tags[n];r>0&&this._Listener.shouldCloseTagAutomatically(n,e,t)&&this._callCloseTagListener(n,!0)}},WYMeditor.XhtmlParser.prototype.getTagReplacements=function(){return this._Listener.getTagReplacements()},WYMeditor.XhtmlParser.prototype.normalizeTag=function(e){e=e.replace(/^([\s<\/>]*)|([\s<\/>]*)$/gm,"").toLowerCase();var t=this._Listener.getTagReplacements();return t[e]?t[e]:e},WYMeditor.XhtmlParser.prototype.TagAttributes=function(e,t){return WYMeditor.LEXER_SPECIAL==t&&(this._current_attribute=e),!0},WYMeditor.XhtmlParser.prototype.DoubleQuotedAttribute=function(e,t){return WYMeditor.LEXER_UNMATCHED==t&&(this._tag_attributes[this._current_attribute]=e),!0},WYMeditor.XhtmlParser.prototype.SingleQuotedAttribute=function(e,t){return WYMeditor.LEXER_UNMATCHED==t&&(this._tag_attributes[this._current_attribute]=e),!0},WYMeditor.XhtmlParser.prototype.UnquotedAttribute=function(e){return this._tag_attributes[this._current_attribute]=e.replace(/^=/,""),!0},WYMeditor.XhtmlSaxListener=function(){return this.output="",this.helper=new WYMeditor.XmlHelper,this._open_tags={},this.validator=WYMeditor.XhtmlValidator,this._tag_stack=[],this.avoided_tags=[],this._insert_before_closing=[],this._insert_after_closing=[],this._last_node_was_text=!1,this._insideTagToRemove=!1,this._lastTagRemoved=!1,this._extraLIClosingTags=0,this._removedTagStackIndex=0,this.entities={"&nbsp;":"&#160;","&iexcl;":"&#161;","&cent;":"&#162;","&pound;":"&#163;","&curren;":"&#164;","&yen;":"&#165;","&brvbar;":"&#166;","&sect;":"&#167;","&uml;":"&#168;","&copy;":"&#169;","&ordf;":"&#170;","&laquo;":"&#171;","&not;":"&#172;","&shy;":"&#173;","&reg;":"&#174;","&macr;":"&#175;","&deg;":"&#176;","&plusmn;":"&#177;","&sup2;":"&#178;","&sup3;":"&#179;","&acute;":"&#180;","&micro;":"&#181;","&para;":"&#182;","&middot;":"&#183;","&cedil;":"&#184;","&sup1;":"&#185;","&ordm;":"&#186;","&raquo;":"&#187;","&frac14;":"&#188;","&frac12;":"&#189;","&frac34;":"&#190;","&iquest;":"&#191;","&Agrave;":"&#192;","&Aacute;":"&#193;","&Acirc;":"&#194;","&Atilde;":"&#195;","&Auml;":"&#196;","&Aring;":"&#197;","&AElig;":"&#198;","&Ccedil;":"&#199;","&Egrave;":"&#200;","&Eacute;":"&#201;","&Ecirc;":"&#202;","&Euml;":"&#203;","&Igrave;":"&#204;","&Iacute;":"&#205;","&Icirc;":"&#206;","&Iuml;":"&#207;","&ETH;":"&#208;","&Ntilde;":"&#209;","&Ograve;":"&#210;","&Oacute;":"&#211;","&Ocirc;":"&#212;","&Otilde;":"&#213;","&Ouml;":"&#214;","&times;":"&#215;","&Oslash;":"&#216;","&Ugrave;":"&#217;","&Uacute;":"&#218;","&Ucirc;":"&#219;","&Uuml;":"&#220;","&Yacute;":"&#221;","&THORN;":"&#222;","&szlig;":"&#223;","&agrave;":"&#224;","&aacute;":"&#225;","&acirc;":"&#226;","&atilde;":"&#227;","&auml;":"&#228;","&aring;":"&#229;","&aelig;":"&#230;","&ccedil;":"&#231;","&egrave;":"&#232;","&eacute;":"&#233;","&ecirc;":"&#234;","&euml;":"&#235;","&igrave;":"&#236;","&iacute;":"&#237;","&icirc;":"&#238;","&iuml;":"&#239;","&eth;":"&#240;","&ntilde;":"&#241;","&ograve;":"&#242;","&oacute;":"&#243;","&ocirc;":"&#244;","&otilde;":"&#245;","&ouml;":"&#246;","&divide;":"&#247;","&oslash;":"&#248;","&ugrave;":"&#249;","&uacute;":"&#250;","&ucirc;":"&#251;","&uuml;":"&#252;","&yacute;":"&#253;","&thorn;":"&#254;","&yuml;":"&#255;","&OElig;":"&#338;","&oelig;":"&#339;","&Scaron;":"&#352;","&scaron;":"&#353;","&Yuml;":"&#376;","&fnof;":"&#402;","&circ;":"&#710;","&tilde;":"&#732;","&Alpha;":"&#913;","&Beta;":"&#914;","&Gamma;":"&#915;","&Delta;":"&#916;","&Epsilon;":"&#917;","&Zeta;":"&#918;","&Eta;":"&#919;","&Theta;":"&#920;","&Iota;":"&#921;","&Kappa;":"&#922;","&Lambda;":"&#923;","&Mu;":"&#924;","&Nu;":"&#925;","&Xi;":"&#926;","&Omicron;":"&#927;","&Pi;":"&#928;","&Rho;":"&#929;","&Sigma;":"&#931;","&Tau;":"&#932;","&Upsilon;":"&#933;","&Phi;":"&#934;","&Chi;":"&#935;","&Psi;":"&#936;","&Omega;":"&#937;","&alpha;":"&#945;","&beta;":"&#946;","&gamma;":"&#947;","&delta;":"&#948;","&epsilon;":"&#949;","&zeta;":"&#950;","&eta;":"&#951;","&theta;":"&#952;","&iota;":"&#953;","&kappa;":"&#954;","&lambda;":"&#955;","&mu;":"&#956;","&nu;":"&#957;","&xi;":"&#958;","&omicron;":"&#959;","&pi;":"&#960;","&rho;":"&#961;","&sigmaf;":"&#962;","&sigma;":"&#963;","&tau;":"&#964;","&upsilon;":"&#965;","&phi;":"&#966;","&chi;":"&#967;","&psi;":"&#968;","&omega;":"&#969;","&thetasym;":"&#977;","&upsih;":"&#978;","&piv;":"&#982;","&ensp;":"&#8194;","&emsp;":"&#8195;","&thinsp;":"&#8201;","&zwnj;":"&#8204;","&zwj;":"&#8205;","&lrm;":"&#8206;","&rlm;":"&#8207;","&ndash;":"&#8211;","&mdash;":"&#8212;","&lsquo;":"&#8216;","&rsquo;":"&#8217;","&sbquo;":"&#8218;","&ldquo;":"&#8220;","&rdquo;":"&#8221;","&bdquo;":"&#8222;","&dagger;":"&#8224;","&Dagger;":"&#8225;","&bull;":"&#8226;","&hellip;":"&#8230;","&permil;":"&#8240;","&prime;":"&#8242;","&Prime;":"&#8243;","&lsaquo;":"&#8249;","&rsaquo;":"&#8250;","&oline;":"&#8254;","&frasl;":"&#8260;","&euro;":"&#8364;","&image;":"&#8465;","&weierp;":"&#8472;","&real;":"&#8476;","&trade;":"&#8482;","&alefsym;":"&#8501;","&larr;":"&#8592;","&uarr;":"&#8593;","&rarr;":"&#8594;","&darr;":"&#8595;","&harr;":"&#8596;","&crarr;":"&#8629;","&lArr;":"&#8656;","&uArr;":"&#8657;","&rArr;":"&#8658;","&dArr;":"&#8659;","&hArr;":"&#8660;","&forall;":"&#8704;","&part;":"&#8706;","&exist;":"&#8707;","&empty;":"&#8709;","&nabla;":"&#8711;","&isin;":"&#8712;","&notin;":"&#8713;","&ni;":"&#8715;","&prod;":"&#8719;","&sum;":"&#8721;","&minus;":"&#8722;","&lowast;":"&#8727;","&radic;":"&#8730;","&prop;":"&#8733;","&infin;":"&#8734;","&ang;":"&#8736;","&and;":"&#8743;","&or;":"&#8744;","&cap;":"&#8745;","&cup;":"&#8746;","&int;":"&#8747;","&there4;":"&#8756;","&sim;":"&#8764;","&cong;":"&#8773;","&asymp;":"&#8776;","&ne;":"&#8800;","&equiv;":"&#8801;","&le;":"&#8804;","&ge;":"&#8805;","&sub;":"&#8834;","&sup;":"&#8835;","&nsub;":"&#8836;","&sube;":"&#8838;","&supe;":"&#8839;","&oplus;":"&#8853;","&otimes;":"&#8855;","&perp;":"&#8869;","&sdot;":"&#8901;","&lceil;":"&#8968;","&rceil;":"&#8969;","&lfloor;":"&#8970;","&rfloor;":"&#8971;","&lang;":"&#9001;","&rang;":"&#9002;","&loz;":"&#9674;","&spades;":"&#9824;","&clubs;":"&#9827;","&hearts;":"&#9829;","&diams;":"&#9830;"},this.block_tags=["a","abbr","acronym","address","area","b","base","bdo","big","blockquote","body","button","caption","cite","code","colgroup","dd","del","div","dfn","dl","dt","em","fieldset","form","head","h1","h2","h3","h4","h5","h6","html","i","iframe","ins","kbd","label","legend","li","map","noscript","object","ol","optgroup","option","p","param","pre","q","samp","script","select","small","span","strong","style","sub","sup","table","tbody","td","textarea","tfoot","th","thead","title","tr","tt","ul","var","extends"],this.inline_tags=["br","col","hr","img","input"],this},WYMeditor.XhtmlSaxListener.prototype.shouldCloseTagAutomatically=function(e,t,n){if(n=n||!1,"td"==e){if(n&&"tr"==t||!n&&"td"==t)return!0}else if("option"==e&&(n&&"select"==t||!n&&"option"==t))return!0;return!1},WYMeditor.XhtmlSaxListener.prototype.beforeParsing=function(e){return this.output="",this._insert_before_closing=[],this._insert_after_closing=[],this._open_tags={},this._tag_stack=[],this._last_node_was_text=!1,this._lastTagRemoved=!1,this.last_tag=null,e},WYMeditor.XhtmlSaxListener.prototype.afterParsing=function(e){return e=this.replaceNamedEntities(e),e=this.joinRepeatedEntities(e),e=this.removeEmptyTags(e),e=this.removeBrInPre(e)},WYMeditor.XhtmlSaxListener.prototype.replaceNamedEntities=function(e){for(var t in this.entities)e=e.replace(new RegExp(t,"g"),this.entities[t]);return e},WYMeditor.XhtmlSaxListener.prototype.joinRepeatedEntities=function(e){var t="em|strong|sub|sup|acronym|pre|del|address";return e.replace(new RegExp("</("+t+")><\\1>",""),"").replace(new RegExp("(s*<("+t+")>s*){2}(.*)(s*</\\2>s*){2}",""),"<$2>$3<$2>")},WYMeditor.XhtmlSaxListener.prototype.removeEmptyTags=function(e){return e.replace(new RegExp("<("+this.block_tags.join("|").replace(/\|td/,"").replace(/\|th/,"")+")>(<br />|&#160;|&nbsp;|\\s)*</\\1>","g"),"")},WYMeditor.XhtmlSaxListener.prototype.removeBrInPre=function(e){var t=e.match(new RegExp("<pre[^>]*>(.*?)</pre>","gmi"));if(t)for(var n=0;n<t.length;n++)e=e.replace(t[n],t[n].replace(new RegExp("<br />","g"),String.fromCharCode(13,10)));return e},WYMeditor.XhtmlSaxListener.prototype.getResult=function(){return this.output},WYMeditor.XhtmlSaxListener.prototype.getTagReplacements=function(){return{b:"strong",i:"em"}},WYMeditor.XhtmlSaxListener.prototype.getTagForStyle=function(e){return/sub/.test(e)?"sub":/super/.test(e)?"sup":/bold/.test(e)?"strong":/italic/.test(e)?"em":!1},WYMeditor.XhtmlSaxListener.prototype.addContent=function(e){this.last_tag&&"li"==this.last_tag&&(e=e.replace(/(\r|\n|\r\n)+$/g,""),e=e.replace(/(\r|\n|\r\n)+/g," ")),e.replace(/^\s+|\s+$/g,"").length>0&&(this._last_node_was_text=!0),this._insideTagToRemove||(this.output+=e)},WYMeditor.XhtmlSaxListener.prototype.addComment=function(e){this.remove_comments||this._insideTagToRemove||(this.output+=e)},WYMeditor.XhtmlSaxListener.prototype.addScript=function(e){this.remove_scripts||this._insideTagToRemove||(this.output+=e)},WYMeditor.XhtmlSaxListener.prototype.addCss=function(e){this.remove_embeded_styles||this._insideTagToRemove||(this.output+=e)},WYMeditor.XhtmlSaxListener.prototype.openBlockTag=function(e,t){if(this._last_node_was_text=!1,!this._insideTagToRemove){if(this._shouldRemoveTag(e,t))return this._insideTagToRemove=!0,this._removedTagStackIndex=this._tag_stack.length-1,void 0;if(t=this.validator.getValidTagAttributes(e,t),t=this.removeUnwantedClasses(t),"span"===e&&t.style){var n=this.getTagForStyle(t.style);n&&(e=n,this._tag_stack.pop(),this._tag_stack.push(e),t.style="")}this.output+=this.helper.tag(e,t,!0),this._lastTagRemoved=!1}},WYMeditor.XhtmlSaxListener.prototype.inlineTag=function(e,t){this._last_node_was_text=!1,this._insideTagToRemove||this._shouldRemoveTag(e,t)||(t=this.validator.getValidTagAttributes(e,t),t=this.removeUnwantedClasses(t),this.output+=this.helper.tag(e,t),this._lastTagRemoved=!1)},WYMeditor.XhtmlSaxListener.prototype.openUnknownTag=function(){},WYMeditor.XhtmlSaxListener.prototype.closeBlockTag=function(e){return this._last_node_was_text=!1,this._insideTagToRemove?(this._tag_stack.length===this._removedTagStackIndex&&(this._insideTagToRemove=!1),this._lastTagRemoved=!0,void 0):(this.output=this.output.replace(/<br \/>$/,"")+this._getClosingTagContent("before",e)+"</"+e+">"+this._getClosingTagContent("after",e),void 0)},WYMeditor.XhtmlSaxListener.prototype.closeUnknownTag=function(){},WYMeditor.XhtmlSaxListener.prototype.closeUnopenedTag=function(e){this._last_node_was_text=!1,this._insideTagToRemove||("li"===e&&this._extraLIClosingTags?this._extraLIClosingTags--:this.output+="</"+e+">")},WYMeditor.XhtmlSaxListener.prototype.avoidStylingTagsAndAttributes=function(){this.avoided_tags=["div","span"],this.validator.skiped_attributes=["style"],this.validator.skiped_attribute_values=["MsoNormal","main1"],this._avoiding_tags_implicitly=!0},WYMeditor.XhtmlSaxListener.prototype.allowStylingTagsAndAttributes=function(){this.avoided_tags=[],this.validator.skiped_attributes=[],this.validator.skiped_attribute_values=[],this._avoiding_tags_implicitly=!1},WYMeditor.XhtmlSaxListener.prototype.isBlockTag=function(e){return!WYMeditor.Helper.contains(this.avoided_tags,e)&&WYMeditor.Helper.contains(this.block_tags,e)},WYMeditor.XhtmlSaxListener.prototype.isInlineTag=function(e){return!WYMeditor.Helper.contains(this.avoided_tags,e)&&WYMeditor.Helper.contains(this.inline_tags,e)},WYMeditor.XhtmlSaxListener.prototype.insertContentAfterClosingTag=function(e,t){this._insertContentWhenClosingTag("after",e,t)},WYMeditor.XhtmlSaxListener.prototype.insertContentBeforeClosingTag=function(e,t){this._insertContentWhenClosingTag("before",e,t)},WYMeditor.XhtmlSaxListener.prototype.removeUnwantedClasses=function(e){var t,n;if(!e["class"])return e;for(n=0;n<WYMeditor.CLASSES_REMOVED_BY_PARSER.length;++n)t=new RegExp("(^|\\s)"+WYMeditor.CLASSES_REMOVED_BY_PARSER[n]+"($|\\s)","gi"),e["class"]=e["class"].replace(t,"$1");return e["class"]=e["class"].replace(/\s$/,""),e},WYMeditor.XhtmlSaxListener.prototype.fixNestingBeforeOpeningBlockTag=function(e,t){if(this._last_node_was_text||"ul"!=e&&"ol"!=e||!this.last_tag||this.last_tag_opened||"li"!=this.last_tag)if("ul"!=e&&"ol"!=e||!this.last_tag||!this.last_tag_opened||"ul"!=this.last_tag&&"ol"!=this.last_tag){if("li"==e&&this._tag_stack.length>=2){var n=this._tag_stack[this._tag_stack.length-2];"li"!=n||this._shouldRemoveTag(e,t)||(this._open_tags.li-=1,0===this._open_tags.li&&(this._open_tags.li=void 0),this._tag_stack.splice(this._tag_stack.length-2,1),this._last_node_was_text=!1,this._insideTagToRemove?this._tag_stack.length-1===this._removedTagStackIndex&&(this._insideTagToRemove=!1,this._lastTagRemoved=!0,this._extraLIClosingTags++):this.output+="</li>")}}else this._shouldRemoveTag(e,t)||(this.output+=this.helper.tag("li",{},!0),this.insertContentAfterClosingTag(e,"</li>")),this._last_node_was_text=!1;else this._lastTagRemoved?(this._insideTagToRemove=!0,this._removedTagStackIndex=this._tag_stack.length-1):this._shouldRemoveTag(e,t)||(this.output=this.output.replace(/<\/li>\s*$/,""),this.insertContentAfterClosingTag(e,"</li>"))},WYMeditor.XhtmlSaxListener.prototype._insertContentWhenClosingTag=function(e,t,n){this["_insert_"+e+"_closing"]||(this["_insert_"+e+"_closing"]=[]),this["_insert_"+e+"_closing"][t]||(this["_insert_"+e+"_closing"][t]=[]),this["_insert_"+e+"_closing"][t].push(n)},WYMeditor.XhtmlSaxListener.prototype._getClosingTagContent=function(e,t){return this["_insert_"+e+"_closing"]&&this["_insert_"+e+"_closing"][t]&&this["_insert_"+e+"_closing"][t].length>0?this["_insert_"+e+"_closing"][t].pop():""},WYMeditor.XhtmlSaxListener.prototype._shouldRemoveTag=function(e,t){var n;return t["class"]?(n=t["class"].split(" "),jQuery.inArray(WYMeditor.EDITOR_ONLY_CLASS,n)>-1?!0:!1):!1},WYMeditor.WymCssLexer=function(e,t){return t="undefined"==typeof t?!0:t,jQuery.extend(this,new WYMeditor.Lexer(e,t?"Ignore":"WymCss")),this.mapHandler("WymCss","Ignore"),t===!0&&(this.addEntryPattern("/\\*[<\\s]*WYMeditor[>\\s]*\\*/","Ignore","WymCss"),this.addExitPattern("/\\*[</\\s]*WYMeditor[>\\s]*\\*/","WymCss")),this.addSpecialPattern("[\\sa-z1-6]*\\.[a-z-_0-9]+","WymCss","WymCssStyleDeclaration"),this.addEntryPattern("/\\*","WymCss","WymCssComment"),this.addExitPattern("\\*/","WymCssComment"),this.addEntryPattern("{","WymCss","WymCssStyle"),this.addExitPattern("}","WymCssStyle"),this.addEntryPattern("/\\*","WymCssStyle","WymCssFeedbackStyle"),this.addExitPattern("\\*/","WymCssFeedbackStyle"),this},WYMeditor.WymCssParser=function(){return this._in_style=!1,this._has_title=!1,this.only_wym_blocks=!0,this.css_settings={classesItems:[],editorStyles:[],dialogStyles:[]},this},WYMeditor.WymCssParser.prototype.parse=function(e,t){t="undefined"==typeof t?this.only_wym_blocks:t,this._Lexer=new WYMeditor.WymCssLexer(this,t),this._Lexer.parse(e)},WYMeditor.WymCssParser.prototype.Ignore=function(){return!0},WYMeditor.WymCssParser.prototype.WymCssComment=function(e,t){return e.match(/end[a-z0-9\s]*wym[a-z0-9\s]*/im)?!1:(t==WYMeditor.LEXER_UNMATCHED&&(this._in_style?this._current_item[this._current_element]&&(this._current_item[this._current_element].expressions?this._current_item[this._current_element].expressions.push(e):this._current_item[this._current_element].expressions=[e]):(this._has_title=!0,this._current_item={title:WYMeditor.Helper.trim(e)}),this._in_style=!0),!0)},WYMeditor.WymCssParser.prototype.WymCssStyle=function(e,t){return t==WYMeditor.LEXER_UNMATCHED?(e=WYMeditor.Helper.trim(e),""!==e&&(this._current_item[this._current_element].style=e)):t==WYMeditor.LEXER_EXIT&&(this._in_style=!1,this._has_title=!1,this.addStyleSetting(this._current_item)),!0},WYMeditor.WymCssParser.prototype.WymCssFeedbackStyle=function(e,t){return t==WYMeditor.LEXER_UNMATCHED&&(this._current_item[this._current_element].feedback_style=e.replace(/^([\s\/\*]*)|([\s\/\*]*)$/gm,"")),!0},WYMeditor.WymCssParser.prototype.WymCssStyleDeclaration=function(e){e=e.replace(/^([\s\.]*)|([\s\.*]*)$/gm,"");var t="";if(e.indexOf(".")>0){var n=e.split(".");this._current_element=n[1],t=n[0]}else this._current_element=e;return this._has_title||(this._current_item={title:(t?t.toUpperCase()+": ":"")+this._current_element},this._has_title=!0),this._current_item[this._current_element]||(this._current_item[this._current_element]={name:this._current_element}),t&&(this._current_item[this._current_element].tags?this._current_item[this._current_element].tags.push(t):this._current_item[this._current_element].tags=[t]),!0},WYMeditor.WymCssParser.prototype.addStyleSetting=function(e){for(var t in e){var n=e[t];"object"==typeof n&&"title"!=t&&(this.css_settings.classesItems.push({name:WYMeditor.Helper.trim(n.name),title:e.title,expr:WYMeditor.Helper.trim((n.expressions||n.tags).join(", "))}),n.feedback_style&&this.css_settings.editorStyles.push({name:"."+WYMeditor.Helper.trim(n.name),css:n.feedback_style}),n.style&&this.css_settings.dialogStyles.push({name:"."+WYMeditor.Helper.trim(n.name),css:n.style}))}};